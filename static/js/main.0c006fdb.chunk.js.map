{"version":3,"sources":["components/Main/map/MainMapMapbox.module.css","images/mapbox-logo-black.svg","images/mapbox-logo-white.svg","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","components/ConicGradient/index.js","components/Main/map/PruneCluster_dist/PruneCluster.js","components/FiltersPanelContent/index.js","components/Main/map/MainMapMapbox.js","components/Main/index.js","components/App/index.js","index.js","components/Localized/index.js","l10n.js","components/LocalStorage/index.js","components/Globals/index.js","functions.js","queries.js"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","useConicGradient","waitingForConicGradient","useRef","_useState","useState","_useState2","_slicedToArray","isRunning","setIsRunning","_useState3","_useState4","conicGradientExists","setConicGradientExists","onReady","useCallback","callback","current","push","getConicGradient","window","ConicGradient","useEffect","delay","savedCallback","setInterval","clearInterval","useInterval","_step","_iterator","_createForOfIteratorHelper","s","n","done","value","err","f","PruneCluster","FiltersPanelContent","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","category","age","audience_queer","Set","mustHaveUndecidedChangeset","published","categories","_categories_","_objectSpread","name_translated","getTranslation","name","globals","userLocales","audience_queer_values","key","translation_key","emoji","emojis","audience_queer_only","audience_queer_primary","audience_queer_welcome","ages","Array","apply","v","i","highest_ages_entry","length","setValue","bind","_assertThisInitialized","getFilterObj","toggleMustHaveUndecidedChangeset","_createClass","this","onChange","presets","audienceQueerOptions","has","_toConsumableArray","selectedAge","ageOption","stateKeyName","closeMenuCallback","_this2","setState","_defineProperty","audienceKey","_this3","size","delete","add","_this4","_this5","React","createElement","className","PopupState","variant","popupState","Fragment","Fab","assign","bindTrigger","aria-label","getString","title","style","margin","background","color","bg","Localized","ArrowDropDownIcon","Menu","bindMenu","transitionDuration","anchorOrigin","vertical","horizontal","MenuItem","onClick","close","selected","isSelected","fg","theme","palette","type","undefined","vars","number","filter","audience","toogleAudienceQueer","elems","strong","profileID","CheckIcon","width","height","Component","withGlobals","withTheme","withLocalization","__extends","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","constructor","prototype","create","PruneCluster_1","Point","ClusterObject","hashCodeCounter","maxHashCodeValue","Math","pow","Marker","lat","lng","data","weight","filtered","position","hashCode","Move","SetData","Cluster","marker","stats","ENABLE_MARKERS_LIST","_clusterMarkers","lastMarker","population","totalWeight","averagePosition","AddMarker","h","currentTotalWeight","newWeight","Reset","ComputeBounds","cluster","proj","Project","Size","startX","floor","x","startY","y","a","UnProject","bounds","minLat","maxLat","minLng","maxLng","GetClusterMarkers","ApplyCluster","newCluster","min","max","concat","insertionSort","list","j","tmp","tmpLng","_markers","_nbChanges","_clusters","ViewPadding","RegisterMarker","_removeFlag","RegisterMarkers","markers","forEach","_sortMarkers","total","nbChanges","sort","_sortClusters","_indexLowerBoundLng","it","step","first","count","_resetClusterViews","l","ProcessView","heightBuffer","abs","widthBuffer","extendedBounds","firstIndex","clusters","workingClusterList","slice","markerPosition","clusterFound","ll","splice","newClustersList","RemoveMarkers","newMarkersList","FindMarkersInArea","area","aMinLat","aMaxLat","aMinLng","aMaxLng","result","pos","withFiltered","rMinLat","Number","MAX_VALUE","rMaxLat","rMinLng","rMaxLng","FindMarkersBoundsInArea","ComputeGlobalBounds","GetMarkers","GetPopulation","ResetClusters","PruneClusterForLeaflet","L","Layer","Class","extend","initialize","clusterMargin","_map","project","LatLng","getZoom","unproject","_objectsOnMap","spiderfier","PruneClusterLeafletSpiderfier","_hardMove","_resetIcons","_removeTimeoutId","_markersRemoveListTimeout","BuildLeafletCluster","m","icon","BuildLeafletClusterIcon","_leafletClusterBounds","on","cbounds","markersArea","LatLngBounds","zoomLevelBefore","zoomLevelAfter","getBoundsZoom","filteredBounds","_leafletMarker","newMarkersArea","markerPos","isFiltered","currentFilteredBounds","getMaxZoom","fire","center","getLatLng","setView","fitBounds","c","iconSize","maxPopulation","DivIcon","html","point","BuildLeafletMarker","PrepareLeafletMarker","setIcon","popup","content","getPopup","setPopupContent","popupOptions","bindPopup","onAdd","_moveStart","_moveEnd","_zoomStart","_zoomEnd","addLayer","onRemove","off","removeLayer","_moveInProgress","hard","_zoomInProgress","getBounds","zoom","marginRatio","resetIcons","southWest","getSouthWest","northEast","getNorthEast","objectsOnMap","newObjectsOnMap","markersOnMap","_removeFromMap","clusterCreationList","clusterCreationListPopOne","opacityUpdateList","workingList","icluster","iclusterData","latMargin","lngMargin","oldMaxLng","oldMinLat","oldMaxLat","newMinLng","newMinLat","newMaxLat","_leafletCollision","_leafletOldPopulation","_leafletOldHashCode","oldMarker","_hashCode","_zoomLevel","forceIconRedraw","setLatLng","_leafletPosition","equals","boundsCopy","Util","_population","idata","remove","pa","jcluster","jdata","pb","oldMinLng","newMaxLng","poisson","console","error","creationMarker","iposition","addTo","setOpacity","setTimeout","_icon","DomUtil","addClass","_shadow","clearTimeout","toRemove","FitBounds","RedrawIcons","processView","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_spiralCountTrigger","spiderfyDistanceMultiplier","_cluster","_currentMarkers","_multiLines","multiPolyline","_lines","polyline","Spiderfy","Unspiderfy","_currentCenter","points","centerPoint","latLngToLayerPoint","_generatePointsSpiral","_generatePointsCircle","polylines","leafletMarkers","projectedPoints","layerPointToLatLng","setZIndexOffset","startTime","Date","anim","stepRatio","diffLat","diffLng","setLatLngs","_clusterMarker","centerPt","angle","legLength","angleStep","res","round","cos","sin","separation","lengthFactor","_regeneratorRuntime","Op","hasOwn","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","fn","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","reject","invoke","record","__await","unwrapped","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","MapboxLoader","lazy","MainMapMapbox","docs","isGeoChooser","middleMarkerDoc","currentStyleURL","clusterGroup","defaultClusterSize","mapbox_markers","mapbox_markersOnScreen","filters","leaflet_map","borderGotLoaded","prune_markers","undecidedPlaces","loadedMapbox","gotMapRefLeaflet","syncViewport","addMarkersToPruneCluster","filterMarkers","showAllMarkers","showAllMarkersButMiddleMarker","viewportChanged","zoomIn","zoomOut","loadMarkers","loadUndecidedPlaces","filtersChanged","conic_gradient","updateMarkers","forceRedraw","onFunctions","functions","getMapType","setPadding","_this2$map","arguments","setZoom","_this2$map2","getCenter","_this2$map3","flyToBounds","_this2$map4","_this2$map5","jumpTo","panBy","_this2$map6","panTo","_this2$map7","flyTo","_this2$map8","invalidateSize","_this2$leaflet_map","_this2$leaflet_map2","latLngToContainerPoint","_this2$leaflet_map3","useAsGeoChooser","refetchMarkers","mainMapFunctions","addEventListener","setMapPos","mapViewport","store","get","newStyleURL","getStyleUrl","setStyle","removeEventListener","markerQuerySubscription","unsubscribe","graphql","query","fetchPolicy","query_markers","variables","languages","navigator","event","map_center","yesOrNo","setGlobalMapCenter","watchQuery","subscribe","_ref","JSON","parse","stringify","doc","___preset","preset","default","___color","getColorByPreset","colorsByPreset","colors","query_undecidedPlaces","_ref2","_id","_showBorders","_asyncToGenerator","_callee","borders_path","borders_response","borders","getStatusColor","layers","firstSymbolId","layer","_this6","_context","fetch","json","status","success","main","warning","features","feature","country_code","getCountryCode","properties","ilga","getILGA","overview","statusNumber","geometry","addSource","getStyle","t0","getLayer","element","_this7","Map","getInitCenter","zoomSnap","zoomAnimation","fadeAnimation","markerZoomAnimation","scrollWheelZoom","minZoom","maxZoom","_ref3","_this8","ref","mapboxgl","container","LngLat","bearing","pitch","hash","refreshExpiredTiles","bearingSnap","pitchWithRotate","dragPan","dragRotate","touchZoomRotate","touchPitch","scrollZoom","boxZoom","doubleClickZoom","currentMapboxStylesheetID","newMapboxStylesheetID","stylesheet","_loaded","localizeTheMap","getBearing","getPitch","_step2","language","layerIDs","layout","flat","includes","_iterator2","layerID","setLayoutProperty","options","newMarkers","_step3","_iterator3","createPoiMarker","createClusterMarker","setLngLat","_this9","_this10","document","classList","cursor","navigate","innerHTML","toLowerCase","getTranslationFromArray","_this11","entries","reduce","preset_key","colors_sum","sum","pair","gradient","dataURL","padding","isSmallScreen","top","right","bottom","left","sidebarIsOpen","duration","stops","_step4","counter","currentPos","_iterator4","gapColor","ceil","join","repeating","_step5","_iterator5","updateMarkersAfterPruneClusterUpdate","middleMarkerID","_this12","showBorders","hideBorders","presets_length","checkAudienceQueerOptions","_loop","publishedFilter","tags","hasUndecidedChangesets","isInPresets","startsWith","bool","matchesAudienceQueer","isInAgeRange","min_age","max_age","parsedMin","parseFloat","parsedMax","viewport","mapCenter","mapZoom","set","dispatchEvent","Event","animate","_this$props","onFiltersChanged","mapIsResizing","pointerEvents","minHeight","borderRadius","marginBottom","ZoomInIcon","ZoomOutIcon","target","rel","href","src","mapbox_logo_darkmode","mapbox_logo_lightmode","alt","classes","mapbox_logo","Suspense","fallback","renderLazyLoader","onLoad","withConicGradient","forwardRef","ConicGradientProps","Main","SearchBar","Sidebar","MainDrawerContent","defaultTheme","createMuiTheme","primary","secondary","action","active","paper","tonalOffset","HandlePath","docID","onPathChanged","App","searchBarValue","prefersDarkMode","isMainDrawerOpen","setSearchBarValue","setSidebarIsOpen","setTheme","check_color_scheme","check_small_screen","dontFilterTheseIds","closeMainDrawer","toggleMainDrawer","closeSidebar","matchMedia","matcher_color_scheme","addListener","matcher_small_screen","removeListener","background_paper","background_default","secondary_main","error_main","typography","fontFamily","h1","fontSize","fontWeight","letterSpacing","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","button","caption","overline","shape","transitions","complex","enteringScreen","leavingScreen","short","shorter","shortest","standard","easing","easeIn","easeInOut","easeOut","sharp","overrides","MuiInputLabel","textOverflow","overflow","whiteSpace","MuiLink","root","MuiFab","backgroundColor","getContrastText","transition","opacity","matches","componentName","functionsObject","_this$functions$Main$","_this$functions$Main$2","_this$functions$Main$3","newFilters","pathVars","_closeSidebar","ThemeProvider","StylesProvider","injectFirst","Router","path","Drawer","open","onClose","MenuIcon","display","CloseIcon","onSetSidebarIsOpen","onSetSearchBarValue","onDontFilterTheseIds","onSetView","onFlyTo","onGetZoom","_len","attr","_key","saveFunctions","ReactDOM","render","GlobalsProvider","getElementById","LocalizedOriginal","br","children","Inner","l10n","useContext","FluentContext","args","_supportedLocales_","fetchMessages","_x","_fetchMessages","_callee2","locale","response","messages","_context2","text","FluentResource","getDefaultBundles","bundle","FluentBundle","addResource","ReactLocalization","createMessagesGenerator","_x2","_createMessagesGenerator","_callee3","currentLocales","fetched","_context4","all","cur","generateBundles","_context3","AppLocalizationProvider","bundles","_componentDidMount","negotiateLanguages","defaultLocale","LocalizationProvider","privacy_level_keys","essentials","tracking","storage_functions","privacy_level_key","setPrivacy","getPrivacy","isDevEnvironment","local_ip","getCookie","match","cookie","RegExp","_getInitialGlobalState","cache","globalState","__session","InMemoryCache","persistCache","storage","localStorage","ApolloClient","link","HttpLink","credentials","headers","uri","query_whoami","whoami","finally","globalStateFinishedLoading","GlobalsContext","createContext","pageOpenTS","cookieOptions","maxAge","domain","secure","loadedCountries","country_by_iso_a2","country_by_iso_a3","saved_country_callbacks","loadCountries","getCountryByAlpha2","getCountryByAlpha3","convert_alpha3_to_alpha2","convert_alpha2_to_alpha3","getCountryByCode","getInitialGlobalState","saved_country_callback","query_countries","wantedTags","countries","country_key_a2","toUpperCase","country_key_a3","alpha2","alpha3","countryDoc","iso_a3","Provider","ComponentWrapped","withLocalStorage","addressFormats","address_formats","item","format","uuidv4","replace","crypto","getRandomValues","Uint8Array","toString","texts","texts_array","isArray","text_object","attrs","colorsByPreset_sorted","addAddressFormatDefaults","addressFormat","widths","housenumber","street","unit","city","postcode","getAddressFormatDefault","countryCodes","getAddressFormatByCountryCode","countryCode","showAllFields","addressFormat2return","alreadInUseKeys","_step6","keys2add","_iterator6","getAddressFormatByTags","addr_keys","_step7","lastMatchCount","lastAddressFormat","_iterator7","_loop2","thisMatchCount","getAddressFormatBySubkeys","split","alpha3code","TR","ilga_dataset","legality_key","gender_key","criminalisation","description","penalty","_step8","penalty_keys","_iterator8","years","protection","_step9","protection_keys","_iterator9","recognition","_step10","recognition_keys","_iterator10","getStatusNumber","ISO_A3","ISO_A3_EH","ADM0_A3","gql","_templateObject","_taggedTemplateLiteral","_templateObject2","place","_templateObject3","_templateObject4","_templateObject5","search","_templateObject6","questions","_templateObject7","countrycode","_templateObject8","addChangeset","_templateObject9","addEdge","_templateObject10","_templateObject11","_templateObject12","_templateObject13","undecidedTags","_templateObject14","recompile","_templateObject15","_templateObject16"],"mappings":"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","file":"static/js/main.0c006fdb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapbox_logo\":\"MainMapMapbox_mapbox_logo__2n7ow\"};","module.exports = __webpack_public_path__ + \"static/media/mapbox-logo-black.bd026264.svg\";","module.exports = __webpack_public_path__ + \"static/media/mapbox-logo-white.a77f8ced.svg\";","var map = {\n\t\"./ar.ftl\": [\n\t\t204,\n\t\t13\n\t],\n\t\"./de.ftl\": [\n\t\t205,\n\t\t14\n\t],\n\t\"./en.ftl\": [\n\t\t206,\n\t\t15\n\t],\n\t\"./en_GB.ftl\": [\n\t\t207,\n\t\t16\n\t],\n\t\"./en_US.ftl\": [\n\t\t208,\n\t\t17\n\t],\n\t\"./es.ftl\": [\n\t\t209,\n\t\t18\n\t],\n\t\"./fil.ftl\": [\n\t\t210,\n\t\t19\n\t],\n\t\"./fr.ftl\": [\n\t\t211,\n\t\t20\n\t],\n\t\"./it.ftl\": [\n\t\t212,\n\t\t21\n\t],\n\t\"./ja.ftl\": [\n\t\t213,\n\t\t22\n\t],\n\t\"./ko.ftl\": [\n\t\t214,\n\t\t23\n\t],\n\t\"./pt.ftl\": [\n\t\t215,\n\t\t24\n\t],\n\t\"./ru.ftl\": [\n\t\t216,\n\t\t25\n\t],\n\t\"./vi.ftl\": [\n\t\t217,\n\t\t26\n\t],\n\t\"./zh-Hans.ftl\": [\n\t\t218,\n\t\t27\n\t],\n\t\"./zh-Hant.ftl\": [\n\t\t219,\n\t\t28\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 173;\nmodule.exports = webpackAsyncContext;","import React, { useState, useEffect, useRef, useCallback } from 'react'\n\nfunction useInterval(callback, delay) {\n\t// source: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\n  const savedCallback = useRef()\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n\nfunction useConicGradient() {\n\tconst waitingForConicGradient = useRef([])\n\tconst [isRunning, setIsRunning] = useState(false)\n\tconst [conicGradientExists, setConicGradientExists] = useState(false)\n\n\tconst onReady = useCallback(function(callback){\n\t\tif (!!callback) {\n\t\t\tif (conicGradientExists) {\n\t\t\t\tcallback()\n\t\t\t}else{\n\t\t\t\twaitingForConicGradient.current.push(callback)\n\t\t\t}\n\t\t}\n\t}, [conicGradientExists])\n\n\tconst getConicGradient = useCallback(function(){\n\t\tif (conicGradientExists) {\n\t\t\treturn window.ConicGradient\n\t\t}else{\n\t\t\treturn null\n\t\t}\n\t}, [conicGradientExists])\n\n\tuseEffect(function(){\n\t\tsetIsRunning(true)\n\t}, [])\n\n\tuseInterval(function(){\n\t\tif (!!window.ConicGradient) {\n\t\t\tsetIsRunning(false)\n\t\t\tsetConicGradientExists(true)\n\n\t\t\tfor (const callback of waitingForConicGradient.current) {\n\t\t\t\tcallback()\n\t\t\t}\n\t\t\twaitingForConicGradient.current = []\n\t\t}\n\t}, isRunning ? 10 : null)\n\n\treturn {\n\t\tonReady,\n\t\tgetConicGradient,\n\t}\n}\n\nfunction withConicGradient(Component) {\t\n\treturn React.forwardRef(function(props, ref){\n\t\tconst ConicGradientProps = useConicGradient()\n\t\treturn <Component conic_gradient={ConicGradientProps} ref={ref} {...props} />\n\t})\n}\n\nexport { withConicGradient }\n\n\n","/* eslint-disable */\n\nimport L from 'leaflet'\n\nvar __extends = (this && this.__extends) || (function() {\n  var extendStatics = Object.setPrototypeOf ||\n    ({\n        __proto__: []\n      }\n      instanceof Array && function(d, b) {\n        d.__proto__ = b;\n      }) ||\n    function(d, b) {\n      for (var p in b)\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n  return function(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n})();\nvar PruneCluster;\n(function(PruneCluster_1) {\n  var Point = (function() {\n    function Point() {}\n    return Point;\n  }());\n  PruneCluster_1.Point = Point;\n  var ClusterObject = (function() {\n    function ClusterObject() {}\n    return ClusterObject;\n  }());\n  PruneCluster_1.ClusterObject = ClusterObject;\n  var hashCodeCounter = 1;\n  var maxHashCodeValue = Math.pow(2, 53) - 1;\n  var Marker = (function(_super) {\n    __extends(Marker, _super);\n\n    function Marker(lat, lng, data, category, weight, filtered) {\n      if (data === void 0) {\n        data = {};\n      }\n      if (weight === void 0) {\n        weight = 1;\n      }\n      if (filtered === void 0) {\n        filtered = false;\n      }\n      var _this = _super.call(this) || this;\n      _this.data = data;\n      _this.position = {\n        lat: +lat,\n        lng: +lng\n      };\n      _this.weight = weight;\n      _this.category = category;\n      _this.filtered = filtered;\n      _this.hashCode = hashCodeCounter++;\n      return _this;\n    }\n    Marker.prototype.Move = function(lat, lng) {\n      this.position.lat = +lat;\n      this.position.lng = +lng;\n    };\n    Marker.prototype.SetData = function(data) {\n      for (var key in data) {\n        this.data[key] = data[key];\n      }\n    };\n    return Marker;\n  }(ClusterObject));\n  PruneCluster_1.Marker = Marker;\n  var Cluster = (function(_super) {\n    __extends(Cluster, _super);\n\n    function Cluster(marker) {\n      var _this = _super.call(this) || this;\n      _this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      _this.data = {};\n      if (!marker) {\n        _this.hashCode = 1;\n        if (Cluster.ENABLE_MARKERS_LIST) {\n          _this._clusterMarkers = [];\n        }\n        return _this;\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        _this._clusterMarkers = [marker];\n      }\n      _this.lastMarker = marker;\n      _this.hashCode = 31 + marker.hashCode;\n      _this.population = 1;\n      if (marker.category !== undefined) {\n        _this.stats[marker.category] = 1;\n      }\n      _this.totalWeight = marker.weight;\n      _this.position = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      _this.averagePosition = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      return _this;\n    }\n    Cluster.prototype.AddMarker = function(marker) {\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers.push(marker);\n      }\n      var h = this.hashCode;\n      h = ((h << 5) - h) + marker.hashCode;\n      if (h >= maxHashCodeValue) {\n        this.hashCode = h % maxHashCodeValue;\n      } else {\n        this.hashCode = h;\n      }\n      this.lastMarker = marker;\n      var weight = marker.weight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          marker.position.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          marker.position.lng * weight) / newWeight;\n      ++this.population;\n      this.totalWeight = newWeight;\n      if (marker.category !== undefined) {\n        this.stats[marker.category] = (this.stats[marker.category] + 1) || 1;\n      }\n    };\n    Cluster.prototype.Reset = function() {\n      this.hashCode = 1;\n      this.lastMarker = undefined;\n      this.population = 0;\n      this.totalWeight = 0;\n      this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = [];\n      }\n    };\n    Cluster.prototype.ComputeBounds = function(cluster) {\n      var proj = cluster.Project(this.position.lat, this.position.lng);\n      var size = cluster.Size;\n      var nbX = Math.floor(proj.x / size),\n        nbY = Math.floor(proj.y / size),\n        startX = nbX * size,\n        startY = nbY * size;\n      var a = cluster.UnProject(startX, startY),\n        b = cluster.UnProject(startX + size, startY + size);\n      this.bounds = {\n        minLat: b.lat,\n        maxLat: a.lat,\n        minLng: a.lng,\n        maxLng: b.lng\n      };\n    };\n    Cluster.prototype.GetClusterMarkers = function() {\n      return this._clusterMarkers;\n    };\n    Cluster.prototype.ApplyCluster = function(newCluster) {\n      this.hashCode = this.hashCode * 41 + newCluster.hashCode * 43;\n      if (this.hashCode > maxHashCodeValue) {\n        this.hashCode = this.hashCode = maxHashCodeValue;\n      }\n      var weight = newCluster.totalWeight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          newCluster.averagePosition.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          newCluster.averagePosition.lng * weight) / newWeight;\n      this.population += newCluster.population;\n      this.totalWeight = newWeight;\n      this.bounds.minLat = Math.min(this.bounds.minLat, newCluster.bounds.minLat);\n      this.bounds.minLng = Math.min(this.bounds.minLng, newCluster.bounds.minLng);\n      this.bounds.maxLat = Math.max(this.bounds.maxLat, newCluster.bounds.maxLat);\n      this.bounds.maxLng = Math.max(this.bounds.maxLng, newCluster.bounds.maxLng);\n      for (var category in newCluster.stats) {\n        if (newCluster.stats.hasOwnProperty(category)) {\n          if (this.stats.hasOwnProperty(category)) {\n            this.stats[category] += newCluster.stats[category];\n          } else {\n            this.stats[category] = newCluster.stats[category];\n          }\n        }\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = this._clusterMarkers.concat(newCluster.GetClusterMarkers());\n      }\n    };\n    Cluster.ENABLE_MARKERS_LIST = false;\n    return Cluster;\n  }(ClusterObject));\n  PruneCluster_1.Cluster = Cluster;\n\n  function checkPositionInsideBounds(a, b) {\n    return (a.lat >= b.minLat && a.lat <= b.maxLat) &&\n      a.lng >= b.minLng && a.lng <= b.maxLng;\n  }\n\n  function insertionSort(list) {\n    for (var i = 1, j, tmp, tmpLng, length = list.length; i < length; ++i) {\n      tmp = list[i];\n      tmpLng = tmp.position.lng;\n      for (j = i - 1; j >= 0 && list[j].position.lng > tmpLng; --j) {\n        list[j + 1] = list[j];\n      }\n      list[j + 1] = tmp;\n    }\n  }\n\n  function shouldUseInsertionSort(total, nbChanges) {\n    if (nbChanges > 300) {\n      return false;\n    } else {\n      return (nbChanges / total) < 0.2;\n    }\n  }\n  var PruneCluster = (function() {\n    function PruneCluster() {\n      this._markers = [];\n      this._nbChanges = 0;\n      this._clusters = [];\n      this.Size = 166;\n      this.ViewPadding = 0.2;\n    }\n    PruneCluster.prototype.RegisterMarker = function(marker) {\n      if (marker._removeFlag) {\n        delete marker._removeFlag;\n      }\n      this._markers.push(marker);\n      this._nbChanges += 1;\n    };\n    PruneCluster.prototype.RegisterMarkers = function(markers) {\n      var _this = this;\n      markers.forEach(function(marker) {\n        _this.RegisterMarker(marker);\n      });\n    };\n    PruneCluster.prototype._sortMarkers = function() {\n      var markers = this._markers,\n        length = markers.length;\n      if (this._nbChanges && !shouldUseInsertionSort(length, this._nbChanges)) {\n        this._markers.sort(function(a, b) {\n          return a.position.lng - b.position.lng;\n        });\n      } else {\n        insertionSort(markers);\n      }\n      this._nbChanges = 0;\n    };\n    PruneCluster.prototype._sortClusters = function() {\n      insertionSort(this._clusters);\n    };\n    PruneCluster.prototype._indexLowerBoundLng = function(lng) {\n      var markers = this._markers,\n        it, step, first = 0,\n        count = markers.length;\n      while (count > 0) {\n        step = Math.floor(count / 2);\n        it = first + step;\n        if (markers[it].position.lng < lng) {\n          first = ++it;\n          count -= step + 1;\n        } else {\n          count = step;\n        }\n      }\n      return first;\n    };\n    PruneCluster.prototype._resetClusterViews = function() {\n      for (var i = 0, l = this._clusters.length; i < l; ++i) {\n        var cluster = this._clusters[i];\n        cluster.Reset();\n        cluster.ComputeBounds(this);\n      }\n    };\n    PruneCluster.prototype.ProcessView = function(bounds) {\n      var heightBuffer = Math.abs(bounds.maxLat - bounds.minLat) * this.ViewPadding,\n        widthBuffer = Math.abs(bounds.maxLng - bounds.minLng) * this.ViewPadding;\n      var extendedBounds = {\n        minLat: bounds.minLat - heightBuffer - heightBuffer,\n        maxLat: bounds.maxLat + heightBuffer + heightBuffer,\n        minLng: bounds.minLng - widthBuffer - widthBuffer,\n        maxLng: bounds.maxLng + widthBuffer + widthBuffer\n      };\n      this._sortMarkers();\n      this._resetClusterViews();\n      var firstIndex = this._indexLowerBoundLng(extendedBounds.minLng);\n      var markers = this._markers,\n        clusters = this._clusters;\n      var workingClusterList = clusters.slice(0);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var marker = markers[i],\n          markerPosition = marker.position;\n        if (markerPosition.lng > extendedBounds.maxLng) {\n          break;\n        }\n        if (markerPosition.lat > extendedBounds.minLat &&\n          markerPosition.lat < extendedBounds.maxLat &&\n          !marker.filtered) {\n          var clusterFound = false,\n            cluster;\n          for (var j = 0, ll = workingClusterList.length; j < ll; ++j) {\n            cluster = workingClusterList[j];\n            if (cluster.bounds.maxLng < marker.position.lng) {\n              workingClusterList.splice(j, 1);\n              --j;\n              --ll;\n              continue;\n            }\n            if (checkPositionInsideBounds(markerPosition, cluster.bounds)) {\n              cluster.AddMarker(marker);\n              clusterFound = true;\n              break;\n            }\n          }\n          if (!clusterFound) {\n            cluster = new Cluster(marker);\n            cluster.ComputeBounds(this);\n            clusters.push(cluster);\n            workingClusterList.push(cluster);\n          }\n        }\n      }\n      var newClustersList = [];\n      for (i = 0, l = clusters.length; i < l; ++i) {\n        cluster = clusters[i];\n        if (cluster.population > 0) {\n          newClustersList.push(cluster);\n        }\n      }\n      this._clusters = newClustersList;\n      this._sortClusters();\n      return this._clusters;\n    };\n    PruneCluster.prototype.RemoveMarkers = function(markers) {\n      if (!markers) {\n        this._markers = [];\n        return;\n      }\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        markers[i]._removeFlag = true;\n      }\n      var newMarkersList = [];\n      for (i = 0, l = this._markers.length; i < l; ++i) {\n        if (!this._markers[i]._removeFlag) {\n          newMarkersList.push(this._markers[i]);\n        } else {\n          delete this._markers[i]._removeFlag;\n        }\n      }\n      this._markers = newMarkersList;\n    };\n    PruneCluster.prototype.FindMarkersInArea = function(area) {\n      var aMinLat = area.minLat,\n        aMaxLat = area.maxLat,\n        aMinLng = area.minLng,\n        aMaxLng = area.maxLng,\n        markers = this._markers,\n        result = [];\n      var firstIndex = this._indexLowerBoundLng(aMinLng);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var pos = markers[i].position;\n        if (pos.lng > aMaxLng) {\n          break;\n        }\n        if (pos.lat >= aMinLat && pos.lat <= aMaxLat &&\n          pos.lng >= aMinLng) {\n          result.push(markers[i]);\n        }\n      }\n      return result;\n    };\n    PruneCluster.prototype.ComputeBounds = function(markers, withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      if (!markers || !markers.length) {\n        return null;\n      }\n      var rMinLat = Number.MAX_VALUE,\n        rMaxLat = -Number.MAX_VALUE,\n        rMinLng = Number.MAX_VALUE,\n        rMaxLng = -Number.MAX_VALUE;\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        if (!withFiltered && markers[i].filtered) {\n          continue;\n        }\n        var pos = markers[i].position;\n        if (pos.lat < rMinLat)\n          rMinLat = pos.lat;\n        if (pos.lat > rMaxLat)\n          rMaxLat = pos.lat;\n        if (pos.lng < rMinLng)\n          rMinLng = pos.lng;\n        if (pos.lng > rMaxLng)\n          rMaxLng = pos.lng;\n      }\n      return {\n        minLat: rMinLat,\n        maxLat: rMaxLat,\n        minLng: rMinLng,\n        maxLng: rMaxLng\n      };\n    };\n    PruneCluster.prototype.FindMarkersBoundsInArea = function(area) {\n      return this.ComputeBounds(this.FindMarkersInArea(area));\n    };\n    PruneCluster.prototype.ComputeGlobalBounds = function(withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      return this.ComputeBounds(this._markers, withFiltered);\n    };\n    PruneCluster.prototype.GetMarkers = function() {\n      return this._markers;\n    };\n    PruneCluster.prototype.GetPopulation = function() {\n      return this._markers.length;\n    };\n    PruneCluster.prototype.ResetClusters = function() {\n      this._clusters = [];\n    };\n    return PruneCluster;\n  }());\n  PruneCluster_1.PruneCluster = PruneCluster;\n})(PruneCluster || (PruneCluster = {}));\nexport var PruneCluster;\n(function(PruneCluster) {})(PruneCluster || (PruneCluster = {}));\nexport var PruneClusterForLeaflet = (L.Layer ? L.Layer : L.Class).extend({\n  initialize: function(size, clusterMargin) {\n    var _this = this;\n    if (size === void 0) {\n      size = 120;\n    }\n    if (clusterMargin === void 0) {\n      clusterMargin = 20;\n    }\n    this.Cluster = new PruneCluster.PruneCluster();\n    this.Cluster.Size = size;\n    this.clusterMargin = Math.min(clusterMargin, size / 4);\n    this.Cluster.Project = function(lat, lng) {\n      return _this._map.project(new L.LatLng(lat, lng), Math.floor(_this._map.getZoom()));\n    };\n    this.Cluster.UnProject = function(x, y) {\n      return _this._map.unproject(new L.Point(x, y), Math.floor(_this._map.getZoom()));\n    };\n    this._objectsOnMap = [];\n    this.spiderfier = new PruneClusterLeafletSpiderfier(this);\n    this._hardMove = false;\n    this._resetIcons = false;\n    this._removeTimeoutId = 0;\n    this._markersRemoveListTimeout = [];\n  },\n  RegisterMarker: function(marker) {\n    this.Cluster.RegisterMarker(marker);\n  },\n  RegisterMarkers: function(markers) {\n    this.Cluster.RegisterMarkers(markers);\n  },\n  RemoveMarkers: function(markers) {\n    this.Cluster.RemoveMarkers(markers);\n  },\n  BuildLeafletCluster: function(cluster, position) {\n    var _this = this;\n    var m = new L.Marker(position, {\n      icon: this.BuildLeafletClusterIcon(cluster)\n    });\n    m._leafletClusterBounds = cluster.bounds;\n    m.on('click', function() {\n      var cbounds = m._leafletClusterBounds;\n      var markersArea = _this.Cluster.FindMarkersInArea(cbounds);\n      var b = _this.Cluster.ComputeBounds(markersArea);\n      if (b) {\n        var bounds = new L.LatLngBounds(new L.LatLng(b.minLat, b.maxLng), new L.LatLng(b.maxLat, b.minLng));\n        var zoomLevelBefore = _this._map.getZoom(),\n          zoomLevelAfter = _this._map.getBoundsZoom(bounds, false, new L.Point(20, 20));\n        if (zoomLevelAfter === zoomLevelBefore) {\n          var filteredBounds = [];\n          for (var i = 0, l = _this._objectsOnMap.length; i < l; ++i) {\n            var o = _this._objectsOnMap[i];\n            if (o.data._leafletMarker !== m) {\n              if (o.bounds.minLat >= cbounds.minLat &&\n                o.bounds.maxLat <= cbounds.maxLat &&\n                o.bounds.minLng >= cbounds.minLng &&\n                o.bounds.maxLng <= cbounds.maxLng) {\n                filteredBounds.push(o.bounds);\n              }\n            }\n          }\n          if (filteredBounds.length > 0) {\n            var newMarkersArea = [];\n            var ll = filteredBounds.length;\n            for (i = 0, l = markersArea.length; i < l; ++i) {\n              var markerPos = markersArea[i].position;\n              var isFiltered = false;\n              for (var j = 0; j < ll; ++j) {\n                var currentFilteredBounds = filteredBounds[j];\n                if (markerPos.lat >= currentFilteredBounds.minLat &&\n                  markerPos.lat <= currentFilteredBounds.maxLat &&\n                  markerPos.lng >= currentFilteredBounds.minLng &&\n                  markerPos.lng <= currentFilteredBounds.maxLng) {\n                  isFiltered = true;\n                  break;\n                }\n              }\n              if (!isFiltered) {\n                newMarkersArea.push(markersArea[i]);\n              }\n            }\n            markersArea = newMarkersArea;\n          }\n          if (markersArea.length < 200 || zoomLevelAfter >= _this._map.getMaxZoom()) {\n            _this._map.fire('overlappingmarkers', {\n              cluster: _this,\n              markers: markersArea,\n              center: m.getLatLng(),\n              marker: m\n            });\n          } else {\n            zoomLevelAfter++;\n          }\n          _this._map.setView(m.getLatLng(), zoomLevelAfter);\n        } else {\n          _this._map.fitBounds(bounds);\n        }\n      }\n    });\n    return m;\n  },\n  BuildLeafletClusterIcon: function(cluster) {\n    var c = 'prunecluster prunecluster-';\n    var iconSize = 38;\n    var maxPopulation = this.Cluster.GetPopulation();\n    if (cluster.population < Math.max(10, maxPopulation * 0.01)) {\n      c += 'small';\n    } else if (cluster.population < Math.max(100, maxPopulation * 0.05)) {\n      c += 'medium';\n      iconSize = 40;\n    } else {\n      c += 'large';\n      iconSize = 44;\n    }\n    return new L.DivIcon({\n      html: \"<div><span>\" + cluster.population + \"</span></div>\",\n      className: c,\n      iconSize: L.point(iconSize, iconSize)\n    });\n  },\n  BuildLeafletMarker: function(marker, position) {\n    var m = new L.Marker(position);\n    this.PrepareLeafletMarker(m, marker.data, marker.category);\n    return m;\n  },\n  PrepareLeafletMarker: function(marker, data, category) {\n    if (data.icon) {\n      if (typeof data.icon === 'function') {\n        marker.setIcon(data.icon(data, category));\n      } else {\n        marker.setIcon(data.icon);\n      }\n    }\n    if (data.popup) {\n      var content = typeof data.popup === 'function' ? data.popup(data, category) : data.popup;\n      if (marker.getPopup()) {\n        marker.setPopupContent(content, data.popupOptions);\n      } else {\n        marker.bindPopup(content, data.popupOptions);\n      }\n    }\n  },\n  onAdd: function(map) {\n    this._map = map;\n    map.on('movestart', this._moveStart, this);\n    map.on('moveend', this._moveEnd, this);\n    map.on('zoomend', this._zoomStart, this);\n    map.on('zoomend', this._zoomEnd, this);\n    this.ProcessView();\n    map.addLayer(this.spiderfier);\n  },\n  onRemove: function(map) {\n    map.off('movestart', this._moveStart, this);\n    map.off('moveend', this._moveEnd, this);\n    map.off('zoomend', this._zoomStart, this);\n    map.off('zoomend', this._zoomEnd, this);\n    for (var i = 0, l = this._objectsOnMap.length; i < l; ++i) {\n      map.removeLayer(this._objectsOnMap[i].data._leafletMarker);\n    }\n    this._objectsOnMap = [];\n    this.Cluster.ResetClusters();\n    map.removeLayer(this.spiderfier);\n    this._map = null;\n  },\n  _moveStart: function() {\n    this._moveInProgress = true;\n  },\n  _moveEnd: function(e) {\n    this._moveInProgress = false;\n    this._hardMove = e.hard;\n    this.ProcessView();\n  },\n  _zoomStart: function() {\n    this._zoomInProgress = true;\n  },\n  _zoomEnd: function() {\n    this._zoomInProgress = false;\n    this.ProcessView();\n  },\n  ProcessView: function() {\n    var _this = this;\n    if (!this._map || this._zoomInProgress || this._moveInProgress) {\n      return;\n    }\n    var map = this._map,\n      bounds = map.getBounds(),\n      zoom = Math.floor(map.getZoom()),\n      marginRatio = this.clusterMargin / this.Cluster.Size,\n      resetIcons = this._resetIcons;\n    var southWest = bounds.getSouthWest(),\n      northEast = bounds.getNorthEast();\n    var clusters = this.Cluster.ProcessView({\n      minLat: southWest.lat,\n      minLng: southWest.lng,\n      maxLat: northEast.lat,\n      maxLng: northEast.lng\n    });\n    var objectsOnMap = this._objectsOnMap,\n      newObjectsOnMap = [],\n      markersOnMap = new Array(objectsOnMap.length);\n    for (var i = 0, l = objectsOnMap.length; i < l; ++i) {\n      var marker = objectsOnMap[i].data._leafletMarker;\n      markersOnMap[i] = marker;\n      marker._removeFromMap = true;\n    }\n    var clusterCreationList = [];\n    var clusterCreationListPopOne = [];\n    var opacityUpdateList = [];\n    var workingList = [];\n    for (i = 0, l = clusters.length; i < l; ++i) {\n      var icluster = clusters[i],\n        iclusterData = icluster.data;\n      var latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n        lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n      for (var j = 0, ll = workingList.length; j < ll; ++j) {\n        var c = workingList[j];\n        if (c.bounds.maxLng < icluster.bounds.minLng) {\n          workingList.splice(j, 1);\n          --j;\n          --ll;\n          continue;\n        }\n        var oldMaxLng = c.averagePosition.lng + lngMargin,\n          oldMinLat = c.averagePosition.lat - latMargin,\n          oldMaxLat = c.averagePosition.lat + latMargin,\n          newMinLng = icluster.averagePosition.lng - lngMargin,\n          newMinLat = icluster.averagePosition.lat - latMargin,\n          newMaxLat = icluster.averagePosition.lat + latMargin;\n        if (oldMaxLng > newMinLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat) {\n          iclusterData._leafletCollision = true;\n          c.ApplyCluster(icluster);\n          break;\n        }\n      }\n      if (!iclusterData._leafletCollision) {\n        workingList.push(icluster);\n      }\n    }\n    clusters.forEach(function(cluster) {\n      var m = undefined;\n      var data = cluster.data;\n      if (data._leafletCollision) {\n        data._leafletCollision = false;\n        data._leafletOldPopulation = 0;\n        data._leafletOldHashCode = 0;\n        return;\n      }\n      var position = new L.LatLng(cluster.averagePosition.lat, cluster.averagePosition.lng);\n      var oldMarker = data._leafletMarker;\n      if (oldMarker) {\n        if (cluster.population === 1 && data._leafletOldPopulation === 1 && cluster.hashCode === oldMarker._hashCode) {\n          if (resetIcons || oldMarker._zoomLevel !== zoom || cluster.lastMarker.data.forceIconRedraw) {\n            _this.PrepareLeafletMarker(oldMarker, cluster.lastMarker.data, cluster.lastMarker.category);\n            if (cluster.lastMarker.data.forceIconRedraw) {\n              cluster.lastMarker.data.forceIconRedraw = false;\n            }\n          }\n          oldMarker.setLatLng(position);\n          m = oldMarker;\n        } else if (cluster.population > 1 && data._leafletOldPopulation > 1 && (oldMarker._zoomLevel === zoom ||\n            data._leafletPosition.equals(position))) {\n          oldMarker.setLatLng(position);\n          if (resetIcons || cluster.population != data._leafletOldPopulation ||\n            cluster.hashCode !== data._leafletOldHashCode) {\n            var boundsCopy = {};\n            L.Util.extend(boundsCopy, cluster.bounds);\n            oldMarker._leafletClusterBounds = boundsCopy;\n            oldMarker.setIcon(_this.BuildLeafletClusterIcon(cluster));\n          }\n          data._leafletOldPopulation = cluster.population;\n          data._leafletOldHashCode = cluster.hashCode;\n          m = oldMarker;\n        }\n      }\n      if (!m) {\n        if (cluster.population === 1) {\n          clusterCreationListPopOne.push(cluster);\n        } else {\n          clusterCreationList.push(cluster);\n        }\n        data._leafletPosition = position;\n        data._leafletOldPopulation = cluster.population;\n        data._leafletOldHashCode = cluster.hashCode;\n      } else {\n        m._removeFromMap = false;\n        newObjectsOnMap.push(cluster);\n        m._zoomLevel = zoom;\n        m._hashCode = cluster.hashCode;\n        m._population = cluster.population;\n        data._leafletMarker = m;\n        data._leafletPosition = position;\n      }\n    });\n    clusterCreationList = clusterCreationListPopOne.concat(clusterCreationList);\n    for (i = 0, l = objectsOnMap.length; i < l; ++i) {\n      icluster = objectsOnMap[i];\n      var idata = icluster.data;\n      marker = idata._leafletMarker;\n      if (idata._leafletMarker._removeFromMap) {\n        var remove = true;\n        if (marker._zoomLevel === zoom) {\n          var pa = icluster.averagePosition;\n          latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n            lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n          for (j = 0, ll = clusterCreationList.length; j < ll; ++j) {\n            var jcluster = clusterCreationList[j],\n              jdata = jcluster.data;\n            if (marker._population === 1 && jcluster.population === 1 &&\n              marker._hashCode === jcluster.hashCode) {\n              if (resetIcons || jcluster.lastMarker.data.forceIconRedraw) {\n                this.PrepareLeafletMarker(marker, jcluster.lastMarker.data, jcluster.lastMarker.category);\n                if (jcluster.lastMarker.data.forceIconRedraw) {\n                  jcluster.lastMarker.data.forceIconRedraw = false;\n                }\n              }\n              marker.setLatLng(jdata._leafletPosition);\n              remove = false;\n            } else {\n              var pb = jcluster.averagePosition;\n              var oldMinLng = pa.lng - lngMargin,\n                newMaxLng = pb.lng + lngMargin;\n              oldMaxLng = pa.lng + lngMargin;\n              oldMinLat = pa.lat - latMargin;\n              oldMaxLat = pa.lat + latMargin;\n              newMinLng = pb.lng - lngMargin;\n              newMinLat = pb.lat - latMargin;\n              newMaxLat = pb.lat + latMargin;\n              if ((marker._population > 1 && jcluster.population > 1) &&\n                (oldMaxLng > newMinLng && oldMinLng < newMaxLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat)) {\n                marker.setLatLng(jdata._leafletPosition);\n                marker.setIcon(this.BuildLeafletClusterIcon(jcluster));\n                var poisson = {};\n                L.Util.extend(poisson, jcluster.bounds);\n                marker._leafletClusterBounds = poisson;\n                jdata._leafletOldPopulation = jcluster.population;\n                jdata._leafletOldHashCode = jcluster.hashCode;\n                marker._population = jcluster.population;\n                remove = false;\n              }\n            }\n            if (!remove) {\n              jdata._leafletMarker = marker;\n              marker._removeFromMap = false;\n              newObjectsOnMap.push(jcluster);\n              clusterCreationList.splice(j, 1);\n              --j;\n              --ll;\n              break;\n            }\n          }\n        }\n        if (remove) {\n          if (!marker._removeFromMap)\n            console.error(\"wtf\");\n        }\n      }\n    }\n    for (i = 0, l = clusterCreationList.length; i < l; ++i) {\n      icluster = clusterCreationList[i],\n        idata = icluster.data;\n      var iposition = idata._leafletPosition;\n      var creationMarker;\n      if (icluster.population === 1) {\n        creationMarker = this.BuildLeafletMarker(icluster.lastMarker, iposition);\n      } else {\n        creationMarker = this.BuildLeafletCluster(icluster, iposition);\n      }\n      creationMarker.addTo(map);\n      creationMarker.setOpacity(0);\n      opacityUpdateList.push(creationMarker);\n      idata._leafletMarker = creationMarker;\n      creationMarker._zoomLevel = zoom;\n      creationMarker._hashCode = icluster.hashCode;\n      creationMarker._population = icluster.population;\n      newObjectsOnMap.push(icluster);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = opacityUpdateList.length; i < l; ++i) {\n        var m = opacityUpdateList[i];\n        if (m._icon)\n          L.DomUtil.addClass(m._icon, \"prunecluster-anim\");\n        if (m._shadow)\n          L.DomUtil.addClass(m._shadow, \"prunecluster-anim\");\n        m.setOpacity(1);\n      }\n    }, 1);\n    if (this._hardMove) {\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          map.removeLayer(marker);\n        }\n      }\n    } else {\n      if (this._removeTimeoutId !== 0) {\n        window.clearTimeout(this._removeTimeoutId);\n        for (i = 0, l = this._markersRemoveListTimeout.length; i < l; ++i) {\n          map.removeLayer(this._markersRemoveListTimeout[i]);\n        }\n      }\n      var toRemove = [];\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          marker.setOpacity(0);\n          toRemove.push(marker);\n        }\n      }\n      if (toRemove.length > 0) {\n        this._removeTimeoutId = window.setTimeout(function() {\n          for (i = 0, l = toRemove.length; i < l; ++i) {\n            map.removeLayer(toRemove[i]);\n          }\n          _this._removeTimeoutId = 0;\n        }, 300);\n      }\n      this._markersRemoveListTimeout = toRemove;\n    }\n    this._objectsOnMap = newObjectsOnMap;\n    this._hardMove = false;\n    this._resetIcons = false;\n  },\n  FitBounds: function(withFiltered) {\n    if (withFiltered === void 0) {\n      withFiltered = true;\n    }\n    var bounds = this.Cluster.ComputeGlobalBounds(withFiltered);\n    if (bounds) {\n      this._map.fitBounds(new L.LatLngBounds(new L.LatLng(bounds.minLat, bounds.maxLng), new L.LatLng(bounds.maxLat, bounds.minLng)));\n    }\n  },\n  GetMarkers: function() {\n    return this.Cluster.GetMarkers();\n  },\n  RedrawIcons: function(processView) {\n    if (processView === void 0) {\n      processView = true;\n    }\n    this._resetIcons = true;\n    if (processView) {\n      this.ProcessView();\n    }\n  }\n});\nexport var PruneClusterLeafletSpiderfier = (L.Layer ? L.Layer : L.Class).extend({\n  _2PI: Math.PI * 2,\n  _circleFootSeparation: 25,\n  _circleStartAngle: Math.PI / 6,\n  _spiralFootSeparation: 28,\n  _spiralLengthStart: 11,\n  _spiralLengthFactor: 5,\n  _spiralCountTrigger: 8,\n  spiderfyDistanceMultiplier: 1,\n  initialize: function(cluster) {\n    this._cluster = cluster;\n    this._currentMarkers = [];\n    this._multiLines = !!L.multiPolyline;\n    this._lines = this._multiLines ?\n      L.multiPolyline([], {\n        weight: 1.5,\n        color: '#222'\n      }) :\n      L.polyline([], {\n        weight: 1.5,\n        color: '#222'\n      });\n  },\n  onAdd: function(map) {\n    this._map = map;\n    this._map.on('overlappingmarkers', this.Spiderfy, this);\n    this._map.on('click', this.Unspiderfy, this);\n    this._map.on('zoomend', this.Unspiderfy, this);\n  },\n  Spiderfy: function(data) {\n    var _this = this;\n    if (data.cluster !== this._cluster) {\n      return;\n    }\n    this.Unspiderfy();\n    var markers = data.markers.filter(function(marker) {\n      return !marker.filtered;\n    });\n    this._currentCenter = data.center;\n    var centerPoint = this._map.latLngToLayerPoint(data.center);\n    var points;\n    if (markers.length >= this._spiralCountTrigger) {\n      points = this._generatePointsSpiral(markers.length, centerPoint);\n    } else {\n      if (this._multiLines) {\n        centerPoint.y += 10;\n      }\n      points = this._generatePointsCircle(markers.length, centerPoint);\n    }\n    var polylines = [];\n    var leafletMarkers = [];\n    var projectedPoints = [];\n    for (var i = 0, l = points.length; i < l; ++i) {\n      var pos = this._map.layerPointToLatLng(points[i]);\n      var m = this._cluster.BuildLeafletMarker(markers[i], data.center);\n      m.setZIndexOffset(5000);\n      m.setOpacity(0);\n      this._currentMarkers.push(m);\n      this._map.addLayer(m);\n      leafletMarkers.push(m);\n      projectedPoints.push(pos);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = points.length; i < l; ++i) {\n        leafletMarkers[i].setLatLng(projectedPoints[i])\n          .setOpacity(1);\n      }\n      var startTime = +new Date();\n      var interval = 42,\n        duration = 290;\n      var anim = window.setInterval(function() {\n        polylines = [];\n        var now = +new Date();\n        var d = now - startTime;\n        if (d >= duration) {\n          window.clearInterval(anim);\n          stepRatio = 1.0;\n        } else {\n          var stepRatio = d / duration;\n        }\n        var center = data.center;\n        for (i = 0, l = points.length; i < l; ++i) {\n          var p = projectedPoints[i],\n            diffLat = p.lat - center.lat,\n            diffLng = p.lng - center.lng;\n          polylines.push([center, new L.LatLng(center.lat + diffLat * stepRatio, center.lng + diffLng * stepRatio)]);\n        }\n        _this._lines.setLatLngs(polylines);\n      }, interval);\n    }, 1);\n    this._lines.setLatLngs(polylines);\n    this._map.addLayer(this._lines);\n    if (data.marker) {\n      this._clusterMarker = data.marker.setOpacity(0.3);\n    }\n  },\n  _generatePointsCircle: function(count, centerPt) {\n    var circumference = this.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n      legLength = circumference / this._2PI,\n      angleStep = this._2PI / count,\n      res = [],\n      i, angle;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle = this._circleStartAngle + i * angleStep;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n    }\n    return res;\n  },\n  _generatePointsSpiral: function(count, centerPt) {\n    var legLength = this.spiderfyDistanceMultiplier * this._spiralLengthStart,\n      separation = this.spiderfyDistanceMultiplier * this._spiralFootSeparation,\n      lengthFactor = this.spiderfyDistanceMultiplier * this._spiralLengthFactor,\n      angle = 0,\n      res = [],\n      i;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle += separation / legLength + i * 0.0005;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n      legLength += this._2PI * lengthFactor / angle;\n    }\n    return res;\n  },\n  Unspiderfy: function() {\n    var _this = this;\n    for (var i = 0, l = this._currentMarkers.length; i < l; ++i) {\n      this._currentMarkers[i].setLatLng(this._currentCenter).setOpacity(0);\n    }\n    var markers = this._currentMarkers;\n    window.setTimeout(function() {\n      for (i = 0, l = markers.length; i < l; ++i) {\n        _this._map.removeLayer(markers[i]);\n      }\n    }, 300);\n    this._currentMarkers = [];\n    this._map.removeLayer(this._lines);\n    if (this._clusterMarker) {\n      this._clusterMarker.setOpacity(1);\n    }\n  },\n  onRemove: function(map) {\n    this.Unspiderfy();\n    map.off('overlappingmarkers', this.Spiderfy, this);\n    map.off('click', this.Unspiderfy, this);\n    map.off('zoomend', this.Unspiderfy, this);\n  }\n});\n\n\n// export PruneClusterForLeaflet\n\nexport default PruneCluster\n","import React from 'react'\nimport './index.css'\n\nimport { Localized, withLocalization } from '../Localized/'\n\nimport {\n\tFab,\n\tMenu,\n\tMenuItem,\n} from '@material-ui/core'\n\nimport {\n\tCheckCircleRounded as CheckIcon,\n\tArrowDropDownRounded as ArrowDropDownIcon,\n} from '@material-ui/icons'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport PopupState, { bindTrigger, bindMenu } from 'material-ui-popup-state'\n\nimport { getTranslation } from '../../functions.js'\nimport _categories_ from '../../data/dist/categories.json'\n\nimport { withGlobals } from '../Globals/'\n\n// TODO: Add a filter for \"For any or all audience groups.\" (Trans, BPOC, Gay-Women, ...)\n\nclass FiltersPanelContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tcategory: null,\n\t\t\tage: null,\n\t\t\taudience_queer: new Set(['only','primary','welcome']), // only primary welcome\n\t\t\tmustHaveUndecidedChangeset: false,\n\t\t\tpublished: true,\n\t\t}\n\n\t\tthis.categories = _categories_.map(category => ({\n\t\t\t...category,\n\t\t\tname_translated: getTranslation(category.name, this.props.globals.userLocales),\n\t\t}))\n\n\t\tthis.audience_queer_values = [\n\t\t\t{\n\t\t\t\tkey: 'everything',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_everything',\n\t\t\t\temoji: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'only',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_only',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_only,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'primary',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_primary',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_primary,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'welcome',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_welcome',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_welcome,\n\t\t\t},\n\t\t]\n\n\t\tthis.ages = Array.apply(null, Array(15)).map((v,i)=>i+14)\n\t\tthis.highest_ages_entry = this.ages[this.ages.length-1]\n\n\t\tthis.setValue = this.setValue.bind(this)\n\t\tthis.getFilterObj = this.getFilterObj.bind(this)\n\t\tthis.toggleMustHaveUndecidedChangeset = this.toggleMustHaveUndecidedChangeset.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t}\n\t}\n\n\tgetFilterObj(){\n\n\t\t// const tags = {}\n\t\t// if (!!this.state.age) {\n\t\t// \t// gte = Matches values that are greater than or equal to a specified value. #mongodb\n\t\t// \t// lte = Matches values that are less than or equal to a specified value. #mongodb\n\n\t\t// \tif (this.state.age === this.highest_ages_entry) {\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}else{\t\t\t\t\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}\n\t\t// }\n\n\t\treturn {\n\t\t\tpresets: (!!this.state.category ? this.state.category.presets : []),\n\t\t\t\n\t\t\taudienceQueerOptions: this.state.audience_queer.has('everything') ? [] : [...this.state.audience_queer],\n\t\t\tselectedAge: this.state.age,\n\t\t\tageOption: (this.state.age === this.highest_ages_entry ? 'open_end' : ''),\n\t\t\tmustHaveUndecidedChangeset: this.state.mustHaveUndecidedChangeset,\n\t\t\tpublished: this.state.published,\n\t\t}\n\t}\n\n\tsetValue(stateKeyName, value, closeMenuCallback){\n\t\tthis.setState({[stateKeyName]: (\n\t\t\t!!value || value === false\n\t\t\t? value\n\t\t\t: null\n\t\t)}, ()=>{\n\t\t\tif (typeof closeMenuCallback === 'function') {\n\t\t\t\tcloseMenuCallback()\n\t\t\t}\n\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\ttoogleAudienceQueer(audienceKey){\n\t\tthis.setState((state, props) => {\n\t\t\tlet audience_queer = state.audience_queer\n\n\t\t\tif (audienceKey === 'everything') {\n\t\t\t\tif (audience_queer.size === 0) {\n\t\t\t\t\taudience_queer = new Set(['only','primary','welcome'])\n\t\t\t\t}else{\n\t\t\t\t\taudience_queer = new Set()\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (audience_queer.has(audienceKey)) {\n\t\t\t\t\taudience_queer.delete(audienceKey)\n\t\t\t\t}else{\n\t\t\t\t\taudience_queer.add(audienceKey)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {audience_queer}\n\t\t}, ()=>{\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\ttoggleMustHaveUndecidedChangeset(){\n\t\tthis.setState((state, props) => ({\n\t\t\tmustHaveUndecidedChangeset: !state.mustHaveUndecidedChangeset\n\t\t}), ()=>{\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (<div className=\"filterMenuInner\">\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('what-to-show')}\n\t\t\t\t\t\t\ttitle={this.props.getString('what-to-show')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.category\n\t\t\t\t\t\t\t\t? (<>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{margin:'0 8px 0 -4px',background:this.state.category.color.bg}}></div>\n\t\t\t\t\t\t\t\t\t{this.state.category.name_translated}\n\t\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t\t\t: <Localized id=\"what-to-show\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"everything\"\n\t\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('category', null, popupState.close)}\n\t\t\t\t\t\t\t\tselected={!(!!this.state.category)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:'transparent'}}></div>\n\t\t\t\t\t\t\t\t<Localized id=\"show-everything\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{this.categories.map(category=>{\n\t\t\t\t\t\t\t\tconst isSelected = (!!this.state.category && category.name_translated === this.state.category.name_translated)\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={category.name_translated}\n\t\t\t\t\t\t\t\t\tvalue={category.name_translated}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('category', category,popupState.close)}\n\t\t\t\t\t\t\t\t\tselected={isSelected}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: (isSelected ? category.color.bg : ''),\n\t\t\t\t\t\t\t\t\t\tcolor: (\n\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? category.color.fg\n\t\t\t\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.theme.palette.type === 'light'\n\t\t\t\t\t\t\t\t\t\t\t\t? category.color.bg\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:(isSelected ? category.color.fg : category.color.bg)}}></div>\n\t\t\t\t\t\t\t\t\t{category.name_translated}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('for-which-age')}\n\t\t\t\t\t\t\ttitle={this.props.getString('for-which-age')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.age\n\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\tthis.state.age===this.highest_ages_entry\n\t\t\t\t\t\t\t\t\t? <Localized id=\"for-age-x-and-up\" vars={{age:this.state.age}}/>\n\t\t\t\t\t\t\t\t\t: <Localized id=\"for-age-x\" vars={{age:this.state.age}} />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: <Localized id=\"for-which-age\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"any_age\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('age', null, popupState.close)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t{(!(!!this.state.age) ? 'check' : '')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Localized id=\"any_age\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{this.ages.map(number=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('age', number, popupState.close)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t\t{(!!this.state.age && number === this.state.age ? 'check' : '')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{number===this.highest_ages_entry ? ' '+number : number}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('what-to-show')}\n\t\t\t\t\t\t\ttitle={this.props.getString('button_audience_queer_default_text')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.audience_queer.size > 0\n\t\t\t\t\t\t\t\t? (<>\n\t\t\t\t\t\t\t\t\t<Localized id=\"button_audience_queer_default_text\" />\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.audience_queer_values\n\t\t\t\t\t\t\t\t\t\t.filter(audience => this.state.audience_queer.has(audience.key))\n\t\t\t\t\t\t\t\t\t\t.map(audience => {\n\t\t\t\t\t\t\t\t\t\t\treturn <div key={audience.emoji} style={{margin:'0 -4px 0 8px'}}>{audience.emoji}</div>\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t\t\t: <Localized id=\"button_audience_queer_default_text\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.audience_queer_values.map(audience => {\n\t\t\t\t\t\t\t\tconst isSelected = (\n\t\t\t\t\t\t\t\t\taudience.key === 'everything'\n\t\t\t\t\t\t\t\t\t? this.state.audience_queer.size === 0\n\t\t\t\t\t\t\t\t\t: this.state.audience_queer.has(audience.key)\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={audience.key}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.toogleAudienceQueer(audience.key)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={'filterMenuDot hasIcon '+(audience.emoji ? '' : 'material-icons-round')}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? (audience.emoji ? audience.emoji : 'check')\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Localized\n\t\t\t\t\t\t\t\t\t\t\tid={audience.translation_key}\n\t\t\t\t\t\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t{\n\t\t\t\t!!this.props.globals.profileID\n\t\t\t\t? (<>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\taria-label={this.props.getString('must_have_undecided_changes')}\n\t\t\t\t\t\ttitle={this.props.getString('must_have_undecided_changes')}\n\t\t\t\t\t\tonClick={this.toggleMustHaveUndecidedChangeset}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"must_have_undecided_changes\" />\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t!!this.state.mustHaveUndecidedChangeset\n\t\t\t\t\t\t\t? (<CheckIcon className=\"ArrowDropDownIcon\" style={{\n\t\t\t\t\t\t\t\twidth:'20px',\n\t\t\t\t\t\t\t\theight:'20px',\n\t\t\t\t\t\t\t}}/>)\n\t\t\t\t\t\t\t:  <div style={{width:'8px'}}></div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Fab>\n\n\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('button_text_published')}\n\t\t\t\t\t\t\ttitle={this.props.getString('button_text_published')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.published === null\n\t\t\t\t\t\t\t\t? <Localized id=\"button_text_published\" />\n\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\tthis.state.published === true\n\t\t\t\t\t\t\t\t\t? <Localized id=\"menu_text_published_published\" />\n\t\t\t\t\t\t\t\t\t: <Localized id=\"menu_text_published_unpublished\" />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"everything\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('published', null, popupState.close)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t{this.state.published === null ? 'check' : ''}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Localized id=\"menu_text_published_everything\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"unpublished\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('published', false, popupState.close)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t{this.state.published === false ? 'check' : ''}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Localized id=\"menu_text_published_unpublished\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"published\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('published', true, popupState.close)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t{this.state.published === true ? 'check' : ''}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Localized id=\"menu_text_published_published\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\t\t\t\t</>)\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withTheme(withLocalization(FiltersPanelContent)))\n\n","import React, { lazy, Suspense } from 'react'\n\nimport { withLocalization } from '../../Localized/'\nimport { withConicGradient } from '../../ConicGradient/'\n\nimport { navigate } from '@reach/router'\nimport {\n\tmarkers as query_markers,\n\tundecidedPlaces as query_undecidedPlaces,\n} from '../../../queries.js'\n\nimport './index.css'\nimport classes from './MainMapMapbox.module.css'\n\nimport presets from '../../../data/dist/presets.json'\nimport colors from '../../../data/dist/colors.json'\nimport colorsByPreset from '../../../data/dist/colorsByPreset.json'\nimport { getColorByPreset, getTranslationFromArray, getCountryCode, getILGA /*, getPreset, getWantedTagsList*/ } from '../../../functions.js'\n\nimport { withGlobals } from '../../Globals/'\n\nimport {\n\tFab,\n} from '@material-ui/core'\nimport {\n\tAddRounded as ZoomInIcon, // ZoomInRounded\n\tRemoveRounded as ZoomOutIcon, // ZoomOutRounded\n} from '@material-ui/icons'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport FiltersPanelContent from '../../FiltersPanelContent/'\n\n// import { Map, TileLayer } from 'react-leaflet'\nimport L from 'leaflet'\nimport './leaflet/leaflet.css'\n\nimport mapbox_logo_lightmode from '../../../images/mapbox-logo-black.svg'\nimport mapbox_logo_darkmode from '../../../images/mapbox-logo-white.svg'\n\n// import MapboxLoader from './MapboxLoader.js'\n\nimport { PruneCluster, PruneClusterForLeaflet } from './PruneCluster_dist/PruneCluster.js'\n\nPruneCluster.Cluster.ENABLE_MARKERS_LIST = true\n\nconst MapboxLoader = lazy(() => import('./MapboxLoader.js'))\n\nclass MainMapMapbox extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tdocs: [],\n\t\t\tisGeoChooser: false,\n\t\t\tmiddleMarkerDoc: undefined,\n\t\t}\n\n\t\tthis.currentStyleURL = null\n\n\t\tthis.clusterGroup = null\n\t\tthis.defaultClusterSize = 120\n\n\t\t// objects for caching and keeping track of HTML marker objects (for performance)\n\t\tthis.mapbox_markers = {}\n\t\tthis.mapbox_markersOnScreen = {}\n\n\t\tthis.filters = null\n\n\t\t// this.MarkerLayerRef = React.createRef()\n\t\tthis.leaflet_map = null\n\t\tthis.map = null\n\t\tthis.borderGotLoaded = false\n\t\tthis.prune_markers = []\n\t\tthis.undecidedPlaces = []\n\n\t\tthis.ConicGradient = null\n\n\t\tthis.loadedMapbox = this.loadedMapbox.bind(this)\n\t\t// this.gotMapRef = this.gotMapRef.bind(this)\n\t\tthis.gotMapRefLeaflet = this.gotMapRefLeaflet.bind(this)\n\n\t\tthis.syncViewport = this.syncViewport.bind(this)\n\t\tthis.addMarkersToPruneCluster = this.addMarkersToPruneCluster.bind(this)\n\t\tthis.filterMarkers = this.filterMarkers.bind(this)\n\t\tthis.showAllMarkers = this.showAllMarkers.bind(this)\n\t\tthis.showAllMarkersButMiddleMarker = this.showAllMarkersButMiddleMarker.bind(this)\n\n\t\t// this.setMapPos = this.setMapPos.bind(this)\n\t\tthis.viewportChanged = this.viewportChanged.bind(this)\n\t\tthis.zoomIn = this.zoomIn.bind(this)\n\t\tthis.zoomOut = this.zoomOut.bind(this)\n\n\t\tthis.loadMarkers = this.loadMarkers.bind(this)\n\t\tthis.loadUndecidedPlaces = this.loadUndecidedPlaces.bind(this)\n\n\t\tthis.filtersChanged = this.filtersChanged.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadMarkers()\n\t\tthis.loadUndecidedPlaces()\n\n\t\tif (this.props.conic_gradient) {\n\t\t\tthis.props.conic_gradient.onReady(() => {\n\t\t\t\tthis.ConicGradient = this.props.conic_gradient.getConicGradient()\n\t\t\t\t// this.clusterGroup.RedrawIcons()\n\t\t\t\tthis.updateMarkers({ forceRedraw: true })\n\t\t\t})\n\t\t}\n\n\t\tif (this.props.onFunctions) {\n\t\t\tconst functions = {\n\t\t\t\tmap: {\n\t\t\t\t\tgetMapType: () => 'mapbox',\n\t\t\t\t\tsetPadding: (...attr) => this.map ? this.map.setPadding(...attr) : null,\n\t\t\t\t\tsetZoom: (...attr) => this.map ? this.map.setZoom(...attr) : null,\n\t\t\t\t\tgetZoom: () => this.map ? this.map.getZoom() : null,\n\t\t\t\t\tgetCenter: () => this.map ? this.map.getCenter() : null,\n\t\t\t\t\tgetBounds: () => this.map ? this.map.getBounds() : null,\n\t\t\t\t\tzoomIn: () => this.map ? this.map.zoomIn() : null,\n\t\t\t\t\tfitBounds: (...attr) => this.map ? this.map.fitBounds(...attr) : null,\n\t\t\t\t\tflyToBounds: (...attr) => this.map ? this.map.fitBounds(...attr) : null,\n\t\t\t\t\t// setView: (...attr) => {\n\t\t\t\t\t// \tthis.map.setCenter(attr.center)\n\t\t\t\t\t// \tthis.map.setZoom(attr.zoom)\n\t\t\t\t\t// }, // this.map.setView(...attr),\n\t\t\t\t\tsetView: (...attr) => this.map ? this.map.jumpTo(...attr) : null,\n\t\t\t\t\tpanBy: (...attr) => this.map ? this.map.panBy(...attr) : null,\n\t\t\t\t\tpanTo: (...attr) => this.map ? this.map.panTo(...attr) : null,\n\t\t\t\t\tflyTo: (...attr) => this.map ? this.map.flyTo(...attr) : null,\n\t\t\t\t\tinvalidateSize: (...attr) => { }, // this.map.resize(...attr),\n\t\t\t\t\tproject: (...attr) => this.leaflet_map ? this.leaflet_map.project(...attr) : null,\n\t\t\t\t\tunproject: (...attr) => this.leaflet_map ? this.leaflet_map.unproject(...attr) : null,\n\t\t\t\t\tlatLngToContainerPoint: (...attr) => this.leaflet_map ? this.leaflet_map.latLngToContainerPoint(...attr) : null,\n\n\t\t\t\t\tuseAsGeoChooser: (...attr) => this.useAsGeoChooser(...attr),\n\t\t\t\t\trefetchMarkers: () => this.refetchMarkers(),\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.props.globals.mainMapFunctions = functions.map\n\t\t\tthis.props.onFunctions(functions)\n\t\t}\n\n\t\twindow.addEventListener('updateMainMapView', this.setMapPos)\n\n\t\tthis.mapViewport = {\n\t\t\tcenter: this.props.store.get('map_center_real') || [51, 10],\n\t\t\tzoom: this.props.store.get('map_zoom') || 3,\n\t\t}\n\t}\n\tcomponentDidUpdate() {\n\t\tif (this.props.filters !== this.filters) {\n\t\t\tthis.filters = this.props.filters\n\t\t\tthis.filterMarkers(this.filters)\n\t\t}\n\n\t\tconst newStyleURL = this.getStyleUrl()\n\t\tif (!!this.map && this.currentStyleURL !== newStyleURL) {\n\t\t\tthis.currentStyleURL = newStyleURL\n\t\t\tthis.map.setStyle(newStyleURL)\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('updateMainMapView', this.setMapPos)\n\n\t\tif (this.markerQuerySubscription) {\n\t\t\tthis.markerQuerySubscription.unsubscribe()\n\t\t}\n\t}\n\n\trefetchMarkers() {\n\t\tthis.props.globals.graphql.query({\n\t\t\tfetchPolicy: 'network-only',\n\t\t\tquery: query_markers,\n\t\t\tvariables: {\n\t\t\t\tlanguages: navigator.languages,\n\t\t\t},\n\t\t})\n\t}\n\n\tsetMapPos(event) {\n\t\tthis.setState({ center: this.props.globals.map_center })\n\t}\n\n\tuseAsGeoChooser(yesOrNo, middleMarkerDoc) {\n\t\tif (yesOrNo) {\n\t\t\tthis.setState({\n\t\t\t\tisGeoChooser: true,\n\t\t\t\tmiddleMarkerDoc,\n\t\t\t}, () => {\n\t\t\t\tthis.filterMarkers(this.filters)\n\t\t\t\tthis.setGlobalMapCenter()\n\t\t\t})\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tisGeoChooser: false,\n\t\t\t\tmiddleMarkerDoc: undefined,\n\t\t\t}, () => {\n\t\t\t\tthis.filterMarkers(this.filters)\n\t\t\t\tthis.setGlobalMapCenter()\n\t\t\t})\n\t\t}\n\t}\n\n\tloadMarkers() {\n\t\tthis.markerQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\tquery: query_markers,\n\t\t\tvariables: {\n\t\t\t\tlanguages: navigator.languages,\n\t\t\t\t// wantedTags: ['min_age','max_age',...getWantedTagsList(presets)], // this gets us about 11% reduction in size\n\t\t\t},\n\t\t})\n\t\t\t.subscribe(({ data }) => {\n\t\t\t\tif (!!data && !!data.markers) {\n\t\t\t\t\tconst docs = JSON.parse(JSON.stringify(data.markers)).map(doc => {\n\t\t\t\t\t\tdoc.___preset = (\n\t\t\t\t\t\t\t!!doc.preset && !!presets[doc.preset]\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tkey: doc.preset,\n\t\t\t\t\t\t\t\t\t...presets[doc.preset],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t: presets.default\n\t\t\t\t\t\t)\n\t\t\t\t\t\tdoc.___color = getColorByPreset(doc.___preset.key, colorsByPreset) || colors.default\n\n\t\t\t\t\t\treturn doc\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.docs = docs\n\t\t\t\t\tthis.addMarkersToPruneCluster(docs)\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tloadUndecidedPlaces() {\n\t\tif (!!this.props.globals.profileID) {\n\t\t\tthis.markerQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\t\tquery: query_undecidedPlaces,\n\t\t\t\tvariables: {},\n\t\t\t})\n\t\t\t\t.subscribe(({ data }) => {\n\t\t\t\t\tif (!!data && !!data.undecidedPlaces) {\n\t\t\t\t\t\tthis.undecidedPlaces = data.undecidedPlaces.map(doc => doc._id)\n\t\t\t\t\t\tthis.filterMarkers(this.filters)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}\n\n\tasync showBorders() {\n\t\tif (!this.borderGotLoaded) {\n\t\t\tthis.borderGotLoaded = true\n\t\t\tconst borders_path = await import('./border-files/borders_1to110m_p2.geojson')\n\t\t\tconst borders_response = await fetch(borders_path.default)\n\t\t\tconst borders = await borders_response.json()\n\n\t\t\tconst getStatusColor = status => {\n\t\t\t\tif (status === 'great' || status === 1) {\n\t\t\t\t\treturn this.props.theme.palette.success.main\n\t\t\t\t} else if (status === 'ok' || status === 2) {\n\t\t\t\t\treturn this.props.theme.palette.warning.main\n\t\t\t\t} else if (status === 'bad' || status === 3) {\n\t\t\t\t\treturn this.props.theme.palette.error.main\n\t\t\t\t}\n\t\t\t\treturn this.props.theme.palette.background.default\n\t\t\t}\n\n\t\t\tborders.features = borders.features.map(feature => {\n\t\t\t\tconst country_code = getCountryCode(feature.properties)\n\t\t\t\tconst ilga = getILGA(country_code)\n\t\t\t\tconst color = getStatusColor(\n\t\t\t\t\tilga\n\t\t\t\t\t\t&& ilga.overview\n\t\t\t\t\t\t&& ilga.overview.statusNumber\n\t\t\t\t\t\t? ilga.overview.statusNumber\n\t\t\t\t\t\t: -1\n\t\t\t\t)\n\n\t\t\t\treturn {\n\t\t\t\t\tgeometry: feature.geometry,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t...feature.properties,\n\t\t\t\t\t\tcolor,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.map.addSource('borders', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: borders,\n\t\t\t})\n\n\t\t\t// this.map.on('load', ()=>{\n\t\t\t// \t// this.showBorders()\n\t\t\t// })\n\t\t}\n\n\t\tconst layers = this.map.getStyle().layers\n\t\t// Find the index of the first symbol layer in the map style\n\t\tlet firstSymbolId = null\n\t\tfor (const layer of layers) {\n\t\t\tif (layer.type === 'symbol') {\n\t\t\t\tfirstSymbolId = layer.id\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tthis.map.addLayer({\n\t\t\t'id': 'borders',\n\t\t\t'type': 'fill',\n\t\t\t'source': 'borders',\n\t\t\t'layout': {},\n\t\t\t'paint': {\n\t\t\t\t'fill-color': ['get', 'color'],\n\t\t\t\t'fill-opacity': 0.15,\n\t\t\t},\n\t\t}, firstSymbolId)\n\t}\n\thideBorders() {\n\t\tif (!!this.map && this.map.getLayer('borders')) {\n\t\t\tthis.map.removeLayer('borders')\n\t\t}\n\t}\n\n\tgetStyleUrl() {\n\t\tif (this.props.theme.palette.type === 'light') {\n\t\t\treturn 'mapbox://styles/qiekub/ck8aum3p70aa51in4ikxao8ii' // ?optimize=true\n\t\t} else {\n\t\t\treturn 'mapbox://styles/qiekub/ck8ozalln0c1g1iog1mpl8aps' // ?optimize=true\n\t\t}\n\t}\n\n\tgetInitCenter() {\n\t\tlet center = this.props.store.get('map_center_fake')\n\n\t\tif (!(!!center)) {\n\t\t\tcenter = {\n\t\t\t\tlat: 51,\n\t\t\t\tlng: 10,\n\t\t\t}\n\t\t}\n\t\tif (!(!!center.lat) || center.lat <= -90 || center.lat >= 90) {\n\t\t\tcenter.lat = 51\n\t\t}\n\t\tif (!(!!center.lng)) {\n\t\t\tcenter.lng = 10\n\t\t}\n\n\t\treturn center\n\t}\n\n\tgotMapRefLeaflet(element) {\n\t\tif (!!element && this.leaflet_map === null) {\n\t\t\tthis.leaflet_map = new L.Map(element, {\n\t\t\t\tcenter: this.getInitCenter(),\n\t\t\t\tzoom: (this.props.store.get('map_zoom') || 3) + 1,\n\t\t\t\tzoomSnap: 0,\n\t\t\t\tzoomAnimation: false,\n\t\t\t\tfadeAnimation: false,\n\t\t\t\tmarkerZoomAnimation: false,\n\t\t\t\tscrollWheelZoom: false,\n\t\t\t\tminZoom: 1,\n\t\t\t\tmaxZoom: 22,\n\t\t\t})\n\n\t\t\t// L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\t// \tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t// }).addTo(this.leaflet_map);\n\n\t\t\t// L.tileLayer('https://api.mapbox.com/styles/v1/qiekub/ck8ozalln0c1g1iog1mpl8aps/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrOGF1ZGlpdzA1dDgzamx2ajNua3picmMifQ.OYr_o4fX7vPTvZCWZsUs4g', {\n\t\t\t// \tattribution: ''\n\t\t\t// }).addTo(this.leaflet_map)\n\n\t\t\tthis.clusterGroup = new PruneClusterForLeaflet()\n\t\t\tthis.clusterGroup.Cluster.Size = this.defaultClusterSize\n\t\t\tthis.leaflet_map.addLayer(this.clusterGroup)\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.syncViewport()\n\t\t\t}, 100)\n\t\t}\n\t}\n\tloadedMapbox({ ref, mapboxgl }) {\n\t\tthis.mapboxgl = mapboxgl\n\n\t\tif (!!ref && this.map === null) {\n\t\t\tthis.currentStyleURL = this.getStyleUrl()\n\n\t\t\tconst center = this.getInitCenter()\n\n\t\t\tthis.map = new this.mapboxgl.Map({\n\t\t\t\tcontainer: ref,\n\t\t\t\tstyle: this.currentStyleURL,\n\t\t\t\tcenter: new this.mapboxgl.LngLat(center.lng, center.lat),\n\t\t\t\tzoom: this.props.store.get('map_zoom') || 3,\n\t\t\t\tbearing: 0, // this.props.store.get('map_bearing') || 0,\n\t\t\t\tpitch: 0, // this.props.store.get('map_pitch') || 0,\n\t\t\t\thash: false, // 'map',\n\t\t\t\trefreshExpiredTiles: true,\n\t\t\t\tminZoom: 1,\n\t\t\t\tmaxZoom: 22,\n\t\t\t\tbearingSnap: 7,\n\t\t\t\tpitchWithRotate: true,\n\t\t\t\tdragPan: true,\n\t\t\t\tdragRotate: true,\n\t\t\t\ttouchZoomRotate: true,\n\t\t\t\ttouchPitch: true,\n\t\t\t\tscrollZoom: true,\n\t\t\t\tboxZoom: false,\n\t\t\t\tdoubleClickZoom: false,\n\t\t\t})\n\n\t\t\t// this.map.showPadding = true\n\n\t\t\tlet currentMapboxStylesheetID = null\n\t\t\tthis.map.on('styledata', event => {\n\t\t\t\tconst newMapboxStylesheetID = event.style.stylesheet.id\n\t\t\t\tif (event.style._loaded && currentMapboxStylesheetID !== newMapboxStylesheetID) {\n\t\t\t\t\tcurrentMapboxStylesheetID = event.style.stylesheet.id\n\t\t\t\t\tthis.localizeTheMap()\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.map.on('move', this.syncViewport)\n\t\t\tthis.map.on('moveend', this.syncViewport)\n\t\t\tthis.map.on('zoom', this.syncViewport)\n\t\t\tthis.map.on('zoomend', this.syncViewport)\n\n\t\t\tthis.syncViewport()\n\t\t}\n\t}\n\tsyncViewport() {\n\t\tif (!!this.map) {\n\t\t\tthis.viewportChanged({\n\t\t\t\tcenter: this.map.getCenter(),\n\t\t\t\tzoom: this.map.getZoom(),\n\t\t\t\tbearing: this.map.getBearing(),\n\t\t\t\tpitch: this.map.getPitch(),\n\t\t\t})\n\t\t}\n\t}\n\n\tlocalizeTheMap() {\n\t\tconst language = this.props.getString('map_language')\n\n\t\tconst layerIDs = this.map.getStyle().layers\n\t\t\t.filter(layer => (\n\t\t\t\tlayer.hasOwnProperty('layout')\n\t\t\t\t&& layer.layout.hasOwnProperty('text-field')\n\t\t\t\t&& layer.layout['text-field'].flat().includes('name')\n\t\t\t))\n\t\t\t.map(layer => layer.id)\n\n\t\tfor (const layerID of layerIDs) {\n\t\t\tthis.map.setLayoutProperty(layerID, 'text-field', [\n\t\t\t\t'coalesce',\n\t\t\t\t['get', 'name_' + language],\n\t\t\t\t['get', 'name_en'],\n\t\t\t\t['get', 'name'],\n\t\t\t])\n\t\t}\n\t}\n\n\n\n\tupdateMarkers(options) {\n\t\toptions = options || {}\n\n\t\tif (\n\t\t\t!(!!this.clusterGroup)\n\t\t\t|| !(!!this.mapboxgl)\n\t\t) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst newMarkers = {}\n\n\n\n\t\tif (options.forceRedraw) {\n\t\t\tfor (const id in this.mapbox_markers) {\n\t\t\t\tthis.mapbox_markers[id].remove()\n\t\t\t}\n\t\t\tthis.mapbox_markers = {}\n\t\t\tthis.mapbox_markersOnScreen = {}\n\t\t}\n\n\n\t\t// for every cluster on the screen, create an HTML marker for it (if we didn't yet), and add it to the map if it's not there already\n\t\tfor (const feature of this.clusterGroup._objectsOnMap) {\n\t\t\tconst averagePosition = feature.averagePosition\n\t\t\tconst id = feature.hashCode\n\n\t\t\tlet marker = this.mapbox_markers[id]\n\t\t\tif (!marker) {\n\t\t\t\tmarker = this.mapbox_markers[id] = new this.mapboxgl.Marker({\n\t\t\t\t\telement: (\n\t\t\t\t\t\tfeature.population === 1\n\t\t\t\t\t\t\t? this.createPoiMarker(feature)\n\t\t\t\t\t\t\t: this.createClusterMarker(feature)\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t\t.setLngLat(averagePosition)\n\t\t\t}\n\t\t\tnewMarkers[id] = marker\n\n\t\t\tif (!this.mapbox_markersOnScreen[id]) {\n\t\t\t\tmarker.addTo(this.map)\n\t\t\t}\n\t\t}\n\n\t\t// for every marker we've added previously, remove those that are no longer visible\n\t\tfor (const id in this.mapbox_markersOnScreen) {\n\t\t\tif (!newMarkers[id]) {\n\t\t\t\tthis.mapbox_markersOnScreen[id].remove()\n\t\t\t}\n\t\t}\n\t\tthis.mapbox_markersOnScreen = newMarkers\n\t}\n\tupdateMarkersAfterPruneClusterUpdate() {\n\t\tsetTimeout(() => {\n\t\t\tthis.updateMarkers()\n\t\t}, 100)\n\t}\n\n\tcreatePoiMarker(options) {\n\t\tconst doc = options.lastMarker.data\n\n\t\tconst element = document.createElement('div')\n\t\telement.classList.add('marker-custom-icon')\n\t\telement.style.cursor = 'pointer'\n\t\telement.style.width = '40px'\n\t\telement.style.height = '40px'\n\n\t\telement.addEventListener('click', event => {\n\t\t\tif (!this.state.isGeoChooser) {\n\t\t\t\tnavigate(`/view/${doc._id}/`)\n\t\t\t}\n\t\t})\n\n\t\telement.innerHTML = `\n\t\t\t<div\n\t\t\t\tclass=\"wrapper material-icons-round\"\n\t\t\t\tstyle=\"\n\t\t\t\t\t--bg-color:${doc.___color.bg};\n\t\t\t\t\t--fg-color:${doc.___color.fg};\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t${doc.___preset.icon ? doc.___preset.icon.toLowerCase() : 'place'}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"mapboxTooltip marker-custom-tooltip\"\n\t\t\t\tstyle=\"\n\t\t\t\t\t--bg-color:${doc.___color.bg};\n\t\t\t\t\t--fg-color:${doc.___color.fg};\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t${(\n\t\t\t\tdoc.name &&\n\t\t\t\t\tdoc.name.length > 0\n\t\t\t\t\t? getTranslationFromArray(doc.name, this.props.globals.userLocales)\n\t\t\t\t\t: ''\n\t\t\t)}\n\t\t\t</div>\n\t\t`\n\n\t\treturn element\n\t}\n\tcreateClusterMarker(options) {\n\t\tconst colors = Object.entries(\n\t\t\toptions._clusterMarkers\n\t\t\t\t.filter(m => !!m.data.___color.key)\n\t\t\t\t.map(m =>\n\t\t\t\t\t// m.data.___color.key === 'default'\n\t\t\t\t\t// ? 'transparent'\n\t\t\t\t\t// :\n\t\t\t\t\tm.data.___color.bg\n\t\t\t\t)\n\t\t\t\t.reduce((obj, preset_key) => {\n\t\t\t\t\tif (!(!!obj[preset_key])) {\n\t\t\t\t\t\tobj[preset_key] = 0\n\t\t\t\t\t}\n\t\t\t\t\tobj[preset_key] += 1\n\t\t\t\t\treturn obj\n\t\t\t\t}, {})\n\t\t).sort((a, b) => a[1] - b[1])\n\n\t\tconst colors_sum = colors.reduce((sum, pair) => sum + pair[1], 0)\n\n\t\tconst gradient = this.getConicGradient(colors.map(pair => {\n\t\t\treturn [pair[0], pair[1] / colors_sum]\n\t\t}))\n\n\t\tconst element = document.createElement('div')\n\t\telement.classList.add('marker-cluster-custom-icon')\n\t\telement.style.cursor = 'pointer'\n\t\telement.style.width = '48px'\n\t\telement.style.height = '48px'\n\n\t\telement.innerHTML = `\n\t\t\t<div class=\"number\">${options.population || ''}</div>\n\t\t\t<div class=\"pieChart\" style=\"background-image:url(${!!gradient ? gradient.dataURL : ''});\"></div>\n\t\t`\n\n\n\t\telement.addEventListener('click', event => {\n\t\t\tlet padding = 128\n\t\t\tif (this.props.globals.isSmallScreen) {\n\t\t\t\tpadding = 64\n\t\t\t}\n\n\t\t\t// const o_bounds = options.bounds\n\t\t\t//\n\t\t\t// const minLngLat = new this.mapboxgl.LngLat(o_bounds.minLng, o_bounds.minLat);\n\t\t\t// const maxLngLat = new this.mapboxgl.LngLat(o_bounds.maxLng, o_bounds.maxLat);\n\t\t\t// const distance = minLngLat.distanceTo(maxLngLat)*0.5\n\t\t\t// const middle = options.position\n\t\t\t//\n\t\t\t// const bounds = new this.mapboxgl.LngLat(middle.lng, middle.lat).toBounds(distance)\n\t\t\t//\n\t\t\t// this.map.fitBounds(bounds, {\n\t\t\t// \tpadding: {\n\t\t\t// \t\ttop: padding,\n\t\t\t// \t\tright: padding,\n\t\t\t// \t\tbottom: 116+padding,\n\t\t\t// \t\tleft: (this.props.sidebarIsOpen ? 400+padding : padding)\n\t\t\t// \t},\n\t\t\t// })\n\n\t\t\tthis.map.flyTo({\n\t\t\t\tcenter: options.position, // .averagePosition,\n\t\t\t\tzoom: this.map.getZoom() + 1,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: padding,\n\t\t\t\t\tright: padding,\n\t\t\t\t\tbottom: 116 + padding,\n\t\t\t\t\tleft: (this.props.sidebarIsOpen ? 400 + padding : padding)\n\t\t\t\t},\n\t\t\t\tduration: 750,\n\t\t\t})\n\t\t})\n\n\t\treturn element\n\t}\n\n\tgetConicGradient(values) {\n\t\tif (!(!!this.ConicGradient)) {\n\t\t\treturn null\n\t\t}\n\n\t\tlet stops = []\n\n\t\tconst gapColor = 'transparent' // this.props.theme.palette.type === 'dark' ? '#181818' : 'white'\n\n\t\tif (values.length === 1) {\n\t\t\tstops = [values[0][0] + ' 0']\n\t\t} else {\n\t\t\tlet counter = 0\n\t\t\tlet currentPos = 0\n\t\t\tfor (const pair of values) {\n\t\t\t\tcurrentPos += 5\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\tstops.push(gapColor + ' ' + currentPos + 'deg')\n\t\t\t\t} else {\n\t\t\t\t\tstops.push(gapColor + ' 0 ' + currentPos + 'deg')\n\t\t\t\t}\n\n\t\t\t\tif (counter === values.length - 1) {\n\t\t\t\t\tstops.push(pair[0] + ' 0')\n\t\t\t\t} else {\n\t\t\t\t\tcurrentPos += Math.ceil(pair[1] * 360)\n\t\t\t\t\tstops.push(pair[0] + ' 0 ' + currentPos + 'deg')\n\t\t\t\t}\n\n\t\t\t\tcounter += 1\n\t\t\t}\n\t\t}\n\t\tstops = stops.join(', ')\n\n\t\tconst gradient = new this.ConicGradient({\n\t\t\tstops: stops, // \"gold 40%, #f06 0\", // required\n\t\t\trepeating: false, // Default: false\n\t\t\tsize: 100, // Default: Math.max(innerWidth, innerHeight)\n\t\t})\n\n\t\treturn gradient\n\t}\n\n\taddMarkersToPruneCluster(docs) {\n\t\tthis.prune_markers = []\n\t\tthis.clusterGroup.RemoveMarkers()\n\n\t\tfor (const doc of docs) {\n\t\t\tlet marker = new PruneCluster.Marker(doc.lat, doc.lng, doc)\n\t\t\tmarker.filtered = true\n\t\t\tthis.prune_markers.push(marker)\n\t\t\tthis.clusterGroup.RegisterMarker(marker)\n\t\t}\n\n\t\t// this.clusterGroup.ProcessView()\n\t\t// this.leaflet_map.invalidateSize(false)\n\n\t\tthis.filterMarkers(this.filters)\n\t}\n\n\thideAllMarkers() {\n\t\tconst markers_length = this.prune_markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tthis.prune_markers[i].filtered = true\n\t\t}\n\t\tthis.clusterGroup.ProcessView()\n\t\tthis.updateMarkersAfterPruneClusterUpdate()\n\t}\n\tshowAllMarkers() {\n\t\tconst markers_length = this.prune_markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tthis.prune_markers[i].filtered = false\n\t\t}\n\t\tthis.clusterGroup.ProcessView()\n\t\tthis.updateMarkersAfterPruneClusterUpdate()\n\t}\n\tshowAllMarkersButMiddleMarker() {\n\t\tconst middleMarkerID = this.state.middleMarkerDoc._id\n\n\t\tconst markers_length = this.prune_markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tif (middleMarkerID === this.prune_markers[i].data._id) {\n\t\t\t\tthis.prune_markers[i].filtered = true\n\t\t\t} else {\n\t\t\t\tthis.prune_markers[i].filtered = false\n\t\t\t}\n\t\t}\n\n\t\tthis.clusterGroup.ProcessView()\n\t\tthis.updateMarkersAfterPruneClusterUpdate()\n\t}\n\tfilterMarkers(filters) {\n\t\tif (this.state.isGeoChooser) {\n\t\t\tthis.showBorders()\n\t\t\tthis.showAllMarkersButMiddleMarker()\n\t\t} else {\n\t\t\tthis.hideBorders()\n\n\t\t\tif (!!this.filters) {\n\t\t\t\tconst ids = this.filters.ids || []\n\n\t\t\t\tconst presets = this.filters.presets || []\n\t\t\t\t// const presets = ['amenity/community_centre']\n\t\t\t\tconst presets_length = presets.length\n\n\t\t\t\tconst selectedAge = this.filters.selectedAge\n\t\t\t\tconst ageOption = this.filters.ageOption\n\t\t\t\tconst audienceQueerOptions = this.filters.audienceQueerOptions || []\n\t\t\t\tconst checkAudienceQueerOptions = audienceQueerOptions.length > 0\n\t\t\t\tconst mustHaveUndecidedChangeset = this.filters.mustHaveUndecidedChangeset || false\n\t\t\t\tconst published = (\n\t\t\t\t\tthis.filters.published === false || this.filters.published === true\n\t\t\t\t\t\t? this.filters.published\n\t\t\t\t\t\t: null\n\t\t\t\t)\n\n\t\t\t\tif (\n\t\t\t\t\tpresets_length > 0\n\t\t\t\t\t|| checkAudienceQueerOptions\n\t\t\t\t\t|| !!selectedAge\n\t\t\t\t\t|| mustHaveUndecidedChangeset\n\t\t\t\t\t|| published === true\n\t\t\t\t\t|| published === false\n\t\t\t\t) {\n\t\t\t\t\tconst markers_length = this.prune_markers.length\n\t\t\t\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\t\t\t\tconst marker = this.prune_markers[i]\n\n\t\t\t\t\t\tif (ids.includes(marker.data._id)) {\n\t\t\t\t\t\t\tthis.prune_markers[i].filtered = false\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tlet publishedFilter = false\n\t\t\t\t\t\t\tif (published === true) {\n\t\t\t\t\t\t\t\tpublishedFilter = marker.data.tags.published === true\n\t\t\t\t\t\t\t} else if (published === false) {\n\t\t\t\t\t\t\t\tpublishedFilter = marker.data.tags.published !== true\n\t\t\t\t\t\t\t} else if (published === null) {\n\t\t\t\t\t\t\t\tpublishedFilter = true\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet hasUndecidedChangesets = true\n\t\t\t\t\t\t\tif (mustHaveUndecidedChangeset) {\n\t\t\t\t\t\t\t\tif (marker.data.status === 'undecided') {\n\t\t\t\t\t\t\t\t\thasUndecidedChangesets = true\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\thasUndecidedChangesets = this.undecidedPlaces.includes(marker.data._id)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet isInPresets = true\n\t\t\t\t\t\t\tif (presets_length > 0) {\n\t\t\t\t\t\t\t\tisInPresets = presets.map(preset_key => {\n\t\t\t\t\t\t\t\t\treturn marker.data.___preset.key.startsWith(preset_key)\n\t\t\t\t\t\t\t\t}).reduce((bool, value) => (value ? true : bool), false)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet matchesAudienceQueer = true\n\t\t\t\t\t\t\tif (checkAudienceQueerOptions) {\n\t\t\t\t\t\t\t\tif (!audienceQueerOptions.includes(marker.data.tags.audience_queer)) {\n\t\t\t\t\t\t\t\t\tmatchesAudienceQueer = false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet isInAgeRange = true\n\t\t\t\t\t\t\tif (!!selectedAge) {\n\t\t\t\t\t\t\t\tisInAgeRange = false\n\t\t\t\t\t\t\t\tif (ageOption !== 'open_end' && !!marker.data.tags.min_age && !!marker.data.tags.max_age) {\n\t\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\t\tisInAgeRange = (\n\t\t\t\t\t\t\t\t\t\t(!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t\t\t&& (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!!marker.data.tags.min_age) {\n\t\t\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (isInAgeRange && !!marker.data.tags.max_age) {\n\t\t\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.prune_markers[i].filtered = !(publishedFilter && hasUndecidedChangesets && isInPresets && matchesAudienceQueer && isInAgeRange)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.clusterGroup.ProcessView()\n\t\t\t\t\tthis.updateMarkersAfterPruneClusterUpdate()\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideBorders()\n\t\t\t\t\tthis.showAllMarkers()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hideBorders()\n\t\t\t\tthis.showAllMarkers()\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsetGlobalMapCenter() {\n\t\tconst viewport = this.mapViewport\n\n\t\tif (!(!!viewport && !!viewport.center && !!viewport.zoom)) {\n\t\t\treturn\n\t\t}\n\n\t\tlet mapCenter = viewport.center || { lng: 0, lat: 0 }\n\t\t// if (this.props.sidebarIsOpen) { // TODO this.props.sidebarIsOpen isn't enough on small screens\n\t\t// \tconst p1 = this.map.project(mapCenter)\n\t\t// console.log('p1', p1)\n\t\t// \tconst {x, y} = p1\n\t\t// \tmapCenter = this.map.unproject({\n\t\t// \t\tx: x+200,\n\t\t// \t\ty,\n\t\t// \t}) // map center with sidebar offset\n\t\t//\n\t\t// \tif (Array.isArray(mapCenter)) {\n\t\t// \t\tmapCenter = {\n\t\t// \t\t\tlng: mapCenter[1],\n\t\t// \t\t\tlat: mapCenter[0],\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\n\t\tlet mapZoom = viewport.zoom || 2\n\t\tif (this.clusterGroup) {\n\t\t\tif (mapZoom >= 18) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 10\n\t\t\t} else if (mapZoom >= 16) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 20\n\t\t\t} else if (mapZoom >= 14) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 60\n\t\t\t} else if (mapZoom >= 8) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 80\n\t\t\t} else {\n\t\t\t\tthis.clusterGroup.Cluster.Size = this.defaultClusterSize\n\t\t\t}\n\t\t}\n\n\t\tthis.props.store.set('map_center_fake', mapCenter)\n\t\tthis.props.store.set('map_center_real', viewport.center)\n\t\tthis.props.store.set('map_zoom', mapZoom)\n\t\t// this.props.store.set('map_bearing', viewport.bearing || 0)\n\t\t// this.props.store.set('map_pitch', viewport.pitch || 0)\n\n\t\twindow.dispatchEvent(new Event('mapViewportUpdated'))\n\t}\n\n\tviewportChanged(viewport) {\n\t\tif (this.leaflet_map) {\n\t\t\tthis.leaflet_map.setView(\n\t\t\t\tviewport.center,\n\t\t\t\tviewport.zoom + 1,\n\t\t\t\t{\n\t\t\t\t\tanimate: false,\n\t\t\t\t\tduration: 0,\n\t\t\t\t}\n\t\t\t)\n\t\t\tthis.updateMarkers()\n\t\t}\n\n\t\tthis.mapViewport = viewport\n\t\tthis.setGlobalMapCenter()\n\t}\n\n\tzoomIn() {\n\t\tthis.map.zoomIn({ duration: 200 })\n\t}\n\tzoomOut() {\n\t\tthis.map.zoomOut({ duration: 200 })\n\t}\n\n\tfiltersChanged(...attr) {\n\t\tif (this.props.onFiltersChanged) {\n\t\t\tthis.props.onFiltersChanged(...attr)\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (<div className={`${this.props.className} ${this.props.mapIsResizing ? 'mapIsResizing' : ''} ${this.props.sidebarIsOpen ? 'sidebarIsOpen' : ''}`}>\n\n\t\t\t<div className=\"filtersPanel\">\n\t\t\t\t<FiltersPanelContent onChange={this.filtersChanged} />\n\t\t\t</div>\n\n\t\t\t<div className={`markerInTheMiddel rainbow ${this.state.isGeoChooser ? 'visible' : 'hidden'}`}>\n\t\t\t\t<div className=\"leaflet-marker-icon marker-custom-icon\">\n\t\t\t\t\t{\n\t\t\t\t\t\t!!this.state.middleMarkerDoc &&\n\t\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color &&\n\t\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color.bg &&\n\t\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color.fg &&\n\t\t\t\t\t\t\t!!this.state.middleMarkerDoc.___preset\n\t\t\t\t\t\t\t? <div className=\"wrapper material-icons-round\" style={{ '--bg-color': this.state.middleMarkerDoc.___color.bg, '--fg-color': this.state.middleMarkerDoc.___color.fg }}>{this.state.middleMarkerDoc.___preset.icon ? this.state.middleMarkerDoc.___preset.icon.toLowerCase() : 'not_listed_location'}</div>\n\t\t\t\t\t\t\t: <div className=\"wrapper material-icons-round\">not_listed_location</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"zoomButtons\">\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={this.props.getString('zoom_in_aria_label')}\n\t\t\t\t\ttitle={this.props.getString('zoom_in_aria_label')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpointerEvents: 'auto',\n\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\twidth: '32px',\n\t\t\t\t\t\theight: '32px',\n\t\t\t\t\t\tminHeight: '32px',\n\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t// borderBottomRightRadius: '2px',\n\t\t\t\t\t\t// borderBottomLeftRadius: '2px',\n\t\t\t\t\t\tmarginBottom: '4px',\n\t\t\t\t\t}}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={this.zoomIn}\n\t\t\t\t>\n\t\t\t\t\t<ZoomInIcon />\n\t\t\t\t</Fab>\n\t\t\t\t<br />\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={this.props.getString('zoom_out_aria_label')}\n\t\t\t\t\ttitle={this.props.getString('zoom_out_aria_label')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpointerEvents: 'auto',\n\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\twidth: '32px',\n\t\t\t\t\t\theight: '32px',\n\t\t\t\t\t\tminHeight: '32px',\n\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t// borderTopLeftRadius: '2px',\n\t\t\t\t\t\t// borderTopRightRadius: '2px',\n\t\t\t\t\t}}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={this.zoomOut}\n\t\t\t\t>\n\t\t\t\t\t<ZoomOutIcon />\n\t\t\t\t</Fab>\n\t\t\t</div>\n\n\t\t\t<a\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\thref=\"https://mapbox.com/\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tthis.props.theme.palette.type === 'dark'\n\t\t\t\t\t\t\t? mapbox_logo_darkmode\n\t\t\t\t\t\t\t: mapbox_logo_lightmode\n\t\t\t\t\t}\n\t\t\t\t\talt={this.props.getString('mapbox_logo_alt_text')}\n\t\t\t\t\tclassName={classes.mapbox_logo}\n\t\t\t\t/>\n\t\t\t</a>\n\n\t\t\t<Suspense fallback={this.props.globals.renderLazyLoader()}>\n\t\t\t\t<MapboxLoader\n\t\t\t\t\tonLoad={this.loadedMapbox}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'map'\n\t\t\t\t\t\t+ (this.state.isGeoChooser ? ' isGeoChooser' : '')\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Suspense>\n\n\t\t\t<div\n\t\t\t\tref={this.gotMapRefLeaflet}\n\t\t\t\tclassName='map leaflet'\n\t\t\t></div>\n\n\t\t</div>)\n\t}\n}\n\nexport default withConicGradient(withGlobals(withLocalization(withTheme(MainMapMapbox))))\n","import React from 'react'\n\n// import MainMapLeaflet from './map/MainMapLeaflet.js'\nimport MainMapMapbox from './map/MainMapMapbox.js'\n\nconst Main = props => <MainMapMapbox {...props} />\n\nexport default Main\n","import React, { useEffect, lazy, Suspense } from 'react'\nimport './index.css'\n\nimport { Router, navigate } from '@reach/router'\n\n// import categories from '../../data/dist/categories.json'\n// import presets from '../../data/dist/presets.json'\n// import colors from '../../data/dist/colors.json'\n// import colorsByPreset from '../../data/dist/colorsByPreset.json'\n\nimport { /*Localized,*/ withLocalization } from '../Localized/'\n\nimport { withGlobals } from '../Globals/'\n\nimport { createMuiTheme, ThemeProvider, StylesProvider } from '@material-ui/core/styles'\n// import { CssBaseline } from '@material-ui/core'\n\nimport {\n\tFab,\n\tDrawer,\n} from '@material-ui/core'\nimport {\n\tCloseRounded as CloseIcon,\n\tMenuRounded as MenuIcon,\n\t// FilterList as FilterListIcon,\n\t// ExpandLess as ExpandLessIcon,\n} from '@material-ui/icons'\n\nimport Main from '../Main/'\n// import SearchBar from '../SearchBar/'\n// import Sidebar from '../Sidebar/'\n// import MainDrawerContent from '../MainDrawerContent/'\n\n\n// const MainMap = lazy(() => import('../MainMap'))\nconst SearchBar = lazy(() => import('../SearchBar'))\nconst Sidebar = lazy(() => import('../Sidebar'))\nconst MainDrawerContent = lazy(() => import('../MainDrawerContent'))\n\n\n\n\n\nconst defaultTheme = createMuiTheme({\n\tpalette: {\n\t\ttype: 'light',\n\t\tprimary: {\n\t\t\tmain: '#fff',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#000',\n\t\t},\n\t\taction: {\n\t\t\tactive: '#000',\n\t\t},\n\t\tbackground: {\n\t\t\tpaper: '#ffffff',\n\t\t\tdefault: '#f9f9f9',\n\t\t},\n\t\ttonalOffset: 0.05,\n\t},\n})\n\nfunction HandlePath(props) {\n\tconst action = props.action ||''\n\tconst docID = props.docID || ''\n\tconst onPathChanged = props.onPathChanged\n\n\tuseEffect(function(){\n\t\tif (!!onPathChanged) {\n\t\t\tonPathChanged({\n\t\t\t\taction,\n\t\t\t\tdocID,\n\t\t\t})\n\t\t}\n\t}, [action, docID, onPathChanged])\n\n\treturn null\n}\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tsearchBarValue: '',\n\t\t\tsidebarIsOpen: false,\n\t\t\tdoc: null,\n\t\t\tprefersDarkMode: false,\n\n\t\t\tfilters: {\n\t\t\t\tpresets: [],\n\t\t\t},\n\t\t\ttheme: defaultTheme,\n\n\t\t\tisSmallScreen: false,\n\n\t\t\taction: '',\n\t\t\tdocID: '',\n\n\t\t\tisMainDrawerOpen: false,\n\t\t}\n\n\t\tthis.functions = {}\n\n\t\tthis.setSearchBarValue = this.setSearchBarValue.bind(this)\n\t\tthis.setSidebarIsOpen = this.setSidebarIsOpen.bind(this)\n\t\tthis.filtersChanged = this.filtersChanged.bind(this)\n\t\tthis.setTheme = this.setTheme.bind(this)\n\n\t\tthis.check_color_scheme = this.check_color_scheme.bind(this)\n\t\tthis.check_small_screen = this.check_small_screen.bind(this)\n\n\t\tthis.setView = this.setView.bind(this)\n\t\tthis.flyTo = this.flyTo.bind(this)\n\t\tthis.getZoom = this.getZoom.bind(this)\n\n\t\tthis.dontFilterTheseIds = this.dontFilterTheseIds.bind(this)\n\t\tthis.onPathChanged = this.onPathChanged.bind(this)\n\n\t\tthis.closeMainDrawer = this.closeMainDrawer.bind(this)\n\t\tthis.toggleMainDrawer = this.toggleMainDrawer.bind(this)\n\n\t\tthis.closeSidebar = this.closeSidebar.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tif (!!window.matchMedia) {\n\t\t\t// https://react-theming.github.io/create-mui-theme\n\t\t\t// https://material.io/resources/color/#!/?view.left=0&view.right=0&primary.color=FAFAFA&secondary.color=263238\n\n\t\t\tthis.matcher_color_scheme = window.matchMedia('(prefers-color-scheme: dark)')\n\t\t\tthis.matcher_color_scheme.addListener(this.check_color_scheme)\n\t\t\tthis.check_color_scheme(this.matcher_color_scheme)\n\n\t\t\tthis.matcher_small_screen = window.matchMedia('(min-width: 600px)')\n\t\t\tthis.matcher_small_screen.addListener(this.check_small_screen)\n\t\t\tthis.check_small_screen(this.matcher_small_screen)\n\t\t}else{\n\t\t\tthis.setTheme(false)\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\tif (!!window.matchMedia) {\n\t\t\tthis.matcher_color_scheme.removeListener(this.check_color_scheme)\n\t\t\tthis.matcher_small_screen.removeListener(this.check_small_screen)\n\t\t}\n\t}\n\n\tsetTheme(prefersDarkMode){\n\t\tconst background_paper = prefersDarkMode ? '#202020' : '#ffffff'\n\t\tconst background_default = prefersDarkMode ? '#181818' : '#f9f9f9'\n\n\t\tconst secondary_main = prefersDarkMode ? '#448aff' : '#2962ff' // A200_A700\n\n\t\tconst error_main = prefersDarkMode ? '#f44' : '#e00'\n\n\t\tconst theme = createMuiTheme({\n\t\t\ttypography: {\n\t\t\t\tfontFamily: [\n\t\t\t\t\t'Ubuntu',\n\t\t\t\t\t'Helvetica',\n\t\t\t\t\t'Arial',\n\t\t\t\t\t'sans-serif',\n\t\t\t\t\t'\"Apple Color Emoji\"',\n\t\t\t\t\t'\"Segoe UI Emoji\"',\n\t\t\t\t\t'\"Segoe UI Symbol\"',\n\t\t\t\t].join(','),\n\t\t\t\th1: {\n\t\t\t\t\tfontSize: '98px',\n\t\t\t\t\tfontWeight: 'light',\n\t\t\t\t\tletterSpacing: '-1.5px',\n\t\t\t\t},\n\t\t\t\th2: {\n\t\t\t\t\tfontSize: '61px',\n\t\t\t\t\tfontWeight: 'light',\n\t\t\t\t\tletterSpacing: '-0.5px',\n\t\t\t\t},\n\t\t\t\th3: {\n\t\t\t\t\tfontSize: '49px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0px',\n\t\t\t\t},\n\t\t\t\th4: {\n\t\t\t\t\tfontSize: '35px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0.25px',\n\t\t\t\t},\n\t\t\t\th5: {\n\t\t\t\t\tfontSize: '24px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0px',\n\t\t\t\t},\n\t\t\t\th6: {\n\t\t\t\t\tfontSize: '20px',\n\t\t\t\t\tfontWeight: 'medium',\n\t\t\t\t\tletterSpacing: '0.015px',\n\t\t\t\t\t// letterSpacing: '0.15px',\n\t\t\t\t},\n\t\t\t\tsubtitle1: {\n\t\t\t\t\tfontSize: '16px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0.15px',\n\t\t\t\t},\n\t\t\t\tsubtitle2: {\n\t\t\t\t\tfontSize: '14px',\n\t\t\t\t\tfontWeight: 'medium',\n\t\t\t\t\tletterSpacing: '0.1px',\n\t\t\t\t},\n\t\t\t\tbody1: {\n\t\t\t\t\tfontSize: '16px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0.01px',\n\t\t\t\t\t// letterSpacing: '0.5px',\n\t\t\t\t},\n\t\t\t\tbody2: {\n\t\t\t\t\tfontSize: '14px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0.01px',\n\t\t\t\t\t// letterSpacing: '0.25px',\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\tfontSize: '14px',\n\t\t\t\t\tfontWeight: 'medium',\n\t\t\t\t\tletterSpacing: '0.25px',\n\t\t\t\t\t// letterSpacing: '1.25px',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '0.4px',\n\t\t\t\t},\n\t\t\t\toverline: {\n\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\tfontWeight: 'normal',\n\t\t\t\t\tletterSpacing: '1.5px',\n\t\t\t\t},\n\t\t\t},\n\t\t\tpalette: {\n\t\t\t\ttype: prefersDarkMode ? 'dark' : 'light',\n\t\t\t\tprimary: {\n\t\t\t\t\tmain: '#fff', // this.state.prefersDarkMode ? '#000' : '#fff' // '#fff'\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tmain: secondary_main,\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tactive: prefersDarkMode ? '#fff' : '#000',\n\t\t\t\t},\n\t\t\t\tbackground: {\n\t\t\t\t\tpaper: background_paper,\n\t\t\t\t\tdefault: background_default,\n\t\t\t\t},\n\t\t\t\terror: {\n\t\t\t\t\tmain: error_main,\n\t\t\t\t},\n\t\t\t\ttonalOffset: 0.05,\n\t\t\t},\n\t\t\tshape: {\n\t\t\t\tborderRadius: 8,\n\t\t\t},\n\t\t\ttransitions: {\n\t\t\t\tduration: {\n\t\t\t\t\tcomplex: 200, // 375,\n\t\t\t\t\tenteringScreen: 200, // 225,\n\t\t\t\t\tleavingScreen: 200, // 195,\n\t\t\t\t\tshort: 200, // 250,\n\t\t\t\t\tshorter: 200, // 200,\n\t\t\t\t\tshortest: 200, // 150,\n\t\t\t\t\tstandard: 200, // 300,\n\t\t\t\t},\n\t\t\t\teasing: {\n\t\t\t\t\teaseIn: \"ease\", // \"cubic-bezier(0.4, 0, 1, 1)\",\n\t\t\t\t\teaseInOut: \"ease\", // \"cubic-bezier(0.4, 0, 0.2, 1)\"\n\t\t\t\t\teaseOut: \"ease\", // \"cubic-bezier(0.0, 0, 0.2, 1)\",\n\t\t\t\t\tsharp: \"ease\", // \"cubic-bezier(0.4, 0, 0.6, 1)\",\n\t\t\t\t},\n\t\t\t},\n\t\t\toverrides: {\n\t\t\t\tMuiInputLabel: {\n\t\t\t\t\t'root': {\n\t\t\t\t\t\ttextOverflow: 'ellipsis',\n\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\twhiteSpace: 'nowrap',\n\t\t\t\t\t\tright: '16px',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tMuiLink: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tcolor: secondary_main,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tMuiFab: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tbackgroundColor: background_paper,\n\t\t\t\t\t\tcolor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\ttransition: 'background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\tbackgroundColor: background_default,\n\t\t\t\t\t\t\tcolor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tsecondary: {\n\t\t\t\t\t\tbackgroundColor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\tcolor: background_paper,\n\t\t\t\t\t\ttransition: 'opacity 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\topacity: 0.8,\n\t\t\t\t\t\t\tbackgroundColor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\t\tcolor: background_default,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\n\t\tthis.setState({theme})\n\t}\n\tcheck_color_scheme(event){\n\t\tif(event.matches) {\n\t\t\tthis.setTheme(true)\n\t\t} else {\n\t\t\tthis.setTheme(false)\n\t\t}\n\t}\n\tcheck_small_screen(event){\n\t\tif (event.matches) {\n\t\t\tthis.props.globals.isSmallScreen = false\n\t\t}else{\n\t\t\tthis.props.globals.isSmallScreen = true\n\t\t}\n\n\t\tthis.setState((state, props) => {\n\t\t\tif (this.props.globals.isSmallScreen !== state.isSmallScreen) {\n\t\t\t\treturn {isSmallScreen: this.props.globals.isSmallScreen}\n\t\t\t}\n\t\t\treturn undefined\n\t\t})\n\t\t\n\t\t// const viewport_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n\t}\n\n\tsaveFunctions(componentName, functionsObject){\n\t\tthis.functions[componentName] = functionsObject\n\t}\n\n\tsetSearchBarValue(value){\n\t\t// this.setState({searchBarValue:value})\n\t}\n\n\tsetSidebarIsOpen(value){\n\t\t// const center = this.functions['Main']['map'].getCenter()\n\t\t// const zoom = this.functions['Main']['map'].getZoom()\n\n\t\tthis.props.globals.sidebarIsOpen = value\n\n\t\tthis.functions['Main']['map'].setPadding({\n\t\t\tleft: (value ? 400 : 0),\n\t\t})\n\n\t\tthis.setState({\n\t\t\tmapIsResizing: true,\n\t\t\tsidebarIsOpen: value,\n\t\t}, ()=>{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.setState({mapIsResizing: false})\n\t\t\t}, 300)\n\t\t\t// this.check_small_screen()\n\n\t\t\t// if (new Date()*1 - this.props.globals.pageOpenTS*1 > 2000) {\n\t\t\t// \t// this.functions['Main']['map'].invalidateSize()\n\t\t\t// \tsetTimeout(()=>{\n\t\t\t// \t\t// const center2 = this.functions['Main']['map'].getCenter()\n\t\t\t// \t\tthis.functions['Main']['map'].flyTo(center, Math.round(zoom), {\n\t\t\t// \t\t\tanimate: true,\n\t\t\t// \t\t\tduration: 1.5,\n\t\t\t// \t\t})\n\t\t\t// \t\t// this.functions['Main']['map'].invalidateSize()\n\t\t\t// \t}, 500)\n\t\t\t// }\n\n\t\t\t// if (new Date()*1 - this.props.globals.pageOpenTS*1 < 2000) {\n\t\t\t// \tthis.functions['Main']['map'].panTo(center, {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }else{\n\t\t\t// \tthis.functions['Main']['map'].panTo(\n\t\t\t// \t\tthis.functions['Main']['map'].getCenter(), {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }\n\t\t})\n\t}\n\n\tsetView(...attr){\n\t\treturn this.functions['Main']['map'].setView(...attr)\n\t}\n\tflyTo(...attr){\n\t\treturn this.functions['Main']['map'].flyTo(...attr)\n\t}\n\tgetZoom(...attr){\n\t\treturn this.functions['Main']['map'].getZoom(...attr)\n\t}\n\n\tfiltersChanged(newFilters){\n\t\tthis.setState((state, props) => ({\n\t\t\tfilters:{\n\t\t\t\t...state.filters,\n\t\t\t\t...newFilters,\n\t\t\t}\n\t\t}))\n\t}\n\n\tdontFilterTheseIds(ids){\n\t\tthis.setState((state, props) => ({\n\t\t\tfilters:{\n\t\t\t\t...state.filters,\n\t\t\t\tids,\n\t\t\t}\n\t\t}))\n\t}\n\n\tonPathChanged(pathVars){\n\t\tthis.setState(pathVars)\n\t}\n\n\tcloseMainDrawer(){\n\t\tthis.setState({isMainDrawerOpen:false})\n\t}\n\ttoggleMainDrawer(){\n\t\tthis.setState((state,props)=>{\n\t\t\treturn {isMainDrawerOpen:!state.isMainDrawerOpen}\n\t\t})\n\t}\n\n\tasync closeSidebar(){\n\t\tawait navigate(`/`)\n\t\tthis.dontFilterTheseIds([])\n\t\tthis.setSidebarIsOpen(false)\n\t}\n\n\trender() {\n\t\treturn (<div\n\t\t\tclassName={\n\t\t\t\t'appClassWrapper '\n\t\t\t\t+(this.state.sidebarIsOpen ? 'sidebarIsOpen ' : 'sidebarIsClosed')\n\t\t\t}\n\t\t>\n\t\t\t<ThemeProvider theme={this.state.theme}>\n\t\t\t<StylesProvider injectFirst>\n\n\t\t\t<Router primary={false}>\n\t\t\t\t<HandlePath\n\t\t\t\t\tpath=\"/:action/*docID\"\n\t\t\t\t\tonPathChanged={this.onPathChanged}\n\t\t\t\t/>\n\t\t\t\t<HandlePath\n\t\t\t\t\tpath=\"/\"\n\t\t\t\t\tonPathChanged={this.onPathChanged}\n\t\t\t\t/>\n\t\t\t</Router>\n\n\n\t\t\t<Drawer\n\t\t\t\topen={this.state.isMainDrawerOpen}\n\t\t\t\tonClose={this.toggleMainDrawer}\n\t\t\t>\n\t\t\t\t<Suspense fallback={this.props.globals.renderLazyLoader()}>\n\t\t\t\t\t<MainDrawerContent onClose={this.closeMainDrawer}/>\n\t\t\t\t</Suspense>\n\t\t\t</Drawer>\n\n\t\t\t{/*<Fab\n\t\t\t\taria-label={this.props.getString('open_menu_aria_label')}\n\t\t\t\ttitle={this.props.getString('open_menu_aria_label')}\n\t\t\t\tvariant=\"extended\"\n\t\t\t\tclassName=\"mainMenuFab\"\n\t\t\t\tonClick={this.toggleMainDrawer}\n\t\t\t>\n\t\t\t\t<MenuIcon style={{marginRight:'8px'}} />\n\t\t\t\tQueerMap <Localized\n\t\t\t\t\tid=\"by_brandname_link\"\n\t\t\t\t\telems={{\n\t\t\t\t\t\tmainlink: null,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Fab>*/}\n\n\n\t\t\t<Fab\n\t\t\t\taria-label={this.props.getString('open_menu_aria_label')}\n\t\t\t\ttitle={this.props.getString('open_menu_aria_label')}\n\t\t\t\tvariant=\"round\"\n\t\t\t\tsize=\"medium\"\n\t\t\t\tclassName=\"mainMenuFab\"\n\t\t\t\tonClick={this.toggleMainDrawer}\n\t\t\t>\n\t\t\t\t<MenuIcon />\n\t\t\t</Fab>\n\n\t\t\t<Fab\n\t\t\t\taria-label={this.props.getString('close_sidebar_aria_label')}\n\t\t\t\ttitle={this.props.getString('close_sidebar_aria_label')}\n\t\t\t\tvariant=\"extended\"\n\t\t\t\tclassName=\"closeSidebarFab\"\n\t\t\t\tonClick={this.closeSidebar}\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: (this.state.sidebarIsOpen ? 'flex' : 'none'),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CloseIcon />\n\t\t\t</Fab>\n\n\n\t\t\t<Suspense fallback={this.props.globals.renderLazyLoader()}>\n\n\t\t\t<SearchBar\n\t\t\t\tclassName=\"SearchBar\"\n\t\t\t\tvalue={this.state.searchBarValue}\n\t\t\t\tsidebarIsOpen={this.state.sidebarIsOpen}\n\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t\tonDontFilterTheseIds={this.dontFilterTheseIds}\n\t\t\t/>\n\n\t\t\t<Sidebar\n\t\t\t\taction={this.state.action}\n\t\t\t\tdocID={this.state.docID}\n\n\t\t\t\tclassName=\"Sidebar\"\n\n\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\n\t\t\t\tonSetView={this.setView}\n\t\t\t\tonFlyTo={this.flyTo}\n\t\t\t\tonGetZoom={this.getZoom}\n\n\t\t\t\tonDontFilterTheseIds={this.dontFilterTheseIds}\n\t\t\t/>\n\n\t\t\t</Suspense>\n\t\t\t\n\t\t\t<Main\n\t\t\t\tclassName={`page ${this.state.sidebarIsOpen ? 'sidebarIsOpen' : ''}`}\n\t\t\t\tonFunctions={(...attr)=>{this.saveFunctions('Main',...attr)}}\n\t\t\t\tfilters={this.state.filters}\n\t\t\t\tmapIsResizing={this.state.mapIsResizing}\n\t\t\t\tsidebarIsOpen={this.state.sidebarIsOpen}\n\t\t\t\tonFiltersChanged={this.filtersChanged}\n\t\t\t/>\n\n\t\t</StylesProvider>\n\t\t</ThemeProvider>\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withLocalization(App))","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\n// import * as serviceWorker from './serviceWorker'\n\nimport App from './components/App/'\nimport { GlobalsProvider } from './components/Globals/'\n\nReactDOM.render(\n\t<GlobalsProvider>\n\t\t<App />\n\t</GlobalsProvider>,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\n","import React from 'react'\nimport {\n\tLocalized as LocalizedOriginal,\n\t// withLocalization,\n} from '@fluent/react'\n\nimport { FluentContext } from '../../../node_modules/@fluent/react/esm/context.js'\n\nconst Localized = props => (\n\t<LocalizedOriginal\n\t\tkey={props.id}\n\t\t{...props}\n\t\telems={{\n\t\t\tbr: <br />,\n\t\t\t...props.elems,\n\t\t}}\n\t>\n\t\t<React.Fragment>{props.children}</React.Fragment>\n\t</LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n    function WithLocalization(props) {\n        const l10n = React.useContext(FluentContext)\n\n        const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n        return React.createElement(Inner, { getString, ...props })\n    }\n    return WithLocalization\n}\n\nexport {\n\twithLocalization,\n\tLocalized,\n\tLocalized as default,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/","import React from 'react'\n\n// https://projectfluent.org/play/\n\n// import {LocalizationProvider,Localized} from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nconst _supportedLocales_ = [\n\t'ar',\n\t'es',\n\t'it',\n\t'ja',\n\t'ko',\n\t'pt',\n\t'ru',\n\t'zh-Hans',\n\t'zh-Hant',\n\n\t'fr',\n\t'de',\n\t'fil',\n\t'vi',\n\t'en_GB',\n\t'en_US',\n\t'en',\n]\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n\tconst path = await import('./locales/'+locale+'.ftl')\n\n\tconst response = await fetch(path.default)\n\tconst messages = await response.text()\n\n\treturn { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles(){\n\tconst bundle = new FluentBundle('')\n\tbundle.addResource(new FluentResource(''))\n\treturn new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n\tconst fetched = await Promise.all(\n\t\tcurrentLocales.map(fetchMessages)\n\t)\n\tconst messages = fetched.reduce(\n\t\t(obj, cur) => Object.assign(obj, cur)\n\t)\n\n\treturn function* generateBundles() {\n\t\tfor (const locale of currentLocales) {\n\t\t\tconst bundle = new FluentBundle(locale)\n\t\t\tbundle.addResource(messages[locale])\n\t\t\tyield bundle\n\t\t}\n\t}\n}\n\nexport class AppLocalizationProvider extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tbundles: getDefaultBundles(),\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst currentLocales = negotiateLanguages(\n\t\t\tthis.props.userLocales,\n\t\t\t_supportedLocales_,\n\t\t\t{ defaultLocale: _defaultLocale_ }\n\t\t)\n\n\t\tconst generateBundles = await createMessagesGenerator(currentLocales)\n\t\tthis.setState({ bundles: new ReactLocalization(generateBundles()) })\n\t}\n\n\trender() {\n\t\tconst { children } = this.props\n\t\tconst { bundles } = this.state\n\n\t\tif (!bundles) {\n\t\t\t// Show a loader.\n\t\t\treturn <div>Loading texts</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<LocalizationProvider l10n={bundles}>\n\t\t\t\t{children}\n\t\t\t</LocalizationProvider>\n\t\t)\n\t}\n}","import React from 'react'\n\nimport store from 'store'\n\n\n\nconst default_privacy_level_key = 'essentials'\nconst privacy_level_keys = {\n\tessentials: 'privacy_consent_essentials',\n\ttracking: 'privacy_consent_tracking',\n}\n\n\n\nconst storage_functions = {\n\tget: (...args) => {\n\t\treturn store.get(...args)\n\t},\n\n\tset: (key, value, privacy_level_key) => {\n\t\t// this is a wrapper to check if the user consented to storing data on their device\n\t\tif (!(!!privacy_level_keys[key])) { // prevent overwriting of privacy settings\n\t\t\tif (!(!!privacy_level_key)) {\n\t\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t\t}\n\n\t\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\t\tconst privacy_level_consent = store.get(privacy_level_keys[privacy_level_key])\n\t\t\t\tif (privacy_level_consent === true) { // check if the user consented\n\t\t\t\t\tstore.set(key, value)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tsetPrivacy: (privacy_level_key, value) => {\n\t\treturn new Promise((resolve,reject)=>{\n\t\t\tif (!(!!privacy_level_key)) {\n\t\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t\t}\n\n\t\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\t\tstore.set(privacy_level_keys[privacy_level_key], !!value) // store as boolean\n\t\t\t\tresolve()\n\t\t\t} else {\n\t\t\t\treject()\n\t\t\t}\n\t\t})\n\t},\n\tgetPrivacy: (privacy_level_key) => {\n\t\tif (!(!!privacy_level_key)) {\n\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t}\n\n\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\treturn store.get(privacy_level_keys[privacy_level_key]) === true\n\t\t}\n\t\treturn false\n\t},\n}\n\nfunction withLocalStorage(Component) {\n\treturn React.forwardRef(function(props, ref){\n\t\treturn <Component store={storage_functions} ref={ref} {...props} />\n\t})\n}\n\nexport { withLocalStorage }","import React from 'react'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider } from '../../l10n.js'\n\nimport local_ip from '../../.env.local_ip.json'\n\nimport {\n\tApolloClient,\n\tHttpLink,\n\tInMemoryCache,\n} from '@apollo/client'\nimport { persistCache } from 'apollo-cache-persist'\n\nimport { withLocalStorage } from '../LocalStorage/'\n\nimport {\n\twhoami as query_whoami,\n\tcountries as query_countries,\n} from '../../queries.js'\n\nconst isDevEnvironment = (local_ip !== '')\n\n\nfunction getCookie(name){\n\tconst match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'))\n\tif (match) {\n\t\treturn match[2]\n\t}\n\treturn null\n}\n\nasync function getInitialGlobalState(callback){\n\tconst cache = new InMemoryCache()\n\n\ttry {\n\t\t// await before instantiating ApolloClient, else queries might run before the cache is persisted\n\t\tawait persistCache({\n\t\t\tcache,\n\t\t\tstorage: window.localStorage,\n\t\t})\n\t} catch (error) {\n\t\tconsole.error('Error restoring Apollo cache', error)\n\t}\n\t\n\t\n\tconst globalState = {}\n\n\tconst __session = getCookie('__session')\n\n\tglobalState.graphql = new ApolloClient({\n\t\tcache,\n\t\tlink: new HttpLink({\n\t\t\tcredentials: 'omit',\n\t\t\theaders: {\n\t\t\t\t'-x-session': __session,\n\t\t\t},\n\t\t\turi: (\n\t\t\t\tisDevEnvironment\n\t\t\t\t? 'http://0.0.0.0:11692/graphql/v1/' // `http://${local_ip}:5000/qiekub/us-central1/graphql/graphql/v1`\n\t\t\t\t: `https://api.qiekub.org/graphql/v1/`\n\t\t\t),\n\t\t})\n\t})\n\n\tif (!!__session) {\n\t\tglobalState.graphql.query({\n\t\t\tquery: query_whoami,\n\t\t\tfetchPolicy: 'cache-first',\n\t\t}).then(result => {\n\t\t\tglobalState.profileID = result.data.whoami\n\t\t}).catch(error => {\n\t\t\tconsole.error(error)\n\t\t}).finally(() => {\n\t\t\tglobalState.globalStateFinishedLoading = true\n\t\t\tcallback(globalState)\n\t\t})\n\t}else{\n\t\tglobalState.globalStateFinishedLoading = true\n\t\tcallback(globalState)\n\t}\n}\n\n\n\n// ----------------------------------------------------------------\n\nconst GlobalsContext = React.createContext()\n\nconst renderLazyLoader = () => <>Loading</>\n\nclass GlobalsProvider extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tglobalStateFinishedLoading: false,\n\n\t\t\tpageOpenTS: new Date(),\n\t\t\tprofileID: null,\n\t\n\t\t\tlocal_ip,\n\t\t\tisDevEnvironment,\n\t\n\t\t\ttransitionDuration: 300,\n\t\t\tisSmallScreen: true,\n\t\t\tsidebarIsOpen: false,\n\n\t\t\tmainMapFunctions: undefined,\n\n\t\t\tcookieOptions: {\n\t\t\t\tpath: '/',\n\t\t\t\tmaxAge: 31557600, // expires in one year // these cookies doesn't exist for ever, cause they are used as a simple spam protection. Even one month would probably be enough.\n\t\t\t\t...(\n\t\t\t\t\tisDevEnvironment\n\t\t\t\t\t? undefined\n\t\t\t\t\t: {\n\t\t\t\t\t\tdomain: '.qiekub.org',\n\t\t\t\t\t\tsecure: true,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t},\n\n\t\t\tuserLocales: /*['de'] ||*/ navigator.languages,\n\n\t\t\temojis: {\n\t\t\t\taudience_queer_only: '',\n\t\t\t\taudience_queer_primary: '',\n\t\t\t\taudience_queer_welcome: '',\n\t\t\t},\n\n\t\t\trenderLazyLoader,\n\t\t}\n\t\t// this.state = {\n\t\t// \t...globalState,\n\t\t// \tset: (...attrs) => {\n\t\t// \t\tthis.setState(...attrs)\n\t\t// \t}\n\t\t// }\n\n\t\tthis.loadedCountries = false\n\t\tthis.country_by_iso_a2 = {}\n\t\tthis.country_by_iso_a3 = {} \n\t\tthis.saved_country_callbacks = []\n\n\t\tthis.loadCountries = this.loadCountries.bind(this)\n\t\tthis.getCountryByAlpha2 = this.getCountryByAlpha2.bind(this)\n\t\tthis.getCountryByAlpha3 = this.getCountryByAlpha3.bind(this)\n\t\tthis.convert_alpha3_to_alpha2 = this.convert_alpha3_to_alpha2.bind(this)\n\t\tthis.convert_alpha2_to_alpha3 = this.convert_alpha2_to_alpha3.bind(this)\n\t\tthis.getCountryByCode = this.getCountryByCode.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tgetInitialGlobalState(globalState=>{\n\t\t\tthis.setState({\n\t\t\t\t...globalState,\n\t\t\t\tgetCountryByAlpha2: this.getCountryByAlpha2,\n\t\t\t\tgetCountryByAlpha3: this.getCountryByAlpha3,\n\t\t\t\tconvert_alpha3_to_alpha2: this.convert_alpha3_to_alpha2,\n\t\t\t\tconvert_alpha2_to_alpha3: this.convert_alpha2_to_alpha3,\n\t\t\t\tgetCountryByCode: this.getCountryByCode,\n\t\t\t}, ()=>{\n\t\t\t\tthis.loadCountries()\n\t\t\t})\n\t\t})\n\t}\n\n\n\tloadCountries(callback){\n\t\tif (callback) {\n\t\t\tthis.saved_country_callbacks.push(callback)\n\t\t}\n\n\t\tif (!this.loadedCountries) {\n\t\t\tif (!!this.state.graphql) {\n\t\t\t\tthis.state.graphql.watchQuery({\n\t\t\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\t\t\tquery: query_countries,\n\t\t\t\t\tvariables: {\n\t\t\t\t\t\twantedTags: [\n\t\t\t\t\t\t\t// 'ISO3166-1',\n\t\t\t\t\t\t\t'ISO3166-1:alpha2',\n\t\t\t\t\t\t\t'ISO3166-1:alpha3',\n\t\t\t\t\t\t\t// 'ISO3166-1:numeric',\n\t\t\t\t\t\t\t// 'timezone',\n\t\t\t\t\t\t],\n\t\t\t\t\t\tlanguages: navigator.languages,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.subscribe(({data}) => {\n\t\t\t\t\tif (!!data && !!data.countries) {\n\t\t\t\t\t\tconst country_by_iso_a2 = {}\n\t\t\t\t\t\tconst country_by_iso_a3 = {}\n\t\t\n\t\t\t\t\t\tfor (const doc of data.countries) {\n\t\t\t\t\t\t\tlet country_key_a2 = doc.properties.tags['ISO3166-1:alpha2']\n\t\t\t\t\t\t\tif (country_key_a2) {\n\t\t\t\t\t\t\t\tcountry_key_a2 = country_key_a2.toUpperCase()\n\t\t\t\t\t\t\t\tcountry_by_iso_a2[country_key_a2] = doc\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet country_key_a3 = doc.properties.tags['ISO3166-1:alpha3']\n\t\t\t\t\t\t\tif (country_key_a3) {\n\t\t\t\t\t\t\t\tcountry_key_a3 = country_key_a3.toUpperCase()\n\t\t\t\t\t\t\t\tcountry_by_iso_a3[country_key_a3] = doc\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\tthis.country_by_iso_a2 = country_by_iso_a2\n\t\t\t\t\t\tthis.country_by_iso_a3 = country_by_iso_a3\n\n\t\t\t\t\t\tthis.loadedCountries = true\n\t\n\t\t\t\t\t\tfor (const saved_country_callback of this.saved_country_callbacks) {\n\t\t\t\t\t\t\tsaved_country_callback()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}else{\n\t\t\tfor (const saved_country_callback of this.saved_country_callbacks) {\n\t\t\t\tsaved_country_callback()\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCountryByAlpha2(alpha2, callback){\n\t\tthis.loadCountries(()=>{\n\t\t\talpha2 = alpha2.toUpperCase()\n\t\t\tcallback(this.country_by_iso_a2[alpha2])\n\t\t})\n\t}\n\tgetCountryByAlpha3(alpha3, callback){\n\t\tthis.loadCountries(()=>{\n\t\t\talpha3 = alpha3.toUpperCase()\n\t\t\tcallback(this.country_by_iso_a3[alpha3])\n\t\t})\n\t}\n\n\tconvert_alpha3_to_alpha2(alpha3, callback){\n\t\tthis.getCountryByAlpha3(alpha3, countryDoc=>{\n\t\t\tcallback(countryDoc.properties.tags['ISO3166-1:alpha2'])\n\t\t})\n\t}\n\tconvert_alpha2_to_alpha3(alpha2, callback){\n\t\tthis.getCountryByAlpha2(alpha2, countryDoc=>{\n\t\t\tcallback(countryDoc.properties.tags['ISO3166-1:alpha3'])\n\t\t})\n\t}\n\n\tgetCountryByCode(iso_a3, callback){\n\t\tthis.getCountryByAlpha3(iso_a3, callback)\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<GlobalsContext.Provider\n\t\t\t\tkey=\"GlobalsContext.Provider\"\n\t\t\t\tvalue={this.state}\n\t\t\t>\n\t\t\t\t<AppLocalizationProvider key=\"AppLocalizationProvider\" userLocales={this.state.userLocales}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.globalStateFinishedLoading\n\t\t\t\t\t\t? this.props.children\n\t\t\t\t\t\t: <>Loading cache data</>\n\t\t\t\t\t}\n\t\t\t\t</AppLocalizationProvider>\n\t\t\t</GlobalsContext.Provider>\n\t\t)\n\t}\n}\n\nfunction useGlobals() {\n\treturn React.useContext(GlobalsContext)\n}\n\nfunction withGlobals(Component) {\n\tconst ComponentWrapped = withLocalStorage(Component)\n\t\n\treturn React.forwardRef(function(props, ref){\n\t\tconst globals = useGlobals()\n\t\treturn <ComponentWrapped globals={globals} ref={ref} {...props} />\n\t})\n}\n\nexport default GlobalsContext\n\nexport { GlobalsContext, GlobalsProvider, withGlobals, useGlobals }\n\n\n","import ilga_dataset from './data/dist/ilga_2019.json'\n\nimport { negotiateLanguages } from '@fluent/langneg'\nimport address_formats from './data/dist/address_formats.json'\nconst addressFormats = address_formats.map(item => ({\n\t...item,\n\tkeys: [].concat(...item.format),\n}))\n\n\nexport function uuidv4() {\n\t// source: https://stackoverflow.com/a/2117523/2387277\n\t// source: https://stackoverflow.com/questions/105034/how-to-create-guid-uuid\n\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n\t\t// eslint-disable-next-line\n\t\t(c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n\t)\n}\n\n\n\nexport function getTranslation(texts, userLocales = []) {\n\t// texts = {\n\t// \ten: 'hello world'\n\t// }\n\n\tif (typeof texts === 'object') {\n\t\tconst keys = Object.keys(texts)\n\t\tif (keys.length > 0) {\n\t\t\tconst currentLocales = negotiateLanguages(\n\t\t\t\tuserLocales,\n\t\t\t\tkeys,\n\t\t\t\t{}\n\t\t\t)\n\n\t\t\tif (currentLocales.length > 0) {\n\t\t\t\treturn texts[currentLocales[0]]\n\t\t\t}\n\t\t\treturn texts[keys[0]]\n\t\t}\n\t}\n\n\treturn ''\n}\nexport function getTranslationFromArray(texts_array, ...attrs) {\n\t// texts_array = [\n\t// \tlanguage: 'en',\n\t// \ttext: 'hello world',\n\t// ]\n\n\tif (!Array.isArray(texts_array)) {\n\t\treturn ''\n\t}\n\n\tconst text_object = {}\n\tfor (const text of texts_array) {\n\t\ttext_object[text.language || ''] = text.text\n\t}\n\n\treturn getTranslation(text_object, ...attrs)\n}\n\n\n\nexport function getPreset(tags,presets) {\n\tconst tags_keys = Object.keys(tags)\n\tfor (const preset_key in presets) {\n\t\tconst preset_tags = presets[preset_key].tags\n\t\tconst preset_tags_keys = Object.keys(preset_tags)\n\n\t\tconst common_keys = preset_tags_keys.filter(key => tags_keys.includes(key))\n\n\t\tif (common_keys.length === preset_tags_keys.length) {\n\t\t\tconst okay_keys = common_keys.filter(key => preset_tags[key] === '*' || tags[key].includes(preset_tags[key]))\n\t\t\tif (okay_keys.length === preset_tags_keys.length) {\n\t\t\t\treturn {\n\t\t\t\t\tkey: preset_key,\n\t\t\t\t\t...presets[preset_key],\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\treturn presets.default\n}\n\n\nexport function getColorByPreset(preset_key,colorsByPreset_sorted){\n\tfor (const pair of colorsByPreset_sorted) {\n\t\tif (preset_key.startsWith(pair[0])) {\n\t\t\treturn pair[1]\n\t\t\t// break\n\t\t}\n\t}\n}\n\n\n\nexport function addAddressFormatDefaults(addressFormat){\n\t// format-defaults from ID\n\taddressFormat.format = addressFormat.format || [\n\t\t['housenumber', 'street'],\n\t\t['city', 'postcode']\n\t]\n\n\t// widths-defaults from ID\n\taddressFormat.widths = addressFormat.widths || {\n\t\thousenumber: 1/3, street: 2/3, unit: 1/3,\n\t\tcity: 2/3, state: 1/3, postcode: 1/3,\n\t\t// housenumber: 1/3, street: 2/3,\n\t\t// city: 2/3, state: 1/4, postcode: 1/3,\n\t}\n\n\taddressFormat.keys = addressFormat.keys || [].concat(...addressFormat.format)\n\n\treturn addressFormat\n}\n\nexport function getAddressFormatDefault(){\n\tfor (const addressFormat of addressFormats) {\n\t\tif (addressFormat.countryCodes.length === 0) {\n\t\t\treturn addAddressFormatDefaults(addressFormat)\n\t\t} \n\t}\n\n\treturn null\n}\n\nexport function getAddressFormatByCountryCode(countryCode, showAllFields){\n\tcountryCode = (countryCode || '').toUpperCase()\n\n\tlet addressFormat2return = null\n\n\tfor (const addressFormat of addressFormats) {\n\t\tif (addressFormat.countryCodes.includes(countryCode)) {\n\t\t\taddressFormat2return = addAddressFormatDefaults(addressFormat)\n\t\t\tbreak\n\t\t}\n\t}\n\n\tif (addressFormat2return === null) {\n\t\taddressFormat2return = getAddressFormatDefault()\n\t}\n\n\taddressFormat2return = JSON.parse(JSON.stringify(addressFormat2return)) // clone the object as we are using push afterwards\n\n\tif (showAllFields && addressFormat2return !== null) {\n\t\tconst alreadInUseKeys = addressFormat2return.keys\n\n\t\tfor (const addressFormat of addressFormats) {\n\t\t\tif (addressFormat.countryCodes.includes('_ALL_FIELDS_')) {\n\t\t\t\tconst missingKeys = addressFormat.keys\n\t\t\t\t\n\t\t\t\tconst keys2add = missingKeys.filter(key => !alreadInUseKeys.includes(key))\n\t\t\t\tfor (const key of keys2add) {\n\t\t\t\t\taddressFormat2return.format.push([key])\n\t\t\t\t\taddressFormat2return.widths[key] = 1\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\treturn addressFormat2return\n}\n\nexport function getAddressFormatByTags(tags) {\n\tconst addr_keys = Object.keys(tags)\n\t.filter(key => key.startsWith('addr:'))\n\t.map(key => key.split('addr:')[1])\n\n\treturn getAddressFormatBySubkeys(addr_keys)\n}\n\nexport function getAddressFormatBySubkeys(addr_keys) {\n\tlet lastMatchCount = 0\n\tlet lastAddressFormat = null\n\tfor (const addressFormat of addressFormats) {\n\t\tif (!addressFormat.countryCodes.includes('_ALL_FIELDS_')) {\n\t\t\tconst thisMatchCount = addr_keys.filter(value => addressFormat.keys.includes(value)).length\n\t\t\t\n\t\t\tif (thisMatchCount >= lastMatchCount) {\n\t\t\t\tlastMatchCount = thisMatchCount\n\t\t\t\tlastAddressFormat = addressFormat\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (!!lastAddressFormat) {\n\t\treturn addAddressFormatDefaults(lastAddressFormat)\n\t}\n\t\n\treturn null\n}\n\n\nexport function getWantedTagsList(presets){\n\treturn [...new Set([].concat(...Object.values(presets).map(preset=>Object.keys(preset.tags))))]\n}\n\n\nexport function getILGA(alpha3code){\n\t\tconst TR = {} // TR means \"to return\"\n\n\t\tif (!(!!alpha3code)) {\n\t\t\treturn null\n\t\t}\n\t\t\n\t\t\n\t\tconst ilga = ilga_dataset[alpha3code]\n\n\t\tif (!(!!ilga)) {\n\t\t\treturn null\n\t\t}\n\t\t\n\t\tTR.ilga = ilga\n\n\n\t\t// ### criminalisation:legality\n\t\tconst legality_values = [\n\t\t\t'legal_for_all',\n\t\t\t'legal_for_males',\n\t\t\t'legal_for_female',\n\t\t\t'illegal_for_all',\n\t\t\t'illegal_for_males',\n\t\t\t'illegal_for_female',\n\t\t\t'unknown',\n\t\t]\n\n\t\tconst legality_key = 'criminalisation:legality'\n\t\tconst gender_key = 'criminalisation:legality:by_gender'\n\n\t\tTR.criminalisation = {}\n\t\tTR.criminalisation.description = 'criminalisation:legality:unknown'\n\t\tif (\n\t\t\tilga.hasOwnProperty(gender_key)\n\t\t\t&& legality_values.includes(ilga[gender_key])\n\t\t) {\n\t\t\tTR.criminalisation.description = 'criminalisation:legality:'+ilga[gender_key]\n\t\t} else if (ilga.hasOwnProperty(legality_key)) {\n\t\t\tif (ilga[legality_key] === true) {\n\t\t\t\tTR.criminalisation.description = 'criminalisation:legality:legal_for_all'\n\t\t\t} else if (ilga[legality_key] === false) {\n\t\t\t\tTR.criminalisation.description = 'criminalisation:legality:illegal_for_all'\n\t\t\t}\n\t\t}\n\n\t\tTR.criminalisation.status = null\n\t\tif (TR.criminalisation.description === 'criminalisation:legality:legal_for_all') {\n\t\t\tTR.criminalisation.status = 'great'\n\t\t} else if (TR.criminalisation.description === 'criminalisation:legality:illegal_for_all') {\n\t\t\tTR.criminalisation.status = 'bad'\n\t\t} else if (TR.criminalisation.description !== 'criminalisation:legality:unknown') {\n\t\t\tTR.criminalisation.status = 'ok'\n\t\t}\n\n\t\tTR.criminalisation.description = [TR.criminalisation.description]\n\n\n\t\t// ### criminalisation:penalty\n\t\tTR.penalty = {}\n\t\tTR.penalty.description = []\n\t\tTR.penalty.vars = {}\n\t\tconst penalty_keys = Object.keys(ilga)\n\t\t.filter(key => key.startsWith('criminalisation:penalty:max:'))\n\t\t.sort((a, b) => a-b)\n\t\t\t\n\t\tfor (const key of penalty_keys) {\n\t\t\tif (ilga[key] === true) {\n\t\t\t\tTR.penalty.description.push(key)\n\t\t\t} else if (!isNaN(ilga[key]) && ilga[key] > 0) {\n\t\t\t\tTR.penalty.description.push('criminalisation:penalty:max:years')\n\t\t\t\tTR.penalty.vars.years = ilga[key]\n\t\t\t}\n\t\t}\n\n\t\tTR.penalty.status = null\n\t\tif (TR.penalty.description.length === 0) {\n\t\t\tTR.penalty.status = 'great'\n\t\t\tTR.penalty.description.push('criminalisation:penalty:none')\n\t\t} else if (TR.penalty.description.length > 0) {\n\t\t\tif (\n\t\t\t\tTR.penalty.description.includes('criminalisation:penalty:max:death')\n\t\t\t\t|| TR.penalty.description.includes('criminalisation:penalty:max:lifetime')\n\t\t\t) {\n\t\t\t\tTR.penalty.status = 'bad'\n\t\t\t}else{\n\t\t\t\tTR.penalty.status = 'ok'\n\t\t\t}\n\t\t}\n\n\n\t\t// ### protection\n\t\tTR.protection = {}\n\t\tTR.protection.description = []\n\t\tconst protection_keys = Object.keys(ilga)\n\t\t.filter(key => key.startsWith('protection:'))\n\t\t.sort((a, b) => a-b)\n\t\t\t\n\t\tfor (const key of protection_keys) {\n\t\t\tif (ilga[key] === true) {\n\t\t\t\tTR.protection.description.push(key)\n\t\t\t}\n\t\t}\n\n\t\tTR.protection.status = null\n\t\tif (\n\t\t\tTR.protection.description.includes('protection:constitutional')\n\t\t\t|| TR.protection.description.length >= 6 // max is 6\n\t\t) {\n\t\t\tTR.protection.status = 'great'\n\t\t} else if (TR.protection.description.length > 0) {\n\t\t\tTR.protection.status = 'ok'\n\t\t} else {\n\t\t\tTR.protection.status = 'bad'\n\t\t}\n\n\t\tif (TR.protection.description.length === 0) {\n\t\t\tTR.protection.description.push('protection:none')\n\t\t}\n\n\n\t\t// ### recognition\n\t\tTR.recognition = {}\n\t\tTR.recognition.description = []\n\t\tconst recognition_keys = Object.keys(ilga)\n\t\t.filter(key => key.startsWith('recognition:'))\n\t\t.sort((a, b) => a-b)\n\t\t\t\n\t\tfor (const key of recognition_keys) {\n\t\t\tif (ilga[key] === true) {\n\t\t\t\tTR.recognition.description.push(key)\n\t\t\t}\n\t\t}\n\n\t\tTR.recognition.status = null\n\t\tif (\n\t\t\tTR.recognition.description.includes('recognition:marriage')\n\t\t\t|| TR.recognition.description.length >= 4 // max is 4\n\t\t) {\n\t\t\tTR.recognition.status = 'great'\n\t\t} else if (TR.recognition.description.length > 0) {\n\t\t\tTR.recognition.status = 'ok'\n\t\t} else {\n\t\t\tTR.recognition.status = 'bad'\n\t\t}\n\n\t\tif (TR.recognition.description.length === 0) {\n\t\t\tTR.recognition.description.push('recognition:none')\n\t\t}\n\n\n\t\tTR.overview = {}\n\t\tTR.overview.statusNumber = -1\n\t\tif (\n\t\t\tTR\n\t\t\t&& TR.criminalisation\n\t\t\t&& TR.criminalisation.status\n\t\t\t&& TR.penalty\n\t\t\t&& TR.penalty.status\n\t\t\t&& TR.protection\n\t\t\t&& TR.protection.status\n\t\t\t&& TR.recognition\n\t\t\t&& TR.recognition.status\n\t\t) {\n\t\t\tconst getStatusNumber = status => {\n\t\t\t\tif (status === 'great') {\n\t\t\t\t\treturn 1\n\t\t\t\t} else if (status === 'ok') {\n\t\t\t\t\treturn 2\n\t\t\t\t} else if (status === 'bad') {\n\t\t\t\t\treturn 3\n\t\t\t\t}\n\t\t\t\treturn -1\n\t\t\t}\n\n\t\t\tTR.overview.statusNumber = Math.max(...[\n\t\t\t\tgetStatusNumber(TR.criminalisation.status),\n\t\t\t\tgetStatusNumber(TR.penalty.status),\n\t\t\t\tgetStatusNumber(TR.protection.status),\n\t\t\t\tgetStatusNumber(TR.recognition.status),\n\t\t\t])\n\t\t}\n\n\n\t\treturn TR\n}\n\nexport function getCountryCode(properties){\n\tlet country_code = null\n\tif (properties.ISO_A3 && properties.ISO_A3 !== '-99') {\n\t\tcountry_code = properties.ISO_A3\n\t} else if (properties.ISO_A3_EH && properties.ISO_A3_EH !== '-99') {\n\t\tcountry_code = properties.ISO_A3_EH\n\t} else if (properties.ADM0_A3 && properties.ADM0_A3 !== '-99') {\n\t\tcountry_code = properties.ADM0_A3\n\t}\n\n\treturn country_code\n}\n\n\n","import {gql} from '@apollo/client'\n\nexport const id = gql`\n\tquery {\n\t\tid\n\t}\n`\n\nexport const whoami = gql`\n\tquery {\n\t\twhoami\n\t}\n`\n\nexport const place = gql`\n\tquery($_id: ID, $wantedTags: [String], $languages: [String]){\n\t\tplace(_id: $_id){\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t__typename\n\t\t\t\t... on Place {\n\t\t\t\t\tname (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tdescription (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tgeometry {\n\t\t\t\t\t\tlocation {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboundingbox {\n\t\t\t\t\t\t\tnortheast {\n\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsouthwest {\n\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttags(keys: $wantedTags)\n\t\t\t\t}\n\t\t\t\t... on Changeset {\n\t\t\t\t\ttags\n\t\t\t\t\tforID\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const countries = gql`\n\tquery($wantedTags: [String], $languages: [String]){\n\t\tcountries{\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Place {\n\t\t\t\t\tname (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\ttags(keys: $wantedTags)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const markers = gql`\n\tquery($languages: [String]){\n\t\tmarkers{\n\t\t\t_id\n\t\t\toriginalTypename\n\t\t\tname (languages: $languages){\n\t\t\t\ttext\n\t\t\t\tlanguage\n\t\t\t}\n\t\t\tlng\n\t\t\tlat\n\t\t\tpreset\n\t\t\tstatus\n\t\t\ttags\n\t\t}\n\t}\n`\n\nexport const search = gql`\n\tquery($query: String=\"\", $languages: [String]){\n\t\tsearch(query: $query, languages: $languages){\n\t\t\tquery\n\t\t\tresults {\n\t\t\t\tplaceID\n\t\t\t\tpreset\n\t\t\t\tname {\n\t\t\t\t\ttext\n\t\t\t\t\tlanguage\n\t\t\t\t}\n\t\t\t\taddress\n\t\t\t\tgeometry {\n\t\t\t\t\tlocation {\n\t\t\t\t\t\tlng\n\t\t\t\t\t\tlat\n\t\t\t\t\t}\n\t\t\t\t\tboundingbox {\n\t\t\t\t\t\tnortheast {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsouthwest {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const questions = gql`\n\tquery($languages: [String]){\n\t\tquestions {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Question {\n\t\t\t\t\tquestion (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tin_one_word (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tdescription (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\ticon\n\t\t\t\t\tpossibleAnswers {\n\t\t\t\t\t\tinputtype\n\t\t\t\t\t\tinputOptions\n\t\t\t\t\t\tnamespace\n\t\t\t\t\t\tparsers\n\t\t\t\t\t\tkey\n\t\t\t\t\t\ticon\n\t\t\t\t\t\ttitle (languages: $languages){\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\tlanguage\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription (languages: $languages){\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\tlanguage\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfollowUpQuestionIDs\n\t\t\t\t\t\ttags\n\t\t\t\t\t\thidden\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const countrycode = gql`\n\tquery($lat: Float = 0.0, $lng: Float = 0.0) {\n\t\tcountrycode(lat: $lat, lng: $lng)\n\t}\n`\n\nexport const addChangeset = gql`\n\tmutation($properties: Changeset_Input){\n\t\taddChangeset(properties: $properties)\n\t}\n`\n\nexport const addEdge = gql`\n\tmutation($properties: Edge_Input){\n\t\taddEdge(properties: $properties)\n\t}\n`\n\nexport const sessions = gql`\n\tquery {\n\t\tsessions {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t__typename\n\t\t\t\t... on Session {\n\t\t\t\t\tprofileID\n\t\t\t\t\tuser_agent\n\t\t\t\t\tstarted\n\t\t\t\t\texpires\n\t\t\t\t\tlastModified\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const accounts = gql`\n\tquery {\n\t\taccounts {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t__typename\n\t\t\t\t... on Account {\n\t\t\t\t\tprovider\n\t\t\t\t\tusername\n\t\t\t\t\tdisplayName\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const undecidedPlaces = gql`\n\tquery($forID: ID) {\n\t\tundecidedPlaces(forID: $forID) {\n\t\t\t_id\n\t\t}\n\t}\n`\n\nexport const undecidedTags = gql`\n\tquery($forID: ID) {\n\t\tundecidedTags(forID: $forID)\n\t}\n`\n\nexport const changesets = gql`\n\tquery($forID: ID) {\n\t\tchangesets(forID: $forID) {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t__typename\n\t\t\t\t... on Changeset {\n\t\t\t\t\tforID\n\t\t\t\t\ttags\n\t\t\t\t\tsources\n\t\t\t\t\tfromBot\n\t\t\t\t\tdataset\n\t\t\t\t\tantiSpamUserIdentifier\n\t\t\t\t}\n\t\t\t}\n\t\t\tmetadata {\n\t\t\t\tcreated\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const recompile = gql`\n\tmutation($_id: ID){\n\t\trecompile(_id: $_id)\n\t}\n`\n\n\n"],"sourceRoot":""}