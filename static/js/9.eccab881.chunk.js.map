{"version":3,"sources":["components/GeoInput/index.js","components/PresetInput/index.js","components/DateInput/index.js","components/AudienceInput/Box.js","components/AudienceInput/Dustbin.js","components/AudienceInput/index.js","components/AddressInput/index.js","components/Questions/index.js"],"names":["GeoInput","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","lng","NaN","lat","countryCode","legalityStatusNumber","initialMapViewport","undefined","usedMarker","setStateGeoPos","bind","_assertThisInitialized","getStatusColor","_createClass","key","value","window","addEventListener","this","marker","markerChanged","_this2","removeEventListener","setTimeout","globals","mainMapFunctions","useAsGeoChooser","alpha3code","ilga","getILGA","overview","statusNumber","_this3","graphql","query","query_countrycode","variables","then","result","data","countrycode","setState","getLegalityNumber","catch","error","_this4","center","zoom","_this$getGeo","getGeo","markerPos","newZoom","store","get","getMapType","flyTo","padding","left","sidebarIsOpen","duration","transitionDuration","unproject","project","add","doc","storeKey","map_center_fake","Array","isArray","Number","parseFloat","toFixed","event","_this$getGeo2","setCountryCode","onChange","status","theme","palette","success","main","warning","background","default","React","createElement","style","Typography","variant","gutterBottom","Localized","id","opacity","vars","marginTop","color","display","margin","borderRadius","overflow","DiscriminationFacts","toggleable","Component","withGlobals","withTheme","PresetInput","_ref2","filterOptions","options","_ref","inputValue","matchSorter","threshold","rankings","CONTAINS","keys","_options_","concat","apply","_toConsumableArray","categories","map","category","Object","values","_presets_","filter","preset","presets","some","presetKey","startsWith","preset4options","_objectSpread","category_name_translated","getTranslation","name","userLocales","sort","presetSorter","getString","colors","presetChanged","a","b","icon_compare","icon","localeCompare","name_compare","name_translated","terms_translated","terms","toLowerCase","defaultValue","Autocomplete","groupBy","getOptionLabel","getOptionSelected","renderOption","ListItem","component","ListItemIcon","className","bg","fg","backgroundColor","width","height","lineHeight","textAlign","ListItemText","primary","ListboxProps","WebkitOverflowScrolling","PaperComponent","Paper","blurOnSelect","openOnFocus","clearText","closeText","noOptionsText","openText","renderInput","params","TextField","assign","label","withLocalization","DateInput","year","month","date","formated","parseDateString","setValue","parts","match","hasOwnProperty","day","getFormatedValue","formatKey","real","isSet","asString","padStart","daysInMonth","Date","getDate","fromEntries","entries","entry","dateInputOrder","split","v","index","autoFocus","type","target","helperText","Box","onDelete","item","_useDrag","useDrag","collect","monitor","isDragging","_useDrag2","_slicedToArray","drag","Chip","ref","cursor","Dustbin","accept","items","onDrop","onRemoveItem","useTheme","_useDrop","useDrop","drop","isOver","canDrop","_useDrop2","_useDrop2$","isActive","hasItems","length","FormControl","fullWidth","transition","InputLabel","focused","shrink","minHeight","borderWidth","borderStyle","borderColor","secondary","fontSize","visibility","maxWidth","AudienceInput","DndProvider","backend","Backend","AudienceInputInner","_useState","useState","dustbins","_useState3","_useState4","setItems","useEffect","replace","handleDrop","useCallback","newItems","update","_defineProperty","$set","changedItems","marginBottom","AddressInput","showAllFields","newValue","parseDefaultValue","toggleShowAllFields","JSON","parse","stringify","publishChanges","tags","convert_alpha3_to_alpha2","alpha2code","changedValues","_i","_Object$keys","addressFormat","widths","flexShrink","country","countryCodeLowerCase","getAddressFormatByCountryCode","format","row","title","size","getAddressInputStyles","FormControlLabel","boxShadow","divider","shape","control","Switch","checked","inputProps","Questions","questionsAreLoaded","answersByQuestionId","questionsById","nextQuestionIDs","stageIndex","sourcesText","answer_tags","tagsFromTheDoc","inputValues","renderStage","answerQuestion","loadQuestions","submitInputs","setQuestionAsActive","savePresetValue","saveValueByKey","abort","acceptPrivacyPolicy","showQuestions","addSources","suggest","finish","saveSourcesText","getPrivacy","startQuestions","properties","loadQuestionsQuerySubscription","unsubscribe","watchQuery","fetchPolicy","query_questions","languages","navigator","subscribe","firstOpenQuestionCounter","questions","reduce","obj","questionDoc","hasGeoInputField","possibleAnswers","possibleAnswer","inputtype","isSmallScreen","question_translated","getTranslationFromArray","question","in_one_word_translated","in_one_word","description_translated","description","answer","title_translated","_id","visible","active","answered","possibleAnswersByKey","questionID","questionIDs","_questionIDs","answerKey","answerValue","arguments","question_doc","followUpQuestionIDs","questionGotAnswered","answer2tags","allKeys","includes","currentQuestionPos","indexOf","nextQuestionIDs_start_part","slice","nextQuestionIDs_end_part","Set","thisIndex","i","tmp_inputValues","namespace","toReturn","namespaceWithColon","namespaceWithColonLenght","_i2","_tagKeys","substring","lenght","_i3","_tagKeys3","_i4","_tagKeys5","tagKeys","_i5","_tagKeys6","_i6","_tagKeys7","saveInputValue","_i7","_keys","_this5","hasInputField","isMultiRow","location","geometry","heading","elevation","onClick","dense","disableGutters","primaryTypographyProps","flexDirection","hidden","possibleAnswerKey","possibleAnswerNamespace","inputOptions","getInputValueByNamespace","getInputValue","multiline","button","flexGrow","border","justifyContent","minWidth","alignSelf","Button","DoneIcon","marginRight","onAbort","_this6","setPrivacy","finally","set","uuidv4","_this7","mutate","mutation","mutation_addChangeset","forID","sources","fromBot","dataset","antiSpamUserIdentifier","console","onFinish","_this8","elems","privacy_policy_link","Link","href","Fab","ArrowBackIcon","ArrowForwardIcon","marginLeft","Fragment","renderQuestion","placeholder"],"mappings":"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","file":"static/js/9.eccab881.chunk.js","sourcesContent":["import React from 'react'\n// import './index.css'\n\nimport {\n\tcountrycode as query_countrycode,\n} from '../../queries.js'\n\nimport {\n\tTypography,\n} from '@material-ui/core'\n// import {\n// \tAddRounded as AddIcon,\n// } from '@material-ui/icons'\n\nimport { Localized/*, withLocalization*/ } from '../Localized/'\nimport { withGlobals } from '../Globals/'\nimport { withTheme } from '@material-ui/core/styles'\nimport { getILGA } from '../../functions.js'\n\nimport DiscriminationFacts from '../DiscriminationFacts/'\n\nclass GeoInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tlng: NaN,\n\t\t\tlat: NaN,\n\t\t\tcountryCode: null,\n\t\t\tlegalityStatusNumber: null,\n\t\t}\n\n\t\tthis.initialMapViewport = undefined\n\t\tthis.usedMarker = undefined\n\n\t\tthis.setStateGeoPos = this.setStateGeoPos.bind(this)\n\t\tthis.getStatusColor = this.getStatusColor.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener('mapViewportUpdated', this.setStateGeoPos)\n\n\t\tif (this.usedMarker !== this.props.marker) {\n\t\t\tthis.markerChanged(this.props.marker)\n\t\t}\n\t}\n\tcomponentDidChange(){\n\t\tif (this.usedMarker !== this.props.marker) {\n\t\t\tthis.markerChanged(this.props.marker)\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener('mapViewportUpdated', this.setStateGeoPos)\n\t\tsetTimeout(()=>{\n\t\t\tthis.props.globals.mainMapFunctions.useAsGeoChooser(false, undefined)\n\t\t}, 1)\n\t}\n\n\tgetLegalityNumber(alpha3code){\n\t\tconst ilga = getILGA(alpha3code)\n\t\tif (ilga) {\n\t\t\treturn ilga.overview.statusNumber\n\t\t}\n\n\t\treturn null\n\t}\n\n\tsetCountryCode(lng, lat){\n\t\tthis.props.globals.graphql.query({\n\t\t\tquery: query_countrycode,\n\t\t\tvariables: {\n\t\t\t\tlng,\n\t\t\t\tlat,\n\t\t\t},\n\t\t}).then(result => {\n\t\t\tif (result && result.data && result.data.countrycode) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcountryCode: result.data.countrycode,\n\t\t\t\t\tlegalityStatusNumber: this.getLegalityNumber(result.data.countrycode),\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.setState({\n\t\t\t\t\tcountryCode: null,\n\t\t\t\t\tlegalityStatusNumber: null,\n\t\t\t\t})\n\t\t\t}\n\t\t}).catch(error=>{\n\t\t\tthis.setState({\n\t\t\t\tcountryCode: null,\n\t\t\t\tlegalityStatusNumber: null,\n\t\t\t})\n\t\t})\n\t}\n\n\tmarkerChanged(marker){\n\t\tif (\n\t\t\tmarker && \n\t\t\tmarker.center &&\n\t\t\tmarker.zoom\n\t\t) {\n\t\t\tthis.usedMarker = marker\n\n\t\t\tlet lat = marker.center.lat || 0\n\t\t\tlet lng = marker.center.lng || 0\n\n\t\t\tif (lat === 0 && lng === 0) {\n\t\t\t\t({lng, lat} = this.getGeo())\n\t\t\t}\n\n\t\t\tlet markerPos = {lng,lat}\n\t\t\tlet newZoom = this.props.store.get('map_zoom') || 3\n\n\t\t\tif (this.props.globals.mainMapFunctions.getMapType() === 'mapbox') {\n\t\t\t\tthis.props.globals.mainMapFunctions.flyTo({\n\t\t\t\t\tcenter: markerPos,\n\t\t\t\t\tzoom: newZoom,\n\t\t\t\t\tpadding: {\n\t\t\t\t\t\tleft: (this.props.globals.sidebarIsOpen ? 400 : 0),\n\t\t\t\t\t},\n\t\t\t\t\tduration: this.props.globals.transitionDuration,\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tif (this.props.globals.sidebarIsOpen) { // TODO this.props.globals.sidebarIsOpen isn't enough on small screens\n\t\t\t\t\tmarkerPos = this.props.globals.mainMapFunctions.unproject(this.props.globals.mainMapFunctions.project(markerPos, newZoom).add([-200,0]), newZoom) // map center with sidebar offset\n\t\t\t\t}\n\t\t\t\tthis.props.globals.mainMapFunctions.flyTo(markerPos, newZoom, {\n\t\t\t\t\tduration: this.props.globals.transitionDuration * 0.001,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.props.globals.mainMapFunctions.useAsGeoChooser(true, this.props.doc)\n\t\t\t}, this.props.globals.transitionDuration)\n\t\t}\n\t}\n\n\tgetGeo(storeKey){\n\t\tconst map_center_fake = this.props.store.get('map_center_fake')\n\n\t\tlet lng = 0\n\t\tlet lat = 0\n\n\t\tif (Array.isArray(map_center_fake)) {\n\t\t\tlng = Number.parseFloat(map_center_fake[0].toFixed(6)) // WHY: just 6 decimal points: https://gis.stackexchange.com/questions/8650/measuring-accuracy-of-latitude-and-longitude\n\t\t\tlat = Number.parseFloat(map_center_fake[1].toFixed(6))\n\t\t} else if (!!map_center_fake) {\n\t\t\tlng = Number.parseFloat(map_center_fake.lng.toFixed(6))\n\t\t\tlat = Number.parseFloat(map_center_fake.lat.toFixed(6))\n\t\t}\n\n\t\treturn {lng, lat}\n\t}\n\n\tsetStateGeoPos(event){\n\t\tconst {lng,lat} = this.getGeo()\n\n\t\tthis.setState({lng,lat})\n\t\tthis.setCountryCode(lng, lat)\n\t\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange({\n\t\t\t\tlng,\n\t\t\t\tlat,\n\t\t\t})\n\t\t}\n\t}\n\n\tgetStatusColor(status){\n\t\tif (status === 'great' || status === 1) {\n\t\t\treturn this.props.theme.palette.success.main\n\t\t} else if (status === 'ok' || status === 2) {\n\t\t\treturn this.props.theme.palette.warning.main\n\t\t} else if (status === 'bad' || status === 3) {\n\t\t\treturn this.props.theme.palette.error.main\n\t\t}\n\t\treturn this.props.theme.palette.background.default\n\t}\n\n\trender() {\n\t\treturn (<div style={this.props.style}>\n\t\t\t<Typography variant=\"body2\" gutterBottom>\n\t\t\t\t<Localized id=\"instructions\" />\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body2\" style={{opacity:0.6}}>\n\t\t\t\t<Localized id=\"lat\" vars={{ lat: (this.state.lat+'' || '') }} />\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body2\" style={{opacity:0.6}}>\n\t\t\t\t<Localized id=\"lng\" vars={{ lng: (this.state.lng+'' || '') }} />\n\t\t\t</Typography>\n\n\t\t\t{\n\t\t\t\tthis.state.legalityStatusNumber === 3\n\t\t\t\t? (\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tkey=\"geoInputErrorMessage_NotLegal\"\n\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '16px',\n\t\t\t\t\t\t\tcolor: this.getStatusColor(this.state.legalityStatusNumber),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"legality_message_geo_not_legal\" />\n\t\t\t\t\t</Typography>\n\t\t\t\t)\n\t\t\t\t: undefined\n\t\t\t}\n\n\t\t\t<Typography\n\t\t\t\tkey=\"geoInputInfoMessage_BeCautious\"\n\t\t\t\tvariant=\"body2\"\n\t\t\t\tstyle={{\n\t\t\t\t\tmarginTop: '16px',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Localized id=\"legality_message_be_cautious\" />\n\t\t\t</Typography>\n\n\t\t\t{\n\t\t\t\t!!this.state.countryCode\n\t\t\t\t? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: '16px 0 0',\n\t\t\t\t\t\t\tbackground: this.props.theme.palette.background.default,\n\t\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t\t// border: '1px solid '+this.props.theme.palette.divider,\n\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DiscriminationFacts\n\t\t\t\t\t\t\tkey={'d_facts_'+this.state.countryCode}\n\t\t\t\t\t\t\tcountryCode={this.state.countryCode}\n\t\t\t\t\t\t\ttoggleable={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t\t: undefined\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withTheme(GeoInput))\n\n// You can't use this position as it's illegal to be queer there. (Or we aren't sure.)\n\n/*\n\n- klick \"add a place\"\n- hide all icon and all UI\n- add a new icon in the middle of the screen (it stays in the middle even when the map is moved)\n- the icon should be an input field for lat+lng\n- add a submit-button and a heading \"Where is the place located?\"\n\n*/","import React from 'react'\n// import './index.css'\n\nimport {\n\tPaper,\n\tTextField,\n\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n} from '@material-ui/core'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport matchSorter from 'match-sorter'\n\nimport { withLocalization } from '../Localized/'\nimport { withGlobals } from '../Globals/'\n\nimport { getTranslation } from '../../functions.js'\n\nimport categories from '../../data/dist/categories.json'\nimport _presets_ from '../../data/dist/presets.json'\nimport colors from '../../data/dist/colors.json'\n\n\n\nclass PresetInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.filterOptions = (options, {inputValue}) => matchSorter(options, inputValue, {\n\t\t\tthreshold: matchSorter.rankings.CONTAINS,\n\t\t\tkeys: ['name_translated' ,'terms_translated','category_name_translated','key','color.key']\n\t\t})\n\n\t\tthis._options_ = [].concat(\n\t\t\t...(\n\t\t\t\tcategories\n\t\t\t\t.map(category =>\n\t\t\t\t\tObject.values(_presets_)\n\t\t\t\t\t.filter(preset => category.presets.some(\n\t\t\t\t\t\tpresetKey => preset.key === presetKey || preset.key.startsWith(presetKey+'/')\n\t\t\t\t\t))\n\t\t\t\t\t.map(preset => this.preset4options({\n\t\t\t\t\t\t...preset,\n\t\t\t\t\t\tcategory_name_translated: getTranslation(category.name, this.props.globals.userLocales),\n\t\t\t\t\t\tcolor: category.color,\n\t\t\t\t\t}))\n\t\t\t\t\t.sort(this.presetSorter)\n\t\t\t\t)\n\t\t\t),\n\t\t\t...(\n\t\t\t\tObject.values(_presets_)\n\t\t\t\t.filter(preset => !categories.some(\n\t\t\t\t\tcategory => category.presets.some(\n\t\t\t\t\t\tpresetKey => (\n\t\t\t\t\t\t\tpreset.key === presetKey\n\t\t\t\t\t\t\t|| preset.key.startsWith(presetKey+'/')\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t))\n\t\t\t\t.map(preset => this.preset4options({\n\t\t\t\t\t...preset,\n\t\t\t\t\tcategory_name_translated: props.getString('category_more'),\n\t\t\t\t\tcolor: colors.default,\n\t\t\t\t}))\n\t\t\t\t.sort(this.presetSorter)\n\t\t\t)\n\t\t)\n\n\t\tthis.presetChanged = this.presetChanged.bind(this)\n\t}\n\n\n\tpresetSorter(a, b){\n\t\tconst icon_compare = b.icon.localeCompare(a.icon)\n\t\tconst name_compare = -b.name_translated.localeCompare(a.name_translated)\n\t\treturn icon_compare === 0 ? name_compare : icon_compare\n\t}\n\n\tpreset4options(preset){\n\t\treturn {\n\t\t\t...preset,\n\t\t\tname_translated: getTranslation(preset.name, this.props.globals.userLocales),\n\t\t\tterms_translated: getTranslation(preset.terms, this.props.globals.userLocales),\n\t\t\ticon: preset.icon ? preset.icon.toLowerCase() : '',\n\t\t}\n\t}\n\n\tpresetChanged(event, value){\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(value && value.key ? value.key : null)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet defaultValue = undefined\n\t\tif (this.props.defaultValue && _presets_[this.props.defaultValue]) {\n\t\t\tdefaultValue = this.preset4options({\n\t\t\t\t..._presets_[this.props.defaultValue],\n\t\t\t\tcategory_name_translated: '', // isn't really needed\n\t\t\t\tcolor: colors.default, // isn't really needed\n\t\t\t})\n\t\t}\n\n\t\treturn (<div style={this.props.style}>\n\t\t\t<Autocomplete\n\t\t\t\toptions={this._options_}\n\t\t\t\tgroupBy={preset => preset.category_name_translated || ''}\n\t\t\t\tgetOptionLabel={preset => preset.name_translated}\n\t\t\t\tgetOptionSelected={(preset, value) => !!value && value.key === preset.key}\n\t\t\t\n\t\t\t\trenderOption={(preset) => (<ListItem\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmargin: '-6px -16px -6px -24px',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: (\n\t\t\t\t\t\t\t\t\tpreset.icon\n\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\tpreset.color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t? preset.color.bg\n\t\t\t\t\t\t\t\t\t\t: preset.color.fg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\t\t\t\tpreset.icon\n\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\tpreset.color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: preset.color.bg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tborderRadius: '100%',\n\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>{preset.icon}</div>\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText primary={preset.name_translated}/>\n\t\t\t\t</ListItem>)}\n\n\t\t\t\tListboxProps={{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tWebkitOverflowScrolling: 'touch',\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tPaperComponent={Paper}\n\t\t\t\t\n\t\t\t\tblurOnSelect\n\t\t\t\topenOnFocus\n\t\t\t\n\t\t\t\tclearText=\"nextQuestionIDs\"\n\t\t\t\tcloseText=\"Close\"\n\t\t\t\tnoOptionsText=\"No options\"\n\t\t\t\topenText=\"Open\"\n\t\t\t\n\t\t\t\tfilterOptions={this.filterOptions}\n\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\tonChange={this.presetChanged}\n\t\t\t\n\t\t\t\trenderInput={(params) => (<TextField\n\t\t\t\t\t{...params}\n\t\t\t\n\t\t\t\t\tlabel={this.props.label || ''}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t/>)}\n\t\t\t/>\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withLocalization(PresetInput))\n\n\n\n","import React from 'react'\nimport './index.css'\n\nimport {\n\tTextField,\n\tTypography,\n} from '@material-ui/core'\n// import {\n// \tAddRounded as AddIcon,\n// } from '@material-ui/icons'\n\nimport { withLocalization } from '../Localized/'\nimport { withGlobals } from '../Globals/'\n\nclass DateInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tyear: '',\n\t\t\tmonth: '',\n\t\t\tdate: '',\n\t\t}\n\n\t\tthis.formated = {\n\t\t\tyear: null,\n\t\t\tmonth: null,\n\t\t\tdate: null,\n\t\t}\n\n\t\tthis.parseDateString = this.parseDateString.bind(this)\n\t\tthis.setValue = this.setValue.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.parseDateString()\n\t}\n\tcomponentDidChange(){\n\t\tthis.parseDateString()\n\t}\n\tparseDateString(){\n\t\tconst defaultValue = this.props.defaultValue\n\n\t\tlet parts = []\n\t\tif (!!defaultValue) {\n\t\t\tif (!!defaultValue['']) {\n\t\t\t\tparts = defaultValue[''].match(/(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?/)\n\t\t\t} else if (typeof defaultValue === 'string') {\n\t\t\t\tparts = defaultValue.match(/(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?/)\n\t\t\t}\n\t\t}\n\n\t\tlet year = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('year:is_set') &&\n\t\t\t\tdefaultValue['year:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['year'] || parts[1])\n\t\t) {\n\t\t\tyear = (defaultValue['year'] || parts[1])\n\t\t}\n\n\t\tlet month = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('month:is_set') &&\n\t\t\t\tdefaultValue['month:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['month'] || parts[2])\n\t\t) {\n\t\t\tmonth = (defaultValue['month'] || parts[2])\n\t\t}\n\n\t\tlet day = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('day:is_set') &&\n\t\t\t\tdefaultValue['day:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['day'] || parts[3])\n\t\t) {\n\t\t\tday = (defaultValue['day'] || parts[3])\n\t\t}\n\n\t\tthis.setState({year, month, day}, ()=>{\n\t\t\tthis.formated = {\n\t\t\t\tyear: this.getFormatedValue('year', year),\n\t\t\t\tmonth: this.getFormatedValue('month', month),\n\t\t\t\tday: this.getFormatedValue('day', day),\n\t\t\t}\n\t\t})\n\t}\n\n\tgetFormatedValue(formatKey,value){\n\t\tconst real = value\n\t\tlet isSet = false\n\t\tlet asString = ''\n\t\tvalue *= 1\n\n\t\tif (formatKey === 'year') {\n\t\t\tif (value > 99999) {\n\t\t\t\tvalue = 99999\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(4,'0')\n\t\t} else if (formatKey === 'month') {\n\t\t\tif (value > 12) {\n\t\t\t\tvalue = 12\n\t\t\t} else if (value < 1) {\n\t\t\t\tvalue = 1\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(2,'0')\n\t\t} else if (formatKey === 'day') {\n\t\t\tlet daysInMonth = 31\n\t\t\tif (\n\t\t\t\tthis.formated.year &&\n\t\t\t\tthis.formated.year.isSet &&\n\t\t\t\tthis.formated.month &&\n\t\t\t\tthis.formated.month.isSet\n\t\t\t) {\n\t\t\t\tdaysInMonth = new Date(this.formated.year.value, this.formated.month.value, 0).getDate()\n\t\t\t}\n\n\t\t\tif (value > daysInMonth) {\n\t\t\t\tvalue = daysInMonth\n\t\t\t} else if (value < 1) {\n\t\t\t\tvalue = 1\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(2,'0')\n\t\t}\n\n\t\treturn {\n\t\t\tasString,\n\t\t\tvalue,\n\t\t\tisSet,\n\t\t\treal,\n\t\t}\n\t}\n\n\tsetValue(formatKey,value){\n\t\tthis.formated[formatKey] = this.getFormatedValue(formatKey,value)\n\t\tif (formatKey !== 'day') {\n\t\t\tthis.formated.day = this.getFormatedValue('day',this.formated.day.real)\n\t\t}\n\n\t\tconst values = Object.fromEntries(Object.entries(this.formated).map(entry => [\n\t\t\tentry[0],\n\t\t\tentry[1].value,\n\t\t]))\n\t\tconst isSet = Object.fromEntries(Object.entries(this.formated).map(entry => [\n\t\t\tentry[0]+':is_set',\n\t\t\tentry[1].isSet,\n\t\t]))\n\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange({\n\t\t\t\t'': this.formated.year.asString+'-'+this.formated.month.asString+'-'+this.formated.day.asString,\n\t\t\t\t...values,\n\t\t\t\t...isSet,\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst dateInputOrder = this.props.getString('date-input-order', null, '').split('-').filter(v=>!!v && v !== ' ') // year-month-day\n\n\t\treturn (<div\n\t\t\tclassName=\"DateInput\"\n\t\t\tstyle={this.props.style}\n\t\t>\n\t\t\t<div className=\"TextFields\">\n\t\t\t\t{\n\t\t\t\t\tdateInputOrder.map((formatKey,index) => (<TextField\n\t\t\t\t\t\tautoFocus={formatKey === 'year'}\n\t\t\t\t\t\tclassName=\"TextField\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tkey={formatKey+'_'+this.state[formatKey]}\n\t\t\t\t\t\tlabel={this.props.getString(`${formatKey}-label`, null, formatKey)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdefaultValue={this.state[formatKey]}\n\t\t\t\t\t\tonChange={event => this.setValue(formatKey,event.target.value)}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t{\n\t\t\t\t!!this.props.helperText\n\t\t\t\t? <Typography className=\"helperText\" variant=\"caption\">{this.props.helperText}</Typography>\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withLocalization(DateInput))\n\n\n","import React from 'react'\nimport { useDrag } from 'react-dnd'\n\nimport {\n\tChip,\n} from '@material-ui/core'\n\nconst Box = ({ index, type, label, onDelete }) => {\n\tconst item = { index, type }\n\n\tconst [{ isDragging }, drag] = useDrag({\n\t\titem,\n\t\tcollect: monitor => ({\n\t\t\tisDragging: monitor.isDragging(),\n\t\t})\n\t})\n\n\treturn (\n\t\t<Chip\n\t\t\tref={drag}\n\t\t\tlabel={label}\n\t\t\tstyle={{\n\t\t\t\tcursor: 'move',\n\t\t\t\tmargin: '0 2px 4px 2px',\n\t\t\t\t'WebkitTouchCallout': 'none',\n\t\t\t\t  'WebkitUserSelect': 'none',\n\t\t\t\t   'KhtmlUserSelect': 'none',\n\t\t\t\t     'MozUserSelect': 'none',\n\t\t\t\t      'MsUserSelect': 'none',\n\t\t\t\t        'userSelect': 'none',\n\t\t\t\topacity: isDragging ? 0.4 : 1,\n\t\t\t}}\n\t\t\tonDelete={\n\t\t\t\ttypeof onDelete === 'function'\n\t\t\t\t? () => onDelete(item)\n\t\t\t\t: null\n\t\t\t}\n\t\t/>\n\t)\n}\nexport default Box\n","import React from 'react'\n\nimport { useTheme } from '@material-ui/core/styles'\n\nimport { useDrop } from 'react-dnd'\nimport Box from './Box.js'\n\nimport {\n\tFormControl,\n\tInputLabel,\n} from '@material-ui/core'\n\nconst Dustbin = ({ label, accept, items, onDrop, onRemoveItem }) => {\n\tconst theme = useTheme()\n\n\tconst [{ isOver, canDrop }, drop] = useDrop({\n\t\taccept,\n\t\tdrop: onDrop,\n\t\tcollect: monitor => ({\n\t\t\tisOver: monitor.isOver(),\n\t\t\tcanDrop: monitor.canDrop()\n\t\t})\n\t})\n\n\tconst isActive = isOver && canDrop\n\tconst hasItems = items.length > 0\n\tconst activeHelperText = '' // (isActive ? ' — Release to drop' : '')\n\n\treturn (\n\t\t<FormControl\n\t\t\tref={drop}\n\t\t\tvariant=\"outlined\"\n\t\t\tcolor=\"secondary\"\n\t\t\tfullWidth\n\t\t\tstyle={{\n\t\t\t\ttransition: 'margin-top 0.2s ease',\n\t\t\t\tmarginTop: (hasItems ? '16px' : '8px'),\n\t\t\t}}\n\t\t>\n\t\t\t<InputLabel focused={hasItems && isActive} shrink={hasItems}>\n\t\t\t\t{label}{activeHelperText}\n\t\t\t</InputLabel>\n\t\t<fieldset\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'block',\n\t\t\t\twidth: 'auto',\n\t\t\t\tminHeight: '1.1875em',\n\t\t\t\tpadding: '18.5px 8px',\n\t\t\t\tborderWidth: '1px',\n\t\t\t\tborderStyle: 'solid',\n\t\t\t\tborderColor: (\n\t\t\t\t\tisActive\n\t\t\t\t\t? theme.palette.secondary.main\n\t\t\t\t\t: (\n\t\t\t\t\t\ttheme.palette.type === 'dark'\n\t\t\t\t\t\t? 'rgba(255,255,255,0.23)'\n\t\t\t\t\t\t: 'rgba(0,0,0,0.23)'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\ttransition: 'border-color 200ms ease 0ms',\n\t\t\t\tborderRadius: '8px',\n\t\t\t\tmarginTop: '-5px',\n\t\t\t}}\n\t\t>\n\t\t\t<legend\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\theight: '11px',\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tpadding: '0',\n\t\t\t\t\tfontSize: '0.75em',\n\t\t\t\t\ttextAlign: 'left',\n\t\t\t\t\tvisibility: 'hidden',\n\n\t\t\t\t\t...(\n\t\t\t\t\t\thasItems\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\tmaxWidth: '1000px',\n\t\t\t\t\t\t\ttransition: 'max-width 100ms ease 50ms',\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\tmaxWidth: '0.01px',\n\t\t\t\t\t\t\ttransition: 'max-width 50ms ease 0ms',\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span style={{padding: '0 5px'}}>{label}{activeHelperText}</span>\n\t\t\t</legend>\n\n\t\t\t<div style={{margin: '-13px -2px -14px -2px'}}>\n\t\t\t\t{items.map(item => (\n\t\t\t\t\t<Box\n\t\t\t\t\t\tkey={item.index}\n\t\t\t\t\t\tindex={item.index}\n\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\tonDelete={onRemoveItem}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</fieldset>\n\t\t</FormControl>\n\t)\n}\nexport default Dustbin\n\n\t\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport { DndProvider } from 'react-dnd'\nimport Backend from 'react-dnd-html5-backend'\nimport update from 'immutability-helper'\n\nimport Dustbin from './Dustbin.js'\nimport Box from './Box.js'\n\nimport {\n\tTypography,\n} from '@material-ui/core'\n\nimport Localized from '../Localized/'\n\nconst AudienceInput = (props) => {\n\treturn (\n\t\t<DndProvider backend={Backend}>\n\t\t\t<AudienceInputInner {...props} />\n\t\t</DndProvider>\n\t)\n}\n\nexport default AudienceInput\n\n\n\n\n\n////////////////////////////////////////////////////////////////\n\n\n\n\n\nconst accept_type = 'box'\n\nconst AudienceInputInner =  ({ defaultValue, onChange, style }) => {\n\tconst [dustbins] = useState([\n\t\t{ value: 'only', label: <Localized id=\"audience_input_label_only\" /> },\n\t\t{ value: 'primary', label: <Localized id=\"audience_input_label_primary\" /> },\n\t\t{ value: 'welcome', label: <Localized id=\"audience_input_label_welcome\" /> },\n\t\t{ value: 'no', label: <Localized id=\"audience_input_label_no\" /> }\n\t])\n\tconst [items, setItems] = useState([])\n\n\tuseEffect(()=>{\n\t\tsetItems(\n\t\t\t[\n\t\t\t\t'queer',\n\t\t\t\t'youth',\n\t\t\t\t'trans',\n\t\t\t\t'inter',\n\t\t\t\t'sexuality:bi',\n\t\t\t\t'sexuality:lesbian',\n\t\t\t\t'sexuality:gay',\n\t\t\t\t'allies',\n\t\t\t\t'cis',\n\t\t\t\t'men',\n\t\t\t\t'women',\n\t\t\t]\n\t\t\t.map(key => ({\n\t\t\t\tkey: key,\n\t\t\t\tlabel: <Localized id={key.replace(/:/g, '_')} />,\n\t\t\t\tvalue: defaultValue[key] || null,\n\t\t\t\tdefaultValue: defaultValue[key] || null,\n\t\t\t\ttype: accept_type,\n\t\t\t}))\n\t\t)\n\t}, [defaultValue])\n\n\tconst handleDrop = useCallback(\n\t\t(value, item) => {\n\t\t\tconst newItems = update(items, {\n\t\t\t\t[item.index]: {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\t$set: value\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetItems(newItems)\n\n\t\t\tconst changedItems = Object.fromEntries(\n\t\t\t\tnewItems\n\t\t\t\t.filter(item => item.hasOwnProperty('value') && item.value !== item.defaultValue)\n\t\t\t\t.map(item => [item.key, item.value || false])\n\t\t\t)\n\n\t\t\tonChange(changedItems)\n\t\t},\n\t\t[items, onChange]\n\t)\n\n\treturn (\n\t\t<div style={style}>\n\t\t\t<Typography variant=\"body2\" style={{marginBottom: '16px'}}>\n\t\t\t\t<Localized id=\"audience_input_instruction\" />\n\t\t\t</Typography>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t{items\n\t\t\t\t\t.map((item, index) => ({ ...item, index }))\n\t\t\t\t\t.filter(item => item.value === null)\n\t\t\t\t\t.map(item => (\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tkey={item.index}\n\t\t\t\t\t\t\tindex={item.index}\n\t\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{dustbins.map(({ value, label }) => (\n\t\t\t\t<Dustbin\n\t\t\t\t\tkey={value}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\taccept={[accept_type]}\n\t\t\t\t\titems={items\n\t\t\t\t\t\t.map((item, index) => ({ ...item, index }))\n\t\t\t\t\t\t.filter(item => item.value === value)}\n\t\t\t\t\tonDrop={item => handleDrop(value, item)}\n\t\t\t\t\tonRemoveItem={item => handleDrop(null, item)}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t)\n}","import React from 'react'\nimport './index.css'\n\nimport {\n\tcountrycode as query_countrycode,\n} from '../../queries.js'\n\nimport {\n\tTextField,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n} from '@material-ui/core'\n// import {\n// \tAddRounded as AddIcon,\n// } from '@material-ui/icons'\n\nimport { withLocalization } from '../Localized/'\nimport { withGlobals } from '../Globals/'\nimport { withTheme } from '@material-ui/core/styles'\nimport { getAddressFormatByCountryCode } from '../../functions.js'\n\nclass AddressInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tvalue: {},\n\t\t\tshowAllFields: false,\n\t\t}\n\n\t\tthis.newValue = {}\n\n\t\tthis.parseDefaultValue = this.parseDefaultValue.bind(this)\n\t\tthis.setValue = this.setValue.bind(this)\n\t\tthis.toggleShowAllFields = this.toggleShowAllFields.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.parseDefaultValue()\n\t}\n\tcomponentDidChange(){\n\t\tthis.parseDefaultValue()\n\t}\n\tparseDefaultValue(){\n\t\tthis.setState({\n\t\t\tvalue: this.props.defaultValue || {}\n\t\t}, ()=>{\n\t\t\tthis.newValue = JSON.parse(JSON.stringify(this.state.value))\n\t\t\tthis.publishChanges()\n\n\t\t\tthis.setCountryCode()\n\t\t})\n\t}\n\n\tsetCountryCode(){\n\t\tconst lng = this.props.tags.lng\n\t\tconst lat = this.props.tags.lat\n\n\t\tthis.props.globals.graphql.query({\n\t\t\tquery: query_countrycode,\n\t\t\tvariables: {\n\t\t\t\tlng,\n\t\t\t\tlat,\n\t\t\t},\n\t\t}).then(result => {\n\t\t\tif (result && result.data && result.data.countrycode) {\n\t\t\t\tconst alpha3code = result.data.countrycode\n\n\t\t\t\tthis.props.globals.convert_alpha3_to_alpha2(alpha3code, (alpha2code)=>{\n\t\t\t\t\tthis.setValue('country',alpha2code)\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.setValue('country',null)\n\t\t\t}\n\t\t}).catch(error=>{\n\t\t\tthis.setValue('country',null)\n\t\t})\n\t}\n\n\tsetValue(formatKey,value){\n\t\tthis.newValue[formatKey] = value\n\t\tthis.publishChanges()\n\t}\n\tpublishChanges(){\n\t\tif (this.props.onChange) {\n\t\t\tlet changedValues = {}\n\t\t\tfor (const key of Object.keys(this.newValue)) {\n\t\t\t\tif (this.state.value[key] !== this.newValue[key]) {\n\t\t\t\t\tchangedValues[key] = this.newValue[key]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.onChange(changedValues)\n\t\t}\n\t}\n\n\tgetAddressInputStyles(addressFormat, formatKey) {\n\t\tif (addressFormat.widths[formatKey]) {\n\t\t\treturn {\n\t\t\t\twidth: (addressFormat.widths[formatKey]*100)+'%',\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\twidth: 'auto',\n\t\t\tflexShrink: '2',\n\t\t}\n\t}\n\n\ttoggleShowAllFields(event){\n\t\tthis.setState((state, props) => ({\n\t\t\tshowAllFields: !state.showAllFields\n\t\t}))\n\t}\n\n\trender() {\n\t\tconst countryCode = this.state.value.country || null\n\t\tconst countryCodeLowerCase = (countryCode || '').toLowerCase()\n\t\tconst addressFormat = getAddressFormatByCountryCode(countryCode, this.state.showAllFields)\n\n\t\treturn (<div\n\t\t\tclassName=\"AddressInput\"\n\t\t\tstyle={this.props.style}\n\t\t>\n\n\t\t\t<div>\n\t\t\t{\n\t\t\t\taddressFormat.format.map(row => {\n\t\t\t\t\treturn <div\n\t\t\t\t\t\tkey={JSON.stringify(row)}\n\t\t\t\t\t\tclassName=\"TextFields\"\n\t\t\t\t\t>{\n\t\t\t\t\t\trow.map(formatKey => {\n\t\t\t\t\t\t\tconst value = this.state.value[formatKey]\n\t\t\t\t\t\t\tconst label = this.props.getString(\n\t\t\t\t\t\t\t\t`label_${formatKey}_${countryCodeLowerCase}`, null,\n\t\t\t\t\t\t\t\tthis.props.getString(\n\t\t\t\t\t\t\t\t\t`label_${formatKey}`,null,\n\t\t\t\t\t\t\t\t\tformatKey\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tclassName=\"TextField\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tkey={formatKey}\n\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\ttitle={label}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\t\tonChange={event => this.setValue(formatKey,event.target.value)}\n\t\t\t\t\t\t\t\tstyle={this.getAddressInputStyles(addressFormat,formatKey)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}</div>\n\t\t\t\t})\n\t\t\t}\n\t\t\t</div>\n\n\t\t\t<FormControlLabel\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: (countryCode === '_ALL_FIELDS_' ? 'none' : 'flex'),\n\t\t\t\t\tmargin: '8px 0 0',\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\tpadding: '0 8px 0 0',\n\t\t\t\t\tboxShadow: `inset 0 0 0 999px ${this.props.theme.palette.divider}`,\n\t\t\t\t\tborderRadius: `${this.props.theme.shape.borderRadius}px`,\n\t\t\t\t}}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tchecked={this.state.showAllFields}\n\t\t\t\t\t\tonChange={this.toggleShowAllFields}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t'aria-label': this.props.getString('show_all_fields'),\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={this.props.getString('show_all_fields')}\n\t\t\t/>\n\n\t\t\t{\n\t\t\t\t!!this.props.helperText\n\t\t\t\t? <Typography className=\"helperText\" variant=\"caption\">{this.props.helperText}</Typography>\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>)\n\n\t\t/*\n\t\tconst dateInputOrder = this.props.getString('date-input-order', null, '').split('-').filter(v=>!!v && v !== ' ') // year-month-day\n\n\t\treturn (<div\n\t\t\tclassName=\"DateInput\"\n\t\t\tstyle={this.props.style}\n\t\t>\n\t\t\t<div className=\"TextFields\">\n\t\t\t\t{\n\t\t\t\t\tdateInputOrder.map((formatKey,index) => (<TextField\n\t\t\t\t\t\tautoFocus={formatKey === 'year'}\n\t\t\t\t\t\tclassName=\"TextField\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tkey={formatKey+'_'+this.state[formatKey]}\n\t\t\t\t\t\tlabel={this.props.getString(`${formatKey}-label`, null, formatKey)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdefaultValue={this.state[formatKey]}\n\t\t\t\t\t\tonChange={event => this.setValue(formatKey,event.target.value)}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t{\n\t\t\t\t!!this.props.helperText\n\t\t\t\t? <Typography className=\"helperText\" variant=\"caption\">{this.props.helperText}</Typography>\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>)\n\t\t*/\n\t}\n}\n\nexport default withGlobals(withLocalization(withTheme(AddressInput)))\n\n\n","import React from 'react'\nimport './index.css'\n\n\n\nimport { Localized, withLocalization } from '../Localized/'\n// import { navigate } from '@reach/router'\n\nimport {\n\tquestions as query_questions,\n\taddChangeset as mutation_addChangeset,\n} from '../../queries.js'\n\n// import categories from '../../data/dist/categories.json'\nimport _presets_ from '../../data/dist/presets.json'\n// import colors from '../../data/dist/colors.json'\n// import colorsByPreset from '../../data/dist/colorsByPreset.json'\nimport { uuidv4, getTranslationFromArray/*, getPreset, getColorByPreset*/ } from '../../functions.js'\n\nimport { withGlobals } from '../Globals/'\n\nimport {\n\tLink,\n\tTypography,\n\tButton,\n\tFab,\n\tPaper,\n\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\n\tTextField,\n} from '@material-ui/core'\nimport {\n\tDoneRounded as DoneIcon,\n\tArrowBackRounded as ArrowBackIcon,\n\tArrowForwardRounded as ArrowForwardIcon,\n} from '@material-ui/icons'\n// import {\n// \tAutocomplete\n// } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport GeoInput from '../GeoInput/'\nimport PresetInput from '../PresetInput/'\nimport DateInput from '../DateInput/'\nimport AudienceInput from '../AudienceInput/'\nimport AddressInput from '../AddressInput/'\n\n\n\n// const nextQuestionIDs_templates = {\n// \timprove: ['start_improve'],\n// \tcreate: ['name','geo_pos','answer_more'],\n// }\n\nclass Questions extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tquestionsAreLoaded: false,\n\t\t\tanswersByQuestionId: {},\n\n\t\t\tquestionsById: {},\n\t\t\tnextQuestionIDs: [], // nextQuestionIDs_templates.create,\n\n\t\t\tstageIndex: 0, // 0=privacy -> 1=questions -> 2=sources -> 3=thanks\n\t\t}\n\n\t\t// this.answerIDs = new Set()\n\t\tthis.sourcesText = ''\n\t\tthis.answer_tags = {}\n\t\tthis.tagsFromTheDoc = {}\n\n\t\tthis.inputValues = {}\n\n\t\tthis.renderStage = this.renderStage.bind(this)\n\n\t\tthis.answerQuestion = this.answerQuestion.bind(this)\n\t\tthis.loadQuestions = this.loadQuestions.bind(this)\n\t\tthis.submitInputs = this.submitInputs.bind(this)\n\n\t\tthis.setQuestionAsActive = this.setQuestionAsActive.bind(this)\n\t\tthis.savePresetValue = this.savePresetValue.bind(this)\n\t\tthis.saveValueByKey = this.saveValueByKey.bind(this)\n\n\t\tthis.abort = this.abort.bind(this)\n\t\tthis.acceptPrivacyPolicy = this.acceptPrivacyPolicy.bind(this)\n\t\tthis.showQuestions = this.showQuestions.bind(this)\n\t\tthis.addSources\t = this.addSources.bind(this)\n\t\tthis.suggest = this.suggest.bind(this)\n\t\tthis.finish = this.finish.bind(this)\n\t\tthis.saveSourcesText = this.saveSourcesText.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\t// skip privacy consent screen when already agreed\n\t\tconst privacy_contented_to_tracking = this.props.store.getPrivacy('tracking')\n\t\tif (privacy_contented_to_tracking) {\n\t\t\tthis.setState({stageIndex: 1})\n\t\t}\n\n\t\tthis.setState((state, props) => {\n\t\t\tif (this.state.nextQuestionIDs.length === 0 && this.props.startQuestions.length > 0) {\n\t\t\t\treturn {nextQuestionIDs: this.props.startQuestions}\n\t\t\t}\n\t\t})\n\n\t\tthis.loadQuestions()\n\t}\n\tcomponentDidUpdate(){\n\t\tif (\n\t\t\t!!this.props.doc &&\n\t\t\t// !!this.props.doc._id &&\n\t\t\t!!this.props.doc.properties &&\n\t\t\t!!this.props.doc.properties.tags &&\n\t\t\tthis.props.doc.properties.tags !== this.tagsFromTheDoc\n\t\t) {\n\t\t\tthis.tagsFromTheDoc = this.props.doc.properties.tags\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\tif (!!this.loadQuestionsQuerySubscription) {\n\t\t\tthis.loadQuestionsQuerySubscription.unsubscribe()\n\t\t}\n\t}\n\n\tloadQuestions(){\n\t\tthis.loadQuestionsQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\tquery: query_questions,\n\t\t\tvariables: {\n\t\t\t\tlanguages: navigator.languages,\n\t\t\t},\n\t\t})\n\t\t.subscribe(({data}) => {\n\t\t\tif (!!data && !this.state.questionsAreLoaded) {\n\t\t\t\tconst nextQuestionIDs = [\n\t\t\t\t\t...this.props.startQuestions,\n\t\t\t\t\t...this.state.nextQuestionIDs,\n\t\t\t\t]\n\t\n\t\t\t\tlet firstOpenQuestionCounter = 0\n\t\t\t\tconst questionsById = JSON.parse(JSON.stringify(data.questions)).reduce((obj,questionDoc)=>{\n\t\n\t\t\t\t\tconst hasGeoInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => possibleAnswer.inputtype === 'geo').length > 0\n\t\n\t\t\t\t\tif (this.props.globals.isSmallScreen && hasGeoInputField) {\n\t\t\t\t\t\tfirstOpenQuestionCounter += 1\n\t\t\t\t\t}\n\t\n\t\t\t\t\tquestionDoc.properties.question_translated = getTranslationFromArray(questionDoc.properties.question, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.in_one_word_translated = getTranslationFromArray(questionDoc.properties.in_one_word, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.description_translated = getTranslationFromArray(questionDoc.properties.description, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.possibleAnswers = questionDoc.properties.possibleAnswers.map(answer => ({\n\t\t\t\t\t\t...answer,\n\t\t\t\t\t\ttitle_translated: getTranslationFromArray(answer.title, this.props.globals.userLocales),\n\t\t\t\t\t\tdescription_translated: getTranslationFromArray(answer.description, this.props.globals.userLocales),\n\t\t\t\t\t}))\n\t\n\t\t\t\t\tobj[questionDoc._id] = {\n\t\t\t\t\t\t...questionDoc,\n\t\t\t\t\t\t\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tactive: (questionDoc._id === nextQuestionIDs[firstOpenQuestionCounter]),\n\t\t\t\t\t\tanswered: false,\n\t\n\t\t\t\t\t\tpossibleAnswersByKey: questionDoc.properties.possibleAnswers.reduce((possibleAnswersByKey,possibleAnswer) => {\n\t\t\t\t\t\t\tpossibleAnswersByKey[possibleAnswer.key] = possibleAnswer\n\t\t\t\t\t\t\treturn possibleAnswersByKey\n\t\t\t\t\t\t}, {}),\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn obj\n\t\t\t\t}, {})\n\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tquestionsById,\n\t\t\t\t\tquestionsAreLoaded: true,\n\t\t\t\t}/*, ()=>{\n\t\t\t\t\tthis.setQuestionAsActive(nextQuestionIDs[0])\n\t\t\t\t}*/)\n\t\t\t}\n\t\t})\n\t}\n\n\tsetQuestionAsActive(questionID){\n\t\t// if (Object.keys(this.inputValues).length > 0) {\n\t\t// \tthis.answerQuestion(questionDoc._id, this.inputValues)\n\t\t// }\n\n\t\tthis.setState((state, props) => {\n\t\t\tconst questionIDs = Object.keys(state.questionsById)\n\n\t\t\tlet questionsById = state.questionsById\n\t\t\tfor (const questionID of questionIDs) {\n\t\t\t\tquestionsById[questionID].active = false\n\t\t\t}\n\t\t\t// if (!questionsById[questionID].answered) {\n\t\t\t\tquestionsById[questionID].active = true\n\t\t\t// }\n\n\t\t\treturn {\n\t\t\t\tquestionsById: questionsById,\n\t\t\t}\n\t\t})\n\t}\n\n\tanswer2tags(questionID, answerKey, answerValue, tags = {}){\n\t\tconst question_doc = this.state.questionsById[questionID]\n\n\t\tif (!!question_doc && !!question_doc.possibleAnswersByKey) {\n\t\t\tconst possibleAnswer = question_doc.possibleAnswersByKey[answerKey]\n\n\t\t\tif (!!possibleAnswer) {\n\t\t\t\tif (\n\t\t\t\t\t!!possibleAnswer.tags\n\t\t\t\t\t&& typeof possibleAnswer.tags === \"object\"\n\t\t\t\t\t&& Object.keys(possibleAnswer.tags).length > 0\n\t\t\t\t) {\n\t\t\t\t\tif (typeof answerValue === \"boolean\") {\n\t\t\t\t\t\tif (answerValue === true) {\n\t\t\t\t\t\t\ttags = {\n\t\t\t\t\t\t\t\t...tags,\n\t\t\t\t\t\t\t\t...possibleAnswer.tags,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t// } else if (typeof doc.answerValue === \"object\") {\n\t\t\t\t\t// \tfor (const key in possibleAnswer.tags) {\n\t\t\t\t\t// \t\tif (doc.answerValue[key]) {\n\t\t\t\t\t// \t\t\ttags[key] = doc.answerValue[key]\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (const key in possibleAnswer.tags) {\n\t\t\t\t\t\t\ttags[key] = answerValue\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t// add tags from the preset:\n\t\t\t\tif (tags.preset && typeof tags.preset === 'string' && _presets_[tags.preset] && _presets_[tags.preset].tags) {\n\t\t\t\t\ttags = {\n\t\t\t\t\t\t...tags,\n\t\t\t\t\t\t..._presets_[tags.preset].tags,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tags\n\t}\n\n\tanswerQuestion(questionID, answerValue, followUpQuestionIDs=[]){\n\t\tlet questionGotAnswered = false\n\t\tif (Object.keys(answerValue).length > 0) {\n\t\t\tquestionGotAnswered = true\n\t\t}\n\n\t\tif (questionGotAnswered) {\n\t\t\tthis.answer_tags = {\n\t\t\t\t...this.answer_tags,\n\t\t\t\t...answerValue,\n\t\t\t\t...(Object.entries(answerValue).reduce((tags,entry) => {\n\t\t\t\t\treturn this.answer2tags(questionID, entry[0], entry[1], tags)\n\t\t\t\t}, {}))\n\t\t\t}\n\t\t}\n\n\t\tthis.setState((state, props) => { // start this while mutating\n\t\t\tlet questionsById = state.questionsById\n\t\t\tlet nextQuestionIDs = state.nextQuestionIDs\n\n\t\t\tquestionsById[questionID].active = false\n\t\t\tif (questionGotAnswered) {\n\t\t\t\tquestionsById[questionID].answered = true\n\t\t\t}\n\n\t\t\tif (questionGotAnswered && followUpQuestionIDs.length === 0) {\n\t\t\t\tconst allKeys = Object.keys(answerValue)\n\t\t\t\tfollowUpQuestionIDs = questionsById[questionID].properties.possibleAnswers\n\t\t\t\t.filter(answer => allKeys.includes(answer.key))\n\t\t\t\t.map(answer => answer.followUpQuestionIDs || [])\n\t\t\t\t.reduce((result,followUpQuestionIDs) => {\n\t\t\t\t\treturn [...result, ...followUpQuestionIDs]\n\t\t\t\t}, [])\n\t\t\t}\n\n\t\t\tif (followUpQuestionIDs.length > 0) {\n\t\t\t\tconst currentQuestionPos = nextQuestionIDs.indexOf(questionID)\n\t\t\t\tconst nextQuestionIDs_start_part = nextQuestionIDs.slice(0, currentQuestionPos+1)\n\t\t\t\tconst nextQuestionIDs_end_part = nextQuestionIDs.slice(currentQuestionPos)\n\t\t\t\t\n\t\t\t\tnextQuestionIDs = [...new Set([\n\t\t\t\t\t...nextQuestionIDs_start_part,\n\t\t\t\t\t...followUpQuestionIDs.filter(questionID => !nextQuestionIDs_start_part.includes(questionID)),\n\t\t\t\t\t...nextQuestionIDs_end_part.filter(questionID => !followUpQuestionIDs.includes(questionID))\n\t\t\t\t])]\n\t\t\t}\n\n\t\t\tconst thisIndex = nextQuestionIDs.indexOf(questionID)\n\t\t\tif (thisIndex < nextQuestionIDs.length-1) {\n\t\t\t\tfor (let i=thisIndex+1; i<nextQuestionIDs.length; i+=1) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!!questionsById[nextQuestionIDs[i]]\n\t\t\t\t\t\t&& !questionsById[nextQuestionIDs[i]].answered\n\t\t\t\t\t) {\n\t\t\t\t\t\tquestionsById[nextQuestionIDs[i]].active = true\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (questionGotAnswered) {\n\t\t\t\treturn {\n\t\t\t\t\tnextQuestionIDs,\n\t\t\t\t\tquestionsById,\n\t\t\t\t\tanswersByQuestionId: {\n\t\t\t\t\t\t...state.answersByQuestionId,\n\t\t\t\t\t\t[questionID]: answerValue,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treturn {\n\t\t\t\t\tnextQuestionIDs,\n\t\t\t\t\tquestionsById,\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tsaveInputValue(questionID, key, value){\n\t\tif (!this.inputValues[questionID]) {\n\t\t\tthis.inputValues[questionID] = {}\n\t\t}\n\t\tthis.inputValues[questionID][key] = value\n\t}\n\tsubmitInputs(questionID){\n\t\tconst tmp_inputValues = this.inputValues[questionID] || {}\n\t\tthis.inputValues[questionID] = {}\n\t\tthis.answerQuestion(questionID, tmp_inputValues)\n\t}\n\tgetInputValueByNamespace(questionID,namespace){\n\t\tlet toReturn = {}\n\t\tconst namespaceWithColon = namespace+':'\n\t\tconst namespaceWithColonLenght = namespaceWithColon.length\n\n\n\t\t// get the unsaved value  \n\t\tif (this.inputValues[questionID]) {\n\t\t\tconst tags = this.inputValues[questionID]\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\t// get a value from the documents tags\n\t\tif (this.answer_tags) {\n\t\t\tconst tags = this.answer_tags\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\t// get a value from the documents tags\n\t\tif (this.tagsFromTheDoc) {\n\t\t\tconst tags = this.tagsFromTheDoc\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\treturn toReturn\n\t}\n\tgetInputValue(questionID,answerKey){\n\n\t\t// get the unsaved value  \n\t\tif (this.inputValues[questionID] && this.inputValues[questionID][answerKey]) {\n\t\t\treturn this.inputValues[questionID][answerKey]\n\t\t}\n\n\t\t// get a value from the given answers\n\t\tconst question_doc = this.state.questionsById[questionID]\n\t\tconst possibleAnswer = question_doc.possibleAnswersByKey[answerKey]\n\t\tconst tagKeys = Object.keys(possibleAnswer.tags || {})\n\n\t\tfor (const key of tagKeys) {\n\t\t\tif (this.answer_tags.hasOwnProperty(key)) {\n\t\t\t\treturn this.answer_tags[key]\n\t\t\t}\n\t\t}\n\n\t\t// get a value from the documents tags\n\t\tfor (const key of tagKeys) {\n\t\t\tif (this.tagsFromTheDoc.hasOwnProperty(key)) {\n\t\t\t\treturn this.tagsFromTheDoc[key]\n\t\t\t}\n\t\t}\n\n\t\treturn ''\n\t}\n\n\tsavePresetValue(questionID,newValue){\n\t\tthis.saveInputValue(questionID, 'preset', newValue.preset)\n\t}\n\tsaveValueByKey(questionID,newValue,namespace){\n\t\tconst keys = Object.keys(newValue)\n\t\tfor (const key of keys) {\n\t\t\tthis.saveInputValue(questionID, (\n\t\t\t\t!!namespace\n\t\t\t\t? (key === '' ? namespace : namespace+':'+key)\n\t\t\t\t: key\n\t\t\t), newValue[key])\n\t\t}\n\t}\n\n\trenderQuestion(questionID){\n\t\tconst questionDoc = this.state.questionsById[questionID]\n\n\t\tif (!(\n\t\t\t!!questionDoc &&\n\t\t\t!!questionDoc._id &&\n\t\t\t!!questionDoc.properties\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\tif (!questionDoc.visible) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst hasGeoInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => possibleAnswer.inputtype === 'geo').length > 0\n\n\t\tif (this.props.globals.isSmallScreen && hasGeoInputField) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst hasInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => {\n\t\t\treturn (\n\t\t\t\t   possibleAnswer.inputtype === 'text'\n\t\t\t\t|| possibleAnswer.inputtype === 'number'\n\t\t\t\t|| possibleAnswer.inputtype === 'geo'\n\t\t\t\t|| possibleAnswer.inputtype === 'preset'\n\t\t\t\t|| possibleAnswer.inputtype === 'date'\n\t\t\t\t|| possibleAnswer.inputtype === 'audience'\n\t\t\t\t|| possibleAnswer.inputtype === 'address'\n\t\t\t)\n\t\t}).length > 0\n\n\t\tconst isMultiRow = hasInputField || (questionDoc.properties.possibleAnswers && questionDoc.properties.possibleAnswers.length > 2)\n\n\t\tconst location = this.props.doc.properties.geometry.location\n\n\t\tlet heading = ''\n\t\tif (questionDoc.active) {\n\t\t\tif (questionDoc.properties.question_translated !== '') {\n\t\t\t\theading = questionDoc.properties.question_translated\n\t\t\t} else if (questionDoc.properties.in_one_word_translated !== '') {\n\t\t\t\theading = questionDoc.properties.in_one_word_translated\n\t\t\t}\n\t\t}else{\n\t\t\tif (questionDoc.properties.in_one_word_translated !== '') {\n\t\t\t\theading = questionDoc.properties.in_one_word_translated\n\t\t\t} else if (questionDoc.properties.question_translated !== '') {\n\t\t\t\theading = questionDoc.properties.question_translated\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\tkey={`question_${questionDoc._id}`}\n\t\t\t\tclassName={\n\t\t\t\t\t'questionCard '\n\t\t\t\t\t+(questionDoc.answered ? 'answered ' : '')\n\t\t\t\t\t+(questionDoc.active ? 'active ' : '')\n\t\t\t\t\t+(hasInputField ? 'hasInputField ' : '')\n\t\t\t\t\t+(isMultiRow ? 'isMultiRow ' : '')\n\t\t\t\t}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\televation={0}\n\t\t\t\tonClick={\n\t\t\t\t\t/*!questionDoc.answered &&*/ !questionDoc.active\n\t\t\t\t\t? ()=>this.setQuestionAsActive(questionDoc._id)\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<ListItem dense disableGutters className=\"questionText\">\n\t\t\t\t\t{\n\t\t\t\t\t\tquestionDoc.properties.icon\n\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>{questionDoc.properties.icon}</div>\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={heading}\n\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\tvariant: 'body1',\n\t\t\t\t\t\t\t// className: 'questionText',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsecondary={!questionDoc.active ? '' : questionDoc.properties.description_translated}\n\t\t\t\t\t/>\n\t\t\t\t</ListItem>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"possibleAnswers\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexDirection: (isMultiRow ? 'column' : 'row'),\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\t!questionDoc.active\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: (questionDoc.properties.possibleAnswers.map(possibleAnswer=>{\n\t\t\t\t\t\t\tif (possibleAnswer.hidden) {\n\t\t\t\t\t\t\t\treturn undefined\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconst possibleAnswerKey = possibleAnswer.key\n\t\t\t\t\t\t\t\tconst possibleAnswerNamespace = possibleAnswer.namespace\n\t\t\t\t\t\t\t\tconst inputtype = possibleAnswer.inputtype || ''\n\t\t\t\t\t\t\t\tconst inputOptions = possibleAnswer.inputOptions || {}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (inputtype === 'date') {\n\t\t\t\t\t\t\t\t\treturn (<DateInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValueByNamespace(questionDoc._id,possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'address') {\n\t\t\t\t\t\t\t\t\treturn (<AddressInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValueByNamespace(questionDoc._id,possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\ttags={{\n\t\t\t\t\t\t\t\t\t\t\t...this.props.doc.properties.tags,\n\t\t\t\t\t\t\t\t\t\t\t...this.answer_tags,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0 8px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'geo') {\n\t\t\t\t\t\t\t\t\treturn (<GeoInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tmarker={{\n\t\t\t\t\t\t\t\t\t\t\tcenter: location,\n\t\t\t\t\t\t\t\t\t\t\tzoom: 18,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdoc={this.props.doc}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, null)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin: '4px 0',\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0 12px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'preset') {\n\t\t\t\t\t\t\t\t\treturn (<PresetInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveInputValue(questionDoc._id, possibleAnswerKey, newValue)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin:'8px 8px 4px 8px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'audience') {\n\t\t\t\t\t\t\t\t\treturn (<AudienceInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValueByNamespace(questionDoc._id,possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin:'0 8px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'text') {\n\t\t\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t{...(\n\t\t\t\t\t\t\t\t\t\t\tinputOptions.multiline\n\t\t\t\t\t\t\t\t\t\t\t? {multiline: 'multiline'}\n\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={event=>this.saveInputValue(questionDoc._id, possibleAnswerKey, event.target.value)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin: '8px 8px 4px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (inputtype === 'number') {\n\t\t\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={event=>this.saveInputValue(questionDoc._id, possibleAnswerKey, event.target.value)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin: '8px 8px 4px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.answerQuestion(\n\t\t\t\t\t\t\t\t\t\t\t\tquestionDoc._id,\n\t\t\t\t\t\t\t\t\t\t\t\tpossibleAnswer.tags || {},\n\t\t\t\t\t\t\t\t\t\t\t\tpossibleAnswer.followUpQuestionIDs || [],\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\t\t\t\t\tmargin: '4px 8px',\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: (isMultiRow ? '10px 16px' : '16px 8px'),\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: (isMultiRow ? 'flex-start' : 'center'),\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: (isMultiRow ? 'inherit' : 'center'),\n\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: `inset 0 0 0 999px ${this.props.theme.palette.divider}`,\n\t\t\t\t\t\t\t\t\t\t\t\t// boxShadow: `inset 0 0 0 999px ${this.props.theme.palette.background.default}`,\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: `${this.props.theme.shape.borderRadius}px`,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tisMultiRow && !!possibleAnswer.icon\n\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemIcon style={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminWidth: '24px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: '6px 16px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talignSelf: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"material-icons-round\">{possibleAnswer.icon}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\n\t\t\t\t<div className=\"saveButton\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={()=>this.submitInputs(questionDoc._id)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\tboxShadow: `inset 0 0 0 999px ${this.props.theme.palette.divider}`,\n\t\t\t\t\t\t\t// boxShadow: `inset 0 0 0 999px ${this.props.theme.palette.background.default}`,\n\t\t\t\t\t\t\t// boxShadow: 'rgba(0, 0, 0, 0.04) 0px 0px 0px 999px inset',\n\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\tmargin: '0 8px',\n\t\t\t\t\t\t\tpadding: '8px 16px 8px 12px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"save\" />\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{/*<Fab\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tonClick={()=>this.submitInputs(questionDoc._id)}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackground: 'black',\n\t\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\t\tpadding: '0 16px 0 20px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"next\" />\n\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t</Fab>*/}\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t)\n\t}\n\n\tabort(){\n\t\tif (this.props.onAbort) {\n\t\t\tthis.props.onAbort()\n\t\t}\n\t}\n\tacceptPrivacyPolicy(){\n\t\tthis.props.store.setPrivacy('tracking', true).finally(()=>{\n\t\t\tthis.props.store.setPrivacy(null, true).finally(()=>{\n\t\t\t\tthis.props.store.set('uuid', uuidv4(), 'tracking')\n\t\t\t\tthis.showQuestions()\n\t\t\t})\n\t\t})\n\t}\n\tshowQuestions(){\n\t\tthis.setState({stageIndex:1})\n\t}\n\taddSources(){\n\t\tthis.setState({stageIndex:2})\n\t}\n\tsuggest(){\n\t\tif (Object.keys(this.answer_tags).length > 0) {\n\t\t\tthis.props.globals.graphql.mutate({\n\t\t\t\tmutation: mutation_addChangeset,\n\t\t\t\tvariables: {\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tforID: this.props.doc._id,\n\t\t\t\t\t\ttags: this.answer_tags,\n\t\t\t\t\t\tsources: this.sourcesText || '',\n\t\t\t\t\t\tfromBot: false,\n\t\t\t\t\t\tdataset: 'qiekub',\n\t\t\t\t\t\tantiSpamUserIdentifier: this.props.store.get('uuid') || '',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error=>{\n\t\t\t\tconsole.error('mutation_addChangeset-error', error)\n\t\t\t})\n\t\t\t.finally(()=>{\n\t\t\t\tthis.setState({stageIndex:3})\n\t\t\t})\n\t\t}\n\t}\n\tfinish(){\n\t\tif (this.props.onFinish) {\n\t\t\tthis.props.onFinish()\n\t\t}\n\t}\n\n\tsaveSourcesText(event){\n\t\tthis.sourcesText = event.target.value\n\t}\n\n\trenderStage(){\n\t\tconst {stageIndex} = this.state\n\n\t\tif (stageIndex === 0) { // privacy\n\t\t\treturn (<div style={{padding: '16px'}}>\n\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t<Localized id=\"headings_privacy_stage\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t\t<Localized\n\t\t\t\t\t\tid=\"privacy_info\"\n\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\tprivacy_policy_link: <Link target=\"_blank\" href=\"https://www.qiekub.org/datenschutz.html\"></Link>,\n\t\t\t\t\t\t}}\n\t\t\t\t\t></Localized>\n\t\t\t\t</Typography>\n\t\n\t\t\t\t<div style={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\tmargin: '32px 0 0 0'\n\t\t\t\t}}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.abort}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"abort\" />\n\t\t\t\t\t</Fab>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.acceptPrivacyPolicy}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"agree\" />\n\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t</Fab>\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t} else if (stageIndex === 1) { // questions\n\t\t\tif (!this.state.questionsAreLoaded) {\n\t\t\t\treturn (<div style={{margin:'16px'}}>\n\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t\t<Localized id=\"headings_questions_stage\" />\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant=\"body1\" style={{margin:'0 0 32px 0'}}>\n\t\t\t\t\t\t<Localized id=\"questions_are_loading\" />\n\t\t\t\t\t</Typography>\n\t\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.abort}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"abort\" />\n\t\t\t\t\t</Fab>\n\t\t\t\t</div>)\n\t\t\t} else if (!!this.state.questionsById && Object.keys(this.state.questionsById).length > 0) {\n\t\t\t\treturn (<>\n\t\t\t\t\t<Typography variant=\"h6\" gutterBottom style={{margin:'16px 16px 32px 16px'}}>\n\t\t\t\t\t\t<Localized id=\"headings_questions_stage\" />\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<React.Fragment key=\"questions\">\n\t\t\t\t\t\t{this.state.nextQuestionIDs.map(questionID => this.renderQuestion(questionID))}\n\t\t\t\t\t</React.Fragment>\n\t\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tmargin: '32px 0 0 0'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.abort}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t\t<Localized id=\"abort\" />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.addSources}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Localized id=\"next\" />\n\t\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t\t</>)\n\t\t\t}\n\t\t} else if (stageIndex === 2) { // sources\n\t\t\treturn (<div style={{padding: '16px'}}>\n\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t<Localized id=\"headings_sources_stage\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t\t<Localized id=\"sources_info\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<TextField\n\t\t\t\t\tstyle={{marginTop: '16px'}}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tautoFocus={false}\n\t\t\t\t\tplaceholder={this.props.getString('sources_placeholder')}\n\t\t\t\t\tonChange={this.saveSourcesText}\n\t\t\t\t/>\n\t\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tmargin: '32px 0 0 0'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.showQuestions}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t\t<Localized id=\"back\" />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.suggest}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Localized id=\"suggest\" />\n\t\t\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t</div>)\n\t\t} else if (stageIndex === 3) { // thanks\n\t\t\treturn (<div style={{padding: '16px'}}>\n\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t<Localized id=\"headings_thanks_stage\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t\t<Localized id=\"after_questions_thanks_text\" />\n\t\t\t\t</Typography>\n\t\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tmargin: '32px 0 0 0'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.finish}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Localized id=\"finish\" />\n\t\t\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t</div>)\n\t\t}\n\n\t\treturn null\n\t}\n\n\trender() {\n\t\tconst doc = this.props.doc\n\n\t\tif (!(\n\t\t\t!!doc &&\n\t\t\t!!doc._id\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\treturn this.renderStage()\n\t}\n}\n\nexport default withGlobals(withLocalization(withTheme(Questions)))\n\n"],"sourceRoot":""}